const gn={};function Jn(e,t){const g=Object.create(null),m=e.split(",");for(let _=0;_<m.length;_++)g[m[_]]=!0;return t?_=>!!g[_.toLowerCase()]:_=>!!g[_]}const Ma="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ra=Jn(Ma);function $s(e){return!!e||e===""}function en(e){if(fe(e)){const t={};for(let g=0;g<e.length;g++){const m=e[g],_=Se(m)?ja(m):en(m);if(_)for(const y in _)t[y]=_[y]}return t}else{if(Se(e))return e;if(Pe(e))return e}}const Fa=/;(?![^(]*\))/g,Ia=/:(.+)/;function ja(e){const t={};return e.split(Fa).forEach(g=>{if(g){const m=g.split(Ia);m.length>1&&(t[m[0].trim()]=m[1].trim())}}),t}function Ci(e){let t="";if(Se(e))t=e;else if(fe(e))for(let g=0;g<e.length;g++){const m=Ci(e[g]);m&&(t+=m+" ")}else if(Pe(e))for(const g in e)e[g]&&(t+=g+" ");return t.trim()}const Zn=e=>e==null?"":fe(e)||Pe(e)&&(e.toString===Qs||!ge(e.toString))?JSON.stringify(e,qs,2):String(e),qs=(e,t)=>t&&t.__v_isRef?qs(e,t.value):Wt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((g,[m,_])=>(g[`${m} =>`]=_,g),{})}:Js(t)?{[`Set(${t.size})`]:[...t.values()]}:Pe(t)&&!fe(t)&&!eo(t)?String(t):t,we={},Ht=[],qe=()=>{},Ba=()=>!1,Na=/^on[^a-z]/,xi=e=>Na.test(e),Qn=e=>e.startsWith("onUpdate:"),De=Object.assign,Ks=(e,t)=>{const g=e.indexOf(t);g>-1&&e.splice(g,1)},za=Object.prototype.hasOwnProperty,me=(e,t)=>za.call(e,t),fe=Array.isArray,Wt=e=>tn(e)==="[object Map]",Js=e=>tn(e)==="[object Set]",ge=e=>typeof e=="function",Se=e=>typeof e=="string",er=e=>typeof e=="symbol",Pe=e=>e!==null&&typeof e=="object",Zs=e=>Pe(e)&&ge(e.then)&&ge(e.catch),Qs=Object.prototype.toString,tn=e=>Qs.call(e),Xa=e=>tn(e).slice(8,-1),eo=e=>tn(e)==="[object Object]",tr=e=>Se(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ci=Jn(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),nn=e=>{const t=Object.create(null);return g=>t[g]||(t[g]=e(g))},Ha=/-(\w)/g,et=nn(e=>e.replace(Ha,(t,g)=>g?g.toUpperCase():"")),Wa=/\B([A-Z])/g,Kt=nn(e=>e.replace(Wa,"-$1").toLowerCase()),rn=nn(e=>e.charAt(0).toUpperCase()+e.slice(1)),pn=nn(e=>e?`on${rn(e)}`:""),mi=(e,t)=>!Object.is(e,t),Ii=(e,t)=>{for(let g=0;g<e.length;g++)e[g](t)},zi=(e,t,g)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:g})},Xi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let jr;const Ua=()=>jr||(jr=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ze;const Pi=[];class Ya{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Ze&&(this.parent=Ze,this.index=(Ze.scopes||(Ze.scopes=[])).push(this)-1)}run(t){if(this.active)try{return this.on(),t()}finally{this.off()}}on(){this.active&&(Pi.push(this),Ze=this)}off(){this.active&&(Pi.pop(),Ze=Pi[Pi.length-1])}stop(t){if(this.active){if(this.effects.forEach(g=>g.stop()),this.cleanups.forEach(g=>g()),this.scopes&&this.scopes.forEach(g=>g.stop(!0)),this.parent&&!t){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.active=!1}}}function Va(e,t){t=t||Ze,t&&t.active&&t.effects.push(e)}function Ga(){return Ze}function $a(e){Ze&&Ze.cleanups.push(e)}const ir=e=>{const t=new Set(e);return t.w=0,t.n=0,t},to=e=>(e.w&_t)>0,io=e=>(e.n&_t)>0,qa=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=_t},Ka=e=>{const{deps:t}=e;if(t.length){let g=0;for(let m=0;m<t.length;m++){const _=t[m];to(_)&&!io(_)?_.delete(e):t[g++]=_,_.w&=~_t,_.n&=~_t}t.length=g}},kn=new WeakMap;let ai=0,_t=1;const Dn=30,ti=[];let Ot;const Et=Symbol(""),Ln=Symbol("");class nr{constructor(t,g=null,m){this.fn=t,this.scheduler=g,this.active=!0,this.deps=[],Va(this,m)}run(){if(!this.active)return this.fn();if(!ti.includes(this))try{return ti.push(Ot=this),Ja(),_t=1<<++ai,ai<=Dn?qa(this):Br(this),this.fn()}finally{ai<=Dn&&Ka(this),_t=1<<--ai,Lt(),ti.pop();const t=ti.length;Ot=t>0?ti[t-1]:void 0}}stop(){this.active&&(Br(this),this.onStop&&this.onStop(),this.active=!1)}}function Br(e){const{deps:t}=e;if(t.length){for(let g=0;g<t.length;g++)t[g].delete(e);t.length=0}}let Yt=!0;const rr=[];function Jt(){rr.push(Yt),Yt=!1}function Ja(){rr.push(Yt),Yt=!0}function Lt(){const e=rr.pop();Yt=e===void 0?!0:e}function He(e,t,g){if(!no())return;let m=kn.get(e);m||kn.set(e,m=new Map);let _=m.get(g);_||m.set(g,_=ir()),ro(_)}function no(){return Yt&&Ot!==void 0}function ro(e,t){let g=!1;ai<=Dn?io(e)||(e.n|=_t,g=!to(e)):g=!e.has(Ot),g&&(e.add(Ot),Ot.deps.push(e))}function at(e,t,g,m,_,y){const x=kn.get(e);if(!x)return;let f=[];if(t==="clear")f=[...x.values()];else if(g==="length"&&fe(e))x.forEach((i,c)=>{(c==="length"||c>=m)&&f.push(i)});else switch(g!==void 0&&f.push(x.get(g)),t){case"add":fe(e)?tr(g)&&f.push(x.get("length")):(f.push(x.get(Et)),Wt(e)&&f.push(x.get(Ln)));break;case"delete":fe(e)||(f.push(x.get(Et)),Wt(e)&&f.push(x.get(Ln)));break;case"set":Wt(e)&&f.push(x.get(Et));break}if(f.length===1)f[0]&&Mn(f[0]);else{const i=[];for(const c of f)c&&i.push(...c);Mn(ir(i))}}function Mn(e,t){for(const g of fe(e)?e:[...e])(g!==Ot||g.allowRecurse)&&(g.scheduler?g.scheduler():g.run())}const Za=Jn("__proto__,__v_isRef,__isVue"),so=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(er)),Qa=sr(),el=sr(!1,!0),tl=sr(!0),Nr=il();function il(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...g){const m=ve(this);for(let y=0,x=this.length;y<x;y++)He(m,"get",y+"");const _=m[t](...g);return _===-1||_===!1?m[t](...g.map(ve)):_}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...g){Jt();const m=ve(this)[t].apply(this,g);return Lt(),m}}),e}function sr(e=!1,t=!1){return function(m,_,y){if(_==="__v_isReactive")return!e;if(_==="__v_isReadonly")return e;if(_==="__v_raw"&&y===(e?t?_l:ho:t?co:lo).get(m))return m;const x=fe(m);if(!e&&x&&me(Nr,_))return Reflect.get(Nr,_,y);const f=Reflect.get(m,_,y);return(er(_)?so.has(_):Za(_))||(e||He(m,"get",_),t)?f:Me(f)?!x||!tr(_)?f.value:f:Pe(f)?e?lr(f):Si(f):f}}const nl=oo(),rl=oo(!0);function oo(e=!1){return function(g,m,_,y){let x=g[m];if(!e&&!hr(_)&&(_=ve(_),x=ve(x),!fe(g)&&Me(x)&&!Me(_)))return x.value=_,!0;const f=fe(g)&&tr(m)?Number(m)<g.length:me(g,m),i=Reflect.set(g,m,_,y);return g===ve(y)&&(f?mi(_,x)&&at(g,"set",m,_):at(g,"add",m,_)),i}}function sl(e,t){const g=me(e,t);e[t];const m=Reflect.deleteProperty(e,t);return m&&g&&at(e,"delete",t,void 0),m}function ol(e,t){const g=Reflect.has(e,t);return(!er(t)||!so.has(t))&&He(e,"has",t),g}function al(e){return He(e,"iterate",fe(e)?"length":Et),Reflect.ownKeys(e)}const ao={get:Qa,set:nl,deleteProperty:sl,has:ol,ownKeys:al},ll={get:tl,set(e,t){return!0},deleteProperty(e,t){return!0}},cl=De({},ao,{get:el,set:rl}),or=e=>e,sn=e=>Reflect.getPrototypeOf(e);function Ai(e,t,g=!1,m=!1){e=e.__v_raw;const _=ve(e),y=ve(t);t!==y&&!g&&He(_,"get",t),!g&&He(_,"get",y);const{has:x}=sn(_),f=m?or:g?ur:vi;if(x.call(_,t))return f(e.get(t));if(x.call(_,y))return f(e.get(y));e!==_&&e.get(t)}function ki(e,t=!1){const g=this.__v_raw,m=ve(g),_=ve(e);return e!==_&&!t&&He(m,"has",e),!t&&He(m,"has",_),e===_?g.has(e):g.has(e)||g.has(_)}function Di(e,t=!1){return e=e.__v_raw,!t&&He(ve(e),"iterate",Et),Reflect.get(e,"size",e)}function zr(e){e=ve(e);const t=ve(this);return sn(t).has.call(t,e)||(t.add(e),at(t,"add",e,e)),this}function Xr(e,t){t=ve(t);const g=ve(this),{has:m,get:_}=sn(g);let y=m.call(g,e);y||(e=ve(e),y=m.call(g,e));const x=_.call(g,e);return g.set(e,t),y?mi(t,x)&&at(g,"set",e,t):at(g,"add",e,t),this}function Hr(e){const t=ve(this),{has:g,get:m}=sn(t);let _=g.call(t,e);_||(e=ve(e),_=g.call(t,e)),m&&m.call(t,e);const y=t.delete(e);return _&&at(t,"delete",e,void 0),y}function Wr(){const e=ve(this),t=e.size!==0,g=e.clear();return t&&at(e,"clear",void 0,void 0),g}function Li(e,t){return function(m,_){const y=this,x=y.__v_raw,f=ve(x),i=t?or:e?ur:vi;return!e&&He(f,"iterate",Et),x.forEach((c,r)=>m.call(_,i(c),i(r),y))}}function Mi(e,t,g){return function(...m){const _=this.__v_raw,y=ve(_),x=Wt(y),f=e==="entries"||e===Symbol.iterator&&x,i=e==="keys"&&x,c=_[e](...m),r=g?or:t?ur:vi;return!t&&He(y,"iterate",i?Ln:Et),{next(){const{value:n,done:o}=c.next();return o?{value:n,done:o}:{value:f?[r(n[0]),r(n[1])]:r(n),done:o}},[Symbol.iterator](){return this}}}}function ct(e){return function(...t){return e==="delete"?!1:this}}function hl(){const e={get(y){return Ai(this,y)},get size(){return Di(this)},has:ki,add:zr,set:Xr,delete:Hr,clear:Wr,forEach:Li(!1,!1)},t={get(y){return Ai(this,y,!1,!0)},get size(){return Di(this)},has:ki,add:zr,set:Xr,delete:Hr,clear:Wr,forEach:Li(!1,!0)},g={get(y){return Ai(this,y,!0)},get size(){return Di(this,!0)},has(y){return ki.call(this,y,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:Li(!0,!1)},m={get(y){return Ai(this,y,!0,!0)},get size(){return Di(this,!0)},has(y){return ki.call(this,y,!0)},add:ct("add"),set:ct("set"),delete:ct("delete"),clear:ct("clear"),forEach:Li(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{e[y]=Mi(y,!1,!1),g[y]=Mi(y,!0,!1),t[y]=Mi(y,!1,!0),m[y]=Mi(y,!0,!0)}),[e,g,t,m]}const[ul,fl,dl,gl]=hl();function ar(e,t){const g=t?e?gl:dl:e?fl:ul;return(m,_,y)=>_==="__v_isReactive"?!e:_==="__v_isReadonly"?e:_==="__v_raw"?m:Reflect.get(me(g,_)&&_ in m?g:m,_,y)}const pl={get:ar(!1,!1)},ml={get:ar(!1,!0)},vl={get:ar(!0,!1)},lo=new WeakMap,co=new WeakMap,ho=new WeakMap,_l=new WeakMap;function yl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bl(e){return e.__v_skip||!Object.isExtensible(e)?0:yl(Xa(e))}function Si(e){return e&&e.__v_isReadonly?e:cr(e,!1,ao,pl,lo)}function wl(e){return cr(e,!1,cl,ml,co)}function lr(e){return cr(e,!0,ll,vl,ho)}function cr(e,t,g,m,_){if(!Pe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const y=_.get(e);if(y)return y;const x=bl(e);if(x===0)return e;const f=new Proxy(e,x===2?m:g);return _.set(e,f),f}function Ut(e){return hr(e)?Ut(e.__v_raw):!!(e&&e.__v_isReactive)}function hr(e){return!!(e&&e.__v_isReadonly)}function uo(e){return Ut(e)||hr(e)}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function fo(e){return zi(e,"__v_skip",!0),e}const vi=e=>Pe(e)?Si(e):e,ur=e=>Pe(e)?lr(e):e;function go(e){no()&&(e=ve(e),e.dep||(e.dep=ir()),ro(e.dep))}function po(e,t){e=ve(e),e.dep&&Mn(e.dep)}function Me(e){return Boolean(e&&e.__v_isRef===!0)}function Te(e){return vo(e,!1)}function mo(e){return vo(e,!0)}function vo(e,t){return Me(e)?e:new Cl(e,t)}class Cl{constructor(t,g){this._shallow=g,this.dep=void 0,this.__v_isRef=!0,this._rawValue=g?t:ve(t),this._value=g?t:vi(t)}get value(){return go(this),this._value}set value(t){t=this._shallow?t:ve(t),mi(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:vi(t),po(this))}}function st(e){return Me(e)?e.value:e}const xl={get:(e,t,g)=>st(Reflect.get(e,t,g)),set:(e,t,g,m)=>{const _=e[t];return Me(_)&&!Me(g)?(_.value=g,!0):Reflect.set(e,t,g,m)}};function _o(e){return Ut(e)?e:new Proxy(e,xl)}function Sl(e){const t=fe(e)?new Array(e.length):{};for(const g in e)t[g]=Ol(e,g);return t}class Tl{constructor(t,g){this._object=t,this._key=g,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(t){this._object[this._key]=t}}function Ol(e,t){const g=e[t];return Me(g)?g:new Tl(e,t)}class El{constructor(t,g,m){this._setter=g,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new nr(t,()=>{this._dirty||(this._dirty=!0,po(this))}),this.__v_isReadonly=m}get value(){const t=ve(this);return go(t),t._dirty&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function xe(e,t){let g,m;const _=ge(e);return _?(g=e,m=qe):(g=e.get,m=e.set),new El(g,m,_||!m)}Promise.resolve();function Pl(e,t,...g){const m=e.vnode.props||we;let _=g;const y=t.startsWith("update:"),x=y&&t.slice(7);if(x&&x in m){const r=`${x==="modelValue"?"model":x}Modifiers`,{number:n,trim:o}=m[r]||we;o?_=g.map(a=>a.trim()):n&&(_=g.map(Xi))}let f,i=m[f=pn(t)]||m[f=pn(et(t))];!i&&y&&(i=m[f=pn(Kt(t))]),i&&Ye(i,e,6,_);const c=m[f+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,Ye(c,e,6,_)}}function yo(e,t,g=!1){const m=t.emitsCache,_=m.get(e);if(_!==void 0)return _;const y=e.emits;let x={},f=!1;if(!ge(e)){const i=c=>{const r=yo(c,t,!0);r&&(f=!0,De(x,r))};!g&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!y&&!f?(m.set(e,null),null):(fe(y)?y.forEach(i=>x[i]=null):De(x,y),m.set(e,x),x)}function fr(e,t){return!e||!xi(t)?!1:(t=t.slice(2).replace(/Once$/,""),me(e,t[0].toLowerCase()+t.slice(1))||me(e,Kt(t))||me(e,t))}let Xe=null,on=null;function Hi(e){const t=Xe;return Xe=e,on=e&&e.type.__scopeId||null,t}function Al(e){on=e}function kl(){on=null}function bo(e,t=Xe,g){if(!t||e._n)return e;const m=(..._)=>{m._d&&Qr(-1);const y=Hi(t),x=e(..._);return Hi(y),m._d&&Qr(1),x};return m._n=!0,m._c=!0,m._d=!0,m}function mn(e){const{type:t,vnode:g,proxy:m,withProxy:_,props:y,propsOptions:[x],slots:f,attrs:i,emit:c,render:r,renderCache:n,data:o,setupState:a,ctx:u,inheritAttrs:l}=e;let s,h;const d=Hi(e);try{if(g.shapeFlag&4){const v=_||m;s=$e(r.call(v,v,n,y,a,o,u)),h=i}else{const v=t;s=$e(v.length>1?v(y,{attrs:i,slots:f,emit:c}):v(y,null)),h=t.props?i:Dl(i)}}catch(v){ui.length=0,Oi(v,e,1),s=Ee(Ve)}let p=s;if(h&&l!==!1){const v=Object.keys(h),{shapeFlag:b}=p;v.length&&b&7&&(x&&v.some(Qn)&&(h=Ll(h,x)),p=Vt(p,h))}return g.dirs&&(p.dirs=p.dirs?p.dirs.concat(g.dirs):g.dirs),g.transition&&(p.transition=g.transition),s=p,Hi(d),s}const Dl=e=>{let t;for(const g in e)(g==="class"||g==="style"||xi(g))&&((t||(t={}))[g]=e[g]);return t},Ll=(e,t)=>{const g={};for(const m in e)(!Qn(m)||!(m.slice(9)in t))&&(g[m]=e[m]);return g};function Ml(e,t,g){const{props:m,children:_,component:y}=e,{props:x,children:f,patchFlag:i}=t,c=y.emitsOptions;if(t.dirs||t.transition)return!0;if(g&&i>=0){if(i&1024)return!0;if(i&16)return m?Ur(m,x,c):!!x;if(i&8){const r=t.dynamicProps;for(let n=0;n<r.length;n++){const o=r[n];if(x[o]!==m[o]&&!fr(c,o))return!0}}}else return(_||f)&&(!f||!f.$stable)?!0:m===x?!1:m?x?Ur(m,x,c):!0:!!x;return!1}function Ur(e,t,g){const m=Object.keys(t);if(m.length!==Object.keys(e).length)return!0;for(let _=0;_<m.length;_++){const y=m[_];if(t[y]!==e[y]&&!fr(g,y))return!0}return!1}function Rl({vnode:e,parent:t},g){for(;t&&t.subTree===e;)(e=t.vnode).el=g,t=t.parent}const Fl=e=>e.__isSuspense;function wo(e,t){t&&t.pendingBranch?fe(e)?t.effects.push(...e):t.effects.push(e):Fc(e)}function Pt(e,t){if(Ae){let g=Ae.provides;const m=Ae.parent&&Ae.parent.provides;m===g&&(g=Ae.provides=Object.create(m)),g[e]=t}}function ke(e,t,g=!1){const m=Ae||Xe;if(m){const _=m.parent==null?m.vnode.appContext&&m.vnode.appContext.provides:m.parent.provides;if(_&&e in _)return _[e];if(arguments.length>1)return g&&ge(t)?t.call(m.proxy):t}}function Il(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return tt(()=>{e.isMounted=!0}),ln(()=>{e.isUnmounting=!0}),e}const We=[Function,Array],jl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:We,onEnter:We,onAfterEnter:We,onEnterCancelled:We,onBeforeLeave:We,onLeave:We,onAfterLeave:We,onLeaveCancelled:We,onBeforeAppear:We,onAppear:We,onAfterAppear:We,onAppearCancelled:We},setup(e,{slots:t}){const g=Sc(),m=Il();let _;return()=>{const y=t.default&&So(t.default(),!0);if(!y||!y.length)return;const x=ve(e),{mode:f}=x,i=y[0];if(m.isLeaving)return vn(i);const c=Yr(i);if(!c)return vn(i);const r=Rn(c,x,m,g);Fn(c,r);const n=g.subTree,o=n&&Yr(n);let a=!1;const{getTransitionKey:u}=c.type;if(u){const l=u();_===void 0?_=l:l!==_&&(_=l,a=!0)}if(o&&o.type!==Ve&&(!xt(c,o)||a)){const l=Rn(o,x,m,g);if(Fn(o,l),f==="out-in")return m.isLeaving=!0,l.afterLeave=()=>{m.isLeaving=!1,g.update()},vn(i);f==="in-out"&&c.type!==Ve&&(l.delayLeave=(s,h,d)=>{const p=xo(m,o);p[String(o.key)]=o,s._leaveCb=()=>{h(),s._leaveCb=void 0,delete r.delayedLeave},r.delayedLeave=d})}return i}}},Co=jl;function xo(e,t){const{leavingVNodes:g}=e;let m=g.get(t.type);return m||(m=Object.create(null),g.set(t.type,m)),m}function Rn(e,t,g,m){const{appear:_,mode:y,persisted:x=!1,onBeforeEnter:f,onEnter:i,onAfterEnter:c,onEnterCancelled:r,onBeforeLeave:n,onLeave:o,onAfterLeave:a,onLeaveCancelled:u,onBeforeAppear:l,onAppear:s,onAfterAppear:h,onAppearCancelled:d}=t,p=String(e.key),v=xo(g,e),b=(w,S)=>{w&&Ye(w,m,9,S)},C={mode:y,persisted:x,beforeEnter(w){let S=f;if(!g.isMounted)if(_)S=l||f;else return;w._leaveCb&&w._leaveCb(!0);const T=v[p];T&&xt(e,T)&&T.el._leaveCb&&T.el._leaveCb(),b(S,[w])},enter(w){let S=i,T=c,A=r;if(!g.isMounted)if(_)S=s||i,T=h||c,A=d||r;else return;let M=!1;const E=w._enterCb=D=>{M||(M=!0,D?b(A,[w]):b(T,[w]),C.delayedLeave&&C.delayedLeave(),w._enterCb=void 0)};S?(S(w,E),S.length<=1&&E()):E()},leave(w,S){const T=String(e.key);if(w._enterCb&&w._enterCb(!0),g.isUnmounting)return S();b(n,[w]);let A=!1;const M=w._leaveCb=E=>{A||(A=!0,S(),E?b(u,[w]):b(a,[w]),w._leaveCb=void 0,v[T]===e&&delete v[T])};v[T]=e,o?(o(w,M),o.length<=1&&M()):M()},clone(w){return Rn(w,t,g,m)}};return C}function vn(e){if(Ti(e))return e=Vt(e),e.children=null,e}function Yr(e){return Ti(e)?e.children?e.children[0]:void 0:e}function Fn(e,t){e.shapeFlag&6&&e.component?Fn(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function So(e,t=!1){let g=[],m=0;for(let _=0;_<e.length;_++){const y=e[_];y.type===je?(y.patchFlag&128&&m++,g=g.concat(So(y.children,t))):(t||y.type!==Ve)&&g.push(y)}if(m>1)for(let _=0;_<g.length;_++)g[_].patchFlag=-2;return g}function Ge(e){return ge(e)?{setup:e,name:e.name}:e}const Wi=e=>!!e.type.__asyncLoader;function ye(e){ge(e)&&(e={loader:e});const{loader:t,loadingComponent:g,errorComponent:m,delay:_=200,timeout:y,suspensible:x=!0,onError:f}=e;let i=null,c,r=0;const n=()=>(r++,i=null,o()),o=()=>{let a;return i||(a=i=t().catch(u=>{if(u=u instanceof Error?u:new Error(String(u)),f)return new Promise((l,s)=>{f(u,()=>l(n()),()=>s(u),r+1)});throw u}).then(u=>a!==i&&i?i:(u&&(u.__esModule||u[Symbol.toStringTag]==="Module")&&(u=u.default),c=u,u)))};return Ge({name:"AsyncComponentWrapper",__asyncLoader:o,get __asyncResolved(){return c},setup(){const a=Ae;if(c)return()=>_n(c,a);const u=d=>{i=null,Oi(d,a,13,!m)};if(x&&a.suspense||yi)return o().then(d=>()=>_n(d,a)).catch(d=>(u(d),()=>m?Ee(m,{error:d}):null));const l=Te(!1),s=Te(),h=Te(!!_);return _&&setTimeout(()=>{h.value=!1},_),y!=null&&setTimeout(()=>{if(!l.value&&!s.value){const d=new Error(`Async component timed out after ${y}ms.`);u(d),s.value=d}},y),o().then(()=>{l.value=!0,a.parent&&Ti(a.parent.vnode)&&br(a.parent.update)}).catch(d=>{u(d),s.value=d}),()=>{if(l.value&&c)return _n(c,a);if(s.value&&m)return Ee(m,{error:s.value});if(g&&!h.value)return Ee(g)}}})}function _n(e,{vnode:{ref:t,props:g,children:m}}){const _=Ee(e,g,m);return _.ref=t,_}const Ti=e=>e.type.__isKeepAlive;function Bl(e,t){To(e,"a",t)}function Nl(e,t){To(e,"da",t)}function To(e,t,g=Ae){const m=e.__wdc||(e.__wdc=()=>{let _=g;for(;_;){if(_.isDeactivated)return;_=_.parent}return e()});if(an(t,m,g),g){let _=g.parent;for(;_&&_.parent;)Ti(_.parent.vnode)&&zl(m,t,g,_),_=_.parent}}function zl(e,t,g,m){const _=an(t,e,m,!0);dr(()=>{Ks(m[t],_)},g)}function an(e,t,g=Ae,m=!1){if(g){const _=g[e]||(g[e]=[]),y=t.__weh||(t.__weh=(...x)=>{if(g.isUnmounted)return;Jt(),Gt(g);const f=Ye(t,g,e,x);return kt(),Lt(),f});return m?_.unshift(y):_.push(y),y}}const lt=e=>(t,g=Ae)=>(!yi||e==="sp")&&an(e,t,g),Xl=lt("bm"),tt=lt("m"),Hl=lt("bu"),Wl=lt("u"),ln=lt("bum"),dr=lt("um"),Ul=lt("sp"),Yl=lt("rtg"),Vl=lt("rtc");function Gl(e,t=Ae){an("ec",e,t)}let In=!0;function $l(e){const t=Eo(e),g=e.proxy,m=e.ctx;In=!1,t.beforeCreate&&Vr(t.beforeCreate,e,"bc");const{data:_,computed:y,methods:x,watch:f,provide:i,inject:c,created:r,beforeMount:n,mounted:o,beforeUpdate:a,updated:u,activated:l,deactivated:s,beforeDestroy:h,beforeUnmount:d,destroyed:p,unmounted:v,render:b,renderTracked:C,renderTriggered:w,errorCaptured:S,serverPrefetch:T,expose:A,inheritAttrs:M,components:E,directives:D,filters:N}=t;if(c&&ql(c,m,null,e.appContext.config.unwrapInjectedRef),x)for(const Q in x){const re=x[Q];ge(re)&&(m[Q]=re.bind(g))}if(_){const Q=_.call(g,g);Pe(Q)&&(e.data=Si(Q))}if(In=!0,y)for(const Q in y){const re=y[Q],k=ge(re)?re.bind(g,g):ge(re.get)?re.get.bind(g,g):qe,z=!ge(re)&&ge(re.set)?re.set.bind(g):qe,W=xe({get:k,set:z});Object.defineProperty(m,Q,{enumerable:!0,configurable:!0,get:()=>W.value,set:G=>W.value=G})}if(f)for(const Q in f)Oo(f[Q],m,g,Q);if(i){const Q=ge(i)?i.call(g):i;Reflect.ownKeys(Q).forEach(re=>{Pt(re,Q[re])})}r&&Vr(r,e,"c");function U(Q,re){fe(re)?re.forEach(k=>Q(k.bind(g))):re&&Q(re.bind(g))}if(U(Xl,n),U(tt,o),U(Hl,a),U(Wl,u),U(Bl,l),U(Nl,s),U(Gl,S),U(Vl,C),U(Yl,w),U(ln,d),U(dr,v),U(Ul,T),fe(A))if(A.length){const Q=e.exposed||(e.exposed={});A.forEach(re=>{Object.defineProperty(Q,re,{get:()=>g[re],set:k=>g[re]=k})})}else e.exposed||(e.exposed={});b&&e.render===qe&&(e.render=b),M!=null&&(e.inheritAttrs=M),E&&(e.components=E),D&&(e.directives=D)}function ql(e,t,g=qe,m=!1){fe(e)&&(e=jn(e));for(const _ in e){const y=e[_];let x;Pe(y)?"default"in y?x=ke(y.from||_,y.default,!0):x=ke(y.from||_):x=ke(y),Me(x)&&m?Object.defineProperty(t,_,{enumerable:!0,configurable:!0,get:()=>x.value,set:f=>x.value=f}):t[_]=x}}function Vr(e,t,g){Ye(fe(e)?e.map(m=>m.bind(t.proxy)):e.bind(t.proxy),t,g)}function Oo(e,t,g,m){const _=m.includes(".")?$o(g,m):()=>g[m];if(Se(e)){const y=t[e];ge(y)&&ot(_,y)}else if(ge(e))ot(_,e.bind(g));else if(Pe(e))if(fe(e))e.forEach(y=>Oo(y,t,g,m));else{const y=ge(e.handler)?e.handler.bind(g):t[e.handler];ge(y)&&ot(_,y,e)}}function Eo(e){const t=e.type,{mixins:g,extends:m}=t,{mixins:_,optionsCache:y,config:{optionMergeStrategies:x}}=e.appContext,f=y.get(t);let i;return f?i=f:!_.length&&!g&&!m?i=t:(i={},_.length&&_.forEach(c=>Ui(i,c,x,!0)),Ui(i,t,x)),y.set(t,i),i}function Ui(e,t,g,m=!1){const{mixins:_,extends:y}=t;y&&Ui(e,y,g,!0),_&&_.forEach(x=>Ui(e,x,g,!0));for(const x in t)if(!(m&&x==="expose")){const f=Kl[x]||g&&g[x];e[x]=f?f(e[x],t[x]):t[x]}return e}const Kl={data:Gr,props:wt,emits:wt,methods:wt,computed:wt,beforeCreate:Re,created:Re,beforeMount:Re,mounted:Re,beforeUpdate:Re,updated:Re,beforeDestroy:Re,beforeUnmount:Re,destroyed:Re,unmounted:Re,activated:Re,deactivated:Re,errorCaptured:Re,serverPrefetch:Re,components:wt,directives:wt,watch:Zl,provide:Gr,inject:Jl};function Gr(e,t){return t?e?function(){return De(ge(e)?e.call(this,this):e,ge(t)?t.call(this,this):t)}:t:e}function Jl(e,t){return wt(jn(e),jn(t))}function jn(e){if(fe(e)){const t={};for(let g=0;g<e.length;g++)t[e[g]]=e[g];return t}return e}function Re(e,t){return e?[...new Set([].concat(e,t))]:t}function wt(e,t){return e?De(De(Object.create(null),e),t):t}function Zl(e,t){if(!e)return t;if(!t)return e;const g=De(Object.create(null),e);for(const m in t)g[m]=Re(e[m],t[m]);return g}function Ql(e,t,g,m=!1){const _={},y={};zi(y,cn,1),e.propsDefaults=Object.create(null),Po(e,t,_,y);for(const x in e.propsOptions[0])x in _||(_[x]=void 0);g?e.props=m?_:wl(_):e.type.props?e.props=_:e.props=y,e.attrs=y}function ec(e,t,g,m){const{props:_,attrs:y,vnode:{patchFlag:x}}=e,f=ve(_),[i]=e.propsOptions;let c=!1;if((m||x>0)&&!(x&16)){if(x&8){const r=e.vnode.dynamicProps;for(let n=0;n<r.length;n++){let o=r[n];const a=t[o];if(i)if(me(y,o))a!==y[o]&&(y[o]=a,c=!0);else{const u=et(o);_[u]=Bn(i,f,u,a,e,!1)}else a!==y[o]&&(y[o]=a,c=!0)}}}else{Po(e,t,_,y)&&(c=!0);let r;for(const n in f)(!t||!me(t,n)&&((r=Kt(n))===n||!me(t,r)))&&(i?g&&(g[n]!==void 0||g[r]!==void 0)&&(_[n]=Bn(i,f,n,void 0,e,!0)):delete _[n]);if(y!==f)for(const n in y)(!t||!me(t,n))&&(delete y[n],c=!0)}c&&at(e,"set","$attrs")}function Po(e,t,g,m){const[_,y]=e.propsOptions;let x=!1,f;if(t)for(let i in t){if(ci(i))continue;const c=t[i];let r;_&&me(_,r=et(i))?!y||!y.includes(r)?g[r]=c:(f||(f={}))[r]=c:fr(e.emitsOptions,i)||c!==m[i]&&(m[i]=c,x=!0)}if(y){const i=ve(g),c=f||we;for(let r=0;r<y.length;r++){const n=y[r];g[n]=Bn(_,i,n,c[n],e,!me(c,n))}}return x}function Bn(e,t,g,m,_,y){const x=e[g];if(x!=null){const f=me(x,"default");if(f&&m===void 0){const i=x.default;if(x.type!==Function&&ge(i)){const{propsDefaults:c}=_;g in c?m=c[g]:(Gt(_),m=c[g]=i.call(null,t),kt())}else m=i}x[0]&&(y&&!f?m=!1:x[1]&&(m===""||m===Kt(g))&&(m=!0))}return m}function Ao(e,t,g=!1){const m=t.propsCache,_=m.get(e);if(_)return _;const y=e.props,x={},f=[];let i=!1;if(!ge(e)){const r=n=>{i=!0;const[o,a]=Ao(n,t,!0);De(x,o),a&&f.push(...a)};!g&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!y&&!i)return m.set(e,Ht),Ht;if(fe(y))for(let r=0;r<y.length;r++){const n=et(y[r]);$r(n)&&(x[n]=we)}else if(y)for(const r in y){const n=et(r);if($r(n)){const o=y[r],a=x[n]=fe(o)||ge(o)?{type:o}:o;if(a){const u=Jr(Boolean,a.type),l=Jr(String,a.type);a[0]=u>-1,a[1]=l<0||u<l,(u>-1||me(a,"default"))&&f.push(n)}}}const c=[x,f];return m.set(e,c),c}function $r(e){return e[0]!=="$"}function qr(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Kr(e,t){return qr(e)===qr(t)}function Jr(e,t){return fe(t)?t.findIndex(g=>Kr(g,e)):ge(t)&&Kr(t,e)?0:-1}const ko=e=>e[0]==="_"||e==="$stable",gr=e=>fe(e)?e.map($e):[$e(e)],tc=(e,t,g)=>{const m=bo((..._)=>gr(t(..._)),g);return m._c=!1,m},Do=(e,t,g)=>{const m=e._ctx;for(const _ in e){if(ko(_))continue;const y=e[_];if(ge(y))t[_]=tc(_,y,m);else if(y!=null){const x=gr(y);t[_]=()=>x}}},Lo=(e,t)=>{const g=gr(t);e.slots.default=()=>g},ic=(e,t)=>{if(e.vnode.shapeFlag&32){const g=t._;g?(e.slots=ve(t),zi(t,"_",g)):Do(t,e.slots={})}else e.slots={},t&&Lo(e,t);zi(e.slots,cn,1)},nc=(e,t,g)=>{const{vnode:m,slots:_}=e;let y=!0,x=we;if(m.shapeFlag&32){const f=t._;f?g&&f===1?y=!1:(De(_,t),!g&&f===1&&delete _._):(y=!t.$stable,Do(t,_)),x=t}else t&&(Lo(e,t),x={default:1});if(y)for(const f in _)!ko(f)&&!(f in x)&&delete _[f]};function rc(e,t){const g=Xe;if(g===null)return e;const m=g.proxy,_=e.dirs||(e.dirs=[]);for(let y=0;y<t.length;y++){let[x,f,i,c=we]=t[y];ge(x)&&(x={mounted:x,updated:x}),x.deep&&Tt(f),_.push({dir:x,instance:m,value:f,oldValue:void 0,arg:i,modifiers:c})}return e}function Je(e,t,g,m){const _=e.dirs,y=t&&t.dirs;for(let x=0;x<_.length;x++){const f=_[x];y&&(f.oldValue=y[x].value);let i=f.dir[m];i&&(Jt(),Ye(i,g,8,[e.el,f,e,t]),Lt())}}function Mo(){return{app:null,config:{isNativeTag:Ba,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sc=0;function oc(e,t){return function(m,_=null){_!=null&&!Pe(_)&&(_=null);const y=Mo(),x=new Set;let f=!1;const i=y.app={_uid:sc++,_component:m,_props:_,_container:null,_context:y,_instance:null,version:jc,get config(){return y.config},set config(c){},use(c,...r){return x.has(c)||(c&&ge(c.install)?(x.add(c),c.install(i,...r)):ge(c)&&(x.add(c),c(i,...r))),i},mixin(c){return y.mixins.includes(c)||y.mixins.push(c),i},component(c,r){return r?(y.components[c]=r,i):y.components[c]},directive(c,r){return r?(y.directives[c]=r,i):y.directives[c]},mount(c,r,n){if(!f){const o=Ee(m,_);return o.appContext=y,r&&t?t(o,c):e(o,c,n),f=!0,i._container=c,c.__vue_app__=i,_r(o.component)||o.component.proxy}},unmount(){f&&(e(null,i._container),delete i._container.__vue_app__)},provide(c,r){return y.provides[c]=r,i}};return i}}let ht=!1;const Ri=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",yn=e=>e.nodeType===8;function ac(e){const{mt:t,p:g,o:{patchProp:m,nextSibling:_,parentNode:y,remove:x,insert:f,createComment:i}}=e,c=(s,h)=>{if(!h.hasChildNodes()){g(null,s,h),Ki();return}ht=!1,r(h.firstChild,s,null,null,null),Ki(),ht&&console.error("Hydration completed but contains mismatches.")},r=(s,h,d,p,v,b=!1)=>{const C=yn(s)&&s.data==="[",w=()=>u(s,h,d,p,v,C),{type:S,ref:T,shapeFlag:A}=h,M=s.nodeType;h.el=s;let E=null;switch(S){case _i:M!==3?E=w():(s.data!==h.children&&(ht=!0,s.data=h.children),E=_(s));break;case Ve:M!==8||C?E=w():E=_(s);break;case hi:if(M!==1)E=w();else{E=s;const D=!h.children.length;for(let N=0;N<h.staticCount;N++)D&&(h.children+=E.outerHTML),N===h.staticCount-1&&(h.anchor=E),E=_(E);return E}break;case je:C?E=a(s,h,d,p,v,b):E=w();break;default:if(A&1)M!==1||h.type.toLowerCase()!==s.tagName.toLowerCase()?E=w():E=n(s,h,d,p,v,b);else if(A&6){h.slotScopeIds=v;const D=y(s);if(t(h,D,null,d,p,Ri(D),b),E=C?l(s):_(s),Wi(h)){let N;C?(N=Ee(je),N.anchor=E?E.previousSibling:D.lastChild):N=s.nodeType===3?mr(""):Ee("div"),N.el=s,h.component.subTree=N}}else A&64?M!==8?E=w():E=h.type.hydrate(s,h,d,p,v,b,e,o):A&128&&(E=h.type.hydrate(s,h,d,p,Ri(y(s)),v,b,e,r))}return T!=null&&Yi(T,null,p,h),E},n=(s,h,d,p,v,b)=>{b=b||!!h.dynamicChildren;const{type:C,props:w,patchFlag:S,shapeFlag:T,dirs:A}=h,M=C==="input"&&A||C==="option";if(M||S!==-1){if(A&&Je(h,null,d,"created"),w)if(M||!b||S&48)for(const D in w)(M&&D.endsWith("value")||xi(D)&&!ci(D))&&m(s,D,null,w[D],!1,void 0,d);else w.onClick&&m(s,"onClick",null,w.onClick,!1,void 0,d);let E;if((E=w&&w.onVnodeBeforeMount)&&Ue(E,d,h),A&&Je(h,null,d,"beforeMount"),((E=w&&w.onVnodeMounted)||A)&&wo(()=>{E&&Ue(E,d,h),A&&Je(h,null,d,"mounted")},p),T&16&&!(w&&(w.innerHTML||w.textContent))){let D=o(s.firstChild,h,s,d,p,v,b);for(;D;){ht=!0;const N=D;D=D.nextSibling,x(N)}}else T&8&&s.textContent!==h.children&&(ht=!0,s.textContent=h.children)}return s.nextSibling},o=(s,h,d,p,v,b,C)=>{C=C||!!h.dynamicChildren;const w=h.children,S=w.length;for(let T=0;T<S;T++){const A=C?w[T]:w[T]=$e(w[T]);if(s)s=r(s,A,p,v,b,C);else{if(A.type===_i&&!A.children)continue;ht=!0,g(null,A,d,null,p,v,Ri(d),b)}}return s},a=(s,h,d,p,v,b)=>{const{slotScopeIds:C}=h;C&&(v=v?v.concat(C):C);const w=y(s),S=o(_(s),h,w,d,p,v,b);return S&&yn(S)&&S.data==="]"?_(h.anchor=S):(ht=!0,f(h.anchor=i("]"),w,S),S)},u=(s,h,d,p,v,b)=>{if(ht=!0,h.el=null,b){const S=l(s);for(;;){const T=_(s);if(T&&T!==S)x(T);else break}}const C=_(s),w=y(s);return x(s),g(null,h,w,C,d,p,Ri(w),v),C},l=s=>{let h=0;for(;s;)if(s=_(s),s&&yn(s)&&(s.data==="["&&h++,s.data==="]")){if(h===0)return _(s);h--}return s};return[c,r]}const Fe=wo;function lc(e){return cc(e,ac)}function cc(e,t){const g=Ua();g.__VUE__=!0;const{insert:m,remove:_,patchProp:y,createElement:x,createText:f,createComment:i,setText:c,setElementText:r,parentNode:n,nextSibling:o,setScopeId:a=qe,cloneNode:u,insertStaticContent:l}=e,s=(P,L,B,H=null,Y=null,Z=null,te=!1,ie=null,ne=!!L.dynamicChildren)=>{if(P===L)return;P&&!xt(P,L)&&(H=X(P),le(P,Y,Z,!0),P=null),L.patchFlag===-2&&(ne=!1,L.dynamicChildren=null);const{type:j,ref:J,shapeFlag:q}=L;switch(j){case _i:h(P,L,B,H);break;case Ve:d(P,L,B,H);break;case hi:P==null&&p(L,B,H,te);break;case je:D(P,L,B,H,Y,Z,te,ie,ne);break;default:q&1?C(P,L,B,H,Y,Z,te,ie,ne):q&6?N(P,L,B,H,Y,Z,te,ie,ne):(q&64||q&128)&&j.process(P,L,B,H,Y,Z,te,ie,ne,ee)}J!=null&&Y&&Yi(J,P&&P.ref,Z,L||P,!L)},h=(P,L,B,H)=>{if(P==null)m(L.el=f(L.children),B,H);else{const Y=L.el=P.el;L.children!==P.children&&c(Y,L.children)}},d=(P,L,B,H)=>{P==null?m(L.el=i(L.children||""),B,H):L.el=P.el},p=(P,L,B,H)=>{[P.el,P.anchor]=l(P.children,L,B,H)},v=({el:P,anchor:L},B,H)=>{let Y;for(;P&&P!==L;)Y=o(P),m(P,B,H),P=Y;m(L,B,H)},b=({el:P,anchor:L})=>{let B;for(;P&&P!==L;)B=o(P),_(P),P=B;_(L)},C=(P,L,B,H,Y,Z,te,ie,ne)=>{te=te||L.type==="svg",P==null?w(L,B,H,Y,Z,te,ie,ne):A(P,L,Y,Z,te,ie,ne)},w=(P,L,B,H,Y,Z,te,ie)=>{let ne,j;const{type:J,props:q,shapeFlag:oe,transition:ae,patchFlag:ue,dirs:ce}=P;if(P.el&&u!==void 0&&ue===-1)ne=P.el=u(P.el);else{if(ne=P.el=x(P.type,Z,q&&q.is,q),oe&8?r(ne,P.children):oe&16&&T(P.children,ne,null,H,Y,Z&&J!=="foreignObject",te,ie),ce&&Je(P,null,H,"created"),q){for(const pe in q)pe!=="value"&&!ci(pe)&&y(ne,pe,null,q[pe],Z,P.children,H,Y,I);"value"in q&&y(ne,"value",null,q.value),(j=q.onVnodeBeforeMount)&&Ue(j,H,P)}S(ne,P,P.scopeId,te,H)}ce&&Je(P,null,H,"beforeMount");const de=(!Y||Y&&!Y.pendingBranch)&&ae&&!ae.persisted;de&&ae.beforeEnter(ne),m(ne,L,B),((j=q&&q.onVnodeMounted)||de||ce)&&Fe(()=>{j&&Ue(j,H,P),de&&ae.enter(ne),ce&&Je(P,null,H,"mounted")},Y)},S=(P,L,B,H,Y)=>{if(B&&a(P,B),H)for(let Z=0;Z<H.length;Z++)a(P,H[Z]);if(Y){let Z=Y.subTree;if(L===Z){const te=Y.vnode;S(P,te,te.scopeId,te.slotScopeIds,Y.parent)}}},T=(P,L,B,H,Y,Z,te,ie,ne=0)=>{for(let j=ne;j<P.length;j++){const J=P[j]=ie?gt(P[j]):$e(P[j]);s(null,J,L,B,H,Y,Z,te,ie)}},A=(P,L,B,H,Y,Z,te)=>{const ie=L.el=P.el;let{patchFlag:ne,dynamicChildren:j,dirs:J}=L;ne|=P.patchFlag&16;const q=P.props||we,oe=L.props||we;let ae;(ae=oe.onVnodeBeforeUpdate)&&Ue(ae,B,L,P),J&&Je(L,P,B,"beforeUpdate");const ue=Y&&L.type!=="foreignObject";if(j?M(P.dynamicChildren,j,ie,B,H,ue,Z):te||k(P,L,ie,null,B,H,ue,Z,!1),ne>0){if(ne&16)E(ie,L,q,oe,B,H,Y);else if(ne&2&&q.class!==oe.class&&y(ie,"class",null,oe.class,Y),ne&4&&y(ie,"style",q.style,oe.style,Y),ne&8){const ce=L.dynamicProps;for(let de=0;de<ce.length;de++){const pe=ce[de],Ie=q[pe],it=oe[pe];(it!==Ie||pe==="value")&&y(ie,pe,Ie,it,Y,P.children,B,H,I)}}ne&1&&P.children!==L.children&&r(ie,L.children)}else!te&&j==null&&E(ie,L,q,oe,B,H,Y);((ae=oe.onVnodeUpdated)||J)&&Fe(()=>{ae&&Ue(ae,B,L,P),J&&Je(L,P,B,"updated")},H)},M=(P,L,B,H,Y,Z,te)=>{for(let ie=0;ie<L.length;ie++){const ne=P[ie],j=L[ie],J=ne.el&&(ne.type===je||!xt(ne,j)||ne.shapeFlag&70)?n(ne.el):B;s(ne,j,J,null,H,Y,Z,te,!0)}},E=(P,L,B,H,Y,Z,te)=>{if(B!==H){for(const ie in H){if(ci(ie))continue;const ne=H[ie],j=B[ie];ne!==j&&ie!=="value"&&y(P,ie,j,ne,te,L.children,Y,Z,I)}if(B!==we)for(const ie in B)!ci(ie)&&!(ie in H)&&y(P,ie,B[ie],null,te,L.children,Y,Z,I);"value"in H&&y(P,"value",B.value,H.value)}},D=(P,L,B,H,Y,Z,te,ie,ne)=>{const j=L.el=P?P.el:f(""),J=L.anchor=P?P.anchor:f("");let{patchFlag:q,dynamicChildren:oe,slotScopeIds:ae}=L;ae&&(ie=ie?ie.concat(ae):ae),P==null?(m(j,B,H),m(J,B,H),T(L.children,B,J,Y,Z,te,ie,ne)):q>0&&q&64&&oe&&P.dynamicChildren?(M(P.dynamicChildren,oe,B,Y,Z,te,ie),(L.key!=null||Y&&L===Y.subTree)&&Ro(P,L,!0)):k(P,L,B,J,Y,Z,te,ie,ne)},N=(P,L,B,H,Y,Z,te,ie,ne)=>{L.slotScopeIds=ie,P==null?L.shapeFlag&512?Y.ctx.activate(L,B,H,te,ne):K(L,B,H,Y,Z,te,ne):U(P,L,ne)},K=(P,L,B,H,Y,Z,te)=>{const ie=P.component=xc(P,H,Y);if(Ti(P)&&(ie.ctx.renderer=ee),Tc(ie),ie.asyncDep){if(Y&&Y.registerDep(ie,Q),!P.el){const ne=ie.subTree=Ee(Ve);d(null,ne,L,B)}return}Q(ie,P,L,B,Y,Z,te)},U=(P,L,B)=>{const H=L.component=P.component;if(Ml(P,L,B))if(H.asyncDep&&!H.asyncResolved){re(H,L,B);return}else H.next=L,Mc(H.update),H.update();else L.component=P.component,L.el=P.el,H.vnode=L},Q=(P,L,B,H,Y,Z,te)=>{const ie=()=>{if(P.isMounted){let{next:J,bu:q,u:oe,parent:ae,vnode:ue}=P,ce=J,de;ne.allowRecurse=!1,J?(J.el=ue.el,re(P,J,te)):J=ue,q&&Ii(q),(de=J.props&&J.props.onVnodeBeforeUpdate)&&Ue(de,ae,J,ue),ne.allowRecurse=!0;const pe=mn(P),Ie=P.subTree;P.subTree=pe,s(Ie,pe,n(Ie.el),X(Ie),P,Y,Z),J.el=pe.el,ce===null&&Rl(P,pe.el),oe&&Fe(oe,Y),(de=J.props&&J.props.onVnodeUpdated)&&Fe(()=>Ue(de,ae,J,ue),Y)}else{let J;const{el:q,props:oe}=L,{bm:ae,m:ue,parent:ce}=P,de=Wi(L);if(ne.allowRecurse=!1,ae&&Ii(ae),!de&&(J=oe&&oe.onVnodeBeforeMount)&&Ue(J,ce,L),ne.allowRecurse=!0,q&&se){const pe=()=>{P.subTree=mn(P),se(q,P.subTree,P,Y,null)};de?L.type.__asyncLoader().then(()=>!P.isUnmounted&&pe()):pe()}else{const pe=P.subTree=mn(P);s(null,pe,B,H,P,Y,Z),L.el=pe.el}if(ue&&Fe(ue,Y),!de&&(J=oe&&oe.onVnodeMounted)){const pe=L;Fe(()=>Ue(J,ce,pe),Y)}L.shapeFlag&256&&P.a&&Fe(P.a,Y),P.isMounted=!0,L=B=H=null}},ne=new nr(ie,()=>br(P.update),P.scope),j=P.update=ne.run.bind(ne);j.id=P.uid,ne.allowRecurse=j.allowRecurse=!0,j()},re=(P,L,B)=>{L.component=P;const H=P.vnode.props;P.vnode=L,P.next=null,ec(P,L.props,H,B),nc(P,L.children,B),Jt(),wr(void 0,P.update),Lt()},k=(P,L,B,H,Y,Z,te,ie,ne=!1)=>{const j=P&&P.children,J=P?P.shapeFlag:0,q=L.children,{patchFlag:oe,shapeFlag:ae}=L;if(oe>0){if(oe&128){W(j,q,B,H,Y,Z,te,ie,ne);return}else if(oe&256){z(j,q,B,H,Y,Z,te,ie,ne);return}}ae&8?(J&16&&I(j,Y,Z),q!==j&&r(B,q)):J&16?ae&16?W(j,q,B,H,Y,Z,te,ie,ne):I(j,Y,Z,!0):(J&8&&r(B,""),ae&16&&T(q,B,H,Y,Z,te,ie,ne))},z=(P,L,B,H,Y,Z,te,ie,ne)=>{P=P||Ht,L=L||Ht;const j=P.length,J=L.length,q=Math.min(j,J);let oe;for(oe=0;oe<q;oe++){const ae=L[oe]=ne?gt(L[oe]):$e(L[oe]);s(P[oe],ae,B,null,Y,Z,te,ie,ne)}j>J?I(P,Y,Z,!0,!1,q):T(L,B,H,Y,Z,te,ie,ne,q)},W=(P,L,B,H,Y,Z,te,ie,ne)=>{let j=0;const J=L.length;let q=P.length-1,oe=J-1;for(;j<=q&&j<=oe;){const ae=P[j],ue=L[j]=ne?gt(L[j]):$e(L[j]);if(xt(ae,ue))s(ae,ue,B,null,Y,Z,te,ie,ne);else break;j++}for(;j<=q&&j<=oe;){const ae=P[q],ue=L[oe]=ne?gt(L[oe]):$e(L[oe]);if(xt(ae,ue))s(ae,ue,B,null,Y,Z,te,ie,ne);else break;q--,oe--}if(j>q){if(j<=oe){const ae=oe+1,ue=ae<J?L[ae].el:H;for(;j<=oe;)s(null,L[j]=ne?gt(L[j]):$e(L[j]),B,ue,Y,Z,te,ie,ne),j++}}else if(j>oe)for(;j<=q;)le(P[j],Y,Z,!0),j++;else{const ae=j,ue=j,ce=new Map;for(j=ue;j<=oe;j++){const Be=L[j]=ne?gt(L[j]):$e(L[j]);Be.key!=null&&ce.set(Be.key,j)}let de,pe=0;const Ie=oe-ue+1;let it=!1,Rr=0;const ei=new Array(Ie);for(j=0;j<Ie;j++)ei[j]=0;for(j=ae;j<=q;j++){const Be=P[j];if(pe>=Ie){le(Be,Y,Z,!0);continue}let Ke;if(Be.key!=null)Ke=ce.get(Be.key);else for(de=ue;de<=oe;de++)if(ei[de-ue]===0&&xt(Be,L[de])){Ke=de;break}Ke===void 0?le(Be,Y,Z,!0):(ei[Ke-ue]=j+1,Ke>=Rr?Rr=Ke:it=!0,s(Be,L[Ke],B,null,Y,Z,te,ie,ne),pe++)}const Fr=it?hc(ei):Ht;for(de=Fr.length-1,j=Ie-1;j>=0;j--){const Be=ue+j,Ke=L[Be],Ir=Be+1<J?L[Be+1].el:H;ei[j]===0?s(null,Ke,B,Ir,Y,Z,te,ie,ne):it&&(de<0||j!==Fr[de]?G(Ke,B,Ir,2):de--)}}},G=(P,L,B,H,Y=null)=>{const{el:Z,type:te,transition:ie,children:ne,shapeFlag:j}=P;if(j&6){G(P.component.subTree,L,B,H);return}if(j&128){P.suspense.move(L,B,H);return}if(j&64){te.move(P,L,B,ee);return}if(te===je){m(Z,L,B);for(let q=0;q<ne.length;q++)G(ne[q],L,B,H);m(P.anchor,L,B);return}if(te===hi){v(P,L,B);return}if(H!==2&&j&1&&ie)if(H===0)ie.beforeEnter(Z),m(Z,L,B),Fe(()=>ie.enter(Z),Y);else{const{leave:q,delayLeave:oe,afterLeave:ae}=ie,ue=()=>m(Z,L,B),ce=()=>{q(Z,()=>{ue(),ae&&ae()})};oe?oe(Z,ue,ce):ce()}else m(Z,L,B)},le=(P,L,B,H=!1,Y=!1)=>{const{type:Z,props:te,ref:ie,children:ne,dynamicChildren:j,shapeFlag:J,patchFlag:q,dirs:oe}=P;if(ie!=null&&Yi(ie,null,B,P,!0),J&256){L.ctx.deactivate(P);return}const ae=J&1&&oe,ue=!Wi(P);let ce;if(ue&&(ce=te&&te.onVnodeBeforeUnmount)&&Ue(ce,L,P),J&6)R(P.component,B,H);else{if(J&128){P.suspense.unmount(B,H);return}ae&&Je(P,null,L,"beforeUnmount"),J&64?P.type.remove(P,L,B,Y,ee,H):j&&(Z!==je||q>0&&q&64)?I(j,L,B,!1,!0):(Z===je&&q&384||!Y&&J&16)&&I(ne,L,B),H&&F(P)}(ue&&(ce=te&&te.onVnodeUnmounted)||ae)&&Fe(()=>{ce&&Ue(ce,L,P),ae&&Je(P,null,L,"unmounted")},B)},F=P=>{const{type:L,el:B,anchor:H,transition:Y}=P;if(L===je){O(B,H);return}if(L===hi){b(P);return}const Z=()=>{_(B),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(P.shapeFlag&1&&Y&&!Y.persisted){const{leave:te,delayLeave:ie}=Y,ne=()=>te(B,Z);ie?ie(P.el,Z,ne):ne()}else Z()},O=(P,L)=>{let B;for(;P!==L;)B=o(P),_(P),P=B;_(L)},R=(P,L,B)=>{const{bum:H,scope:Y,update:Z,subTree:te,um:ie}=P;H&&Ii(H),Y.stop(),Z&&(Z.active=!1,le(te,P,L,B)),ie&&Fe(ie,L),Fe(()=>{P.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},I=(P,L,B,H=!1,Y=!1,Z=0)=>{for(let te=Z;te<P.length;te++)le(P[te],L,B,H,Y)},X=P=>P.shapeFlag&6?X(P.component.subTree):P.shapeFlag&128?P.suspense.next():o(P.anchor||P.el),V=(P,L,B)=>{P==null?L._vnode&&le(L._vnode,null,null,!0):s(L._vnode||null,P,L,null,null,null,B),Ki(),L._vnode=P},ee={p:s,um:le,m:G,r:F,mt:K,mc:T,pc:k,pbc:M,n:X,o:e};let $,se;return t&&([$,se]=t(ee)),{render:V,hydrate:$,createApp:oc(V,$)}}function Yi(e,t,g,m,_=!1){if(fe(e)){e.forEach((o,a)=>Yi(o,t&&(fe(t)?t[a]:t),g,m,_));return}if(Wi(m)&&!_)return;const y=m.shapeFlag&4?_r(m.component)||m.component.proxy:m.el,x=_?null:y,{i:f,r:i}=e,c=t&&t.r,r=f.refs===we?f.refs={}:f.refs,n=f.setupState;if(c!=null&&c!==i&&(Se(c)?(r[c]=null,me(n,c)&&(n[c]=null)):Me(c)&&(c.value=null)),Se(i)){const o=()=>{r[i]=x,me(n,i)&&(n[i]=x)};x?(o.id=-1,Fe(o,g)):o()}else if(Me(i)){const o=()=>{i.value=x};x?(o.id=-1,Fe(o,g)):o()}else ge(i)&&vt(i,f,12,[x,r])}function Ue(e,t,g,m=null){Ye(e,t,7,[g,m])}function Ro(e,t,g=!1){const m=e.children,_=t.children;if(fe(m)&&fe(_))for(let y=0;y<m.length;y++){const x=m[y];let f=_[y];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=_[y]=gt(_[y]),f.el=x.el),g||Ro(x,f))}}function hc(e){const t=e.slice(),g=[0];let m,_,y,x,f;const i=e.length;for(m=0;m<i;m++){const c=e[m];if(c!==0){if(_=g[g.length-1],e[_]<c){t[m]=_,g.push(m);continue}for(y=0,x=g.length-1;y<x;)f=y+x>>1,e[g[f]]<c?y=f+1:x=f;c<e[g[y]]&&(y>0&&(t[m]=g[y-1]),g[y]=m)}}for(y=g.length,x=g[y-1];y-- >0;)g[y]=x,x=t[x];return g}const uc=e=>e.__isTeleport,Fo="components";function fc(e,t){return gc(Fo,e,!0,t)||e}const dc=Symbol();function gc(e,t,g=!0,m=!1){const _=Xe||Ae;if(_){const y=_.type;if(e===Fo){const f=Ac(y);if(f&&(f===t||f===et(t)||f===rn(et(t))))return y}const x=Zr(_[e]||y[e],t)||Zr(_.appContext[e],t);return!x&&m?y:x}}function Zr(e,t){return e&&(e[t]||e[et(t)]||e[rn(et(t))])}const je=Symbol(void 0),_i=Symbol(void 0),Ve=Symbol(void 0),hi=Symbol(void 0),ui=[];let At=null;function Qe(e=!1){ui.push(At=e?null:[])}function pc(){ui.pop(),At=ui[ui.length-1]||null}let Vi=1;function Qr(e){Vi+=e}function Io(e){return e.dynamicChildren=Vi>0?At||Ht:null,pc(),Vi>0&&At&&At.push(e),e}function St(e,t,g,m,_,y){return Io(Ne(e,t,g,m,_,y,!0))}function pr(e,t,g,m,_){return Io(Ee(e,t,g,m,_,!0))}function Gi(e){return e?e.__v_isVNode===!0:!1}function xt(e,t){return e.type===t.type&&e.key===t.key}const cn="__vInternal",jo=({key:e})=>e!=null?e:null,ji=({ref:e})=>e!=null?Se(e)||Me(e)||ge(e)?{i:Xe,r:e}:e:null;function Ne(e,t=null,g=null,m=0,_=null,y=e===je?0:1,x=!1,f=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&jo(t),ref:t&&ji(t),scopeId:on,slotScopeIds:null,children:g,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:m,dynamicProps:_,dynamicChildren:null,appContext:null};return f?(vr(i,g),y&128&&e.normalize(i)):g&&(i.shapeFlag|=Se(g)?8:16),Vi>0&&!x&&At&&(i.patchFlag>0||y&6)&&i.patchFlag!==32&&At.push(i),i}const Ee=mc;function mc(e,t=null,g=null,m=0,_=null,y=!1){if((!e||e===dc)&&(e=Ve),Gi(e)){const f=Vt(e,t,!0);return g&&vr(f,g),f}if(kc(e)&&(e=e.__vccOpts),t){t=vc(t);let{class:f,style:i}=t;f&&!Se(f)&&(t.class=Ci(f)),Pe(i)&&(uo(i)&&!fe(i)&&(i=De({},i)),t.style=en(i))}const x=Se(e)?1:Fl(e)?128:uc(e)?64:Pe(e)?4:ge(e)?2:0;return Ne(e,t,g,m,_,x,y,!0)}function vc(e){return e?uo(e)||cn in e?De({},e):e:null}function Vt(e,t,g=!1){const{props:m,ref:_,patchFlag:y,children:x}=e,f=t?yc(m||{},t):m;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&jo(f),ref:t&&t.ref?g&&_?fe(_)?_.concat(ji(t)):[_,ji(t)]:ji(t):_,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:x,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==je?y===-1?16:y|16:y,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vt(e.ssContent),ssFallback:e.ssFallback&&Vt(e.ssFallback),el:e.el,anchor:e.anchor}}function mr(e=" ",t=0){return Ee(_i,null,e,t)}function Fm(e,t){const g=Ee(hi,null,e);return g.staticCount=t,g}function _c(e="",t=!1){return t?(Qe(),pr(Ve,null,e)):Ee(Ve,null,e)}function $e(e){return e==null||typeof e=="boolean"?Ee(Ve):fe(e)?Ee(je,null,e.slice()):typeof e=="object"?gt(e):Ee(_i,null,String(e))}function gt(e){return e.el===null||e.memo?e:Vt(e)}function vr(e,t){let g=0;const{shapeFlag:m}=e;if(t==null)t=null;else if(fe(t))g=16;else if(typeof t=="object")if(m&65){const _=t.default;_&&(_._c&&(_._d=!1),vr(e,_()),_._c&&(_._d=!0));return}else{g=32;const _=t._;!_&&!(cn in t)?t._ctx=Xe:_===3&&Xe&&(Xe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ge(t)?(t={default:t,_ctx:Xe},g=32):(t=String(t),m&64?(g=16,t=[mr(t)]):g=8);e.children=t,e.shapeFlag|=g}function yc(...e){const t={};for(let g=0;g<e.length;g++){const m=e[g];for(const _ in m)if(_==="class")t.class!==m.class&&(t.class=Ci([t.class,m.class]));else if(_==="style")t.style=en([t.style,m.style]);else if(xi(_)){const y=t[_],x=m[_];y!==x&&!(fe(y)&&y.includes(x))&&(t[_]=y?[].concat(y,x):x)}else _!==""&&(t[_]=m[_])}return t}function Im(e,t,g,m){let _;const y=g&&g[m];if(fe(e)||Se(e)){_=new Array(e.length);for(let x=0,f=e.length;x<f;x++)_[x]=t(e[x],x,void 0,y&&y[x])}else if(typeof e=="number"){_=new Array(e);for(let x=0;x<e;x++)_[x]=t(x+1,x,void 0,y&&y[x])}else if(Pe(e))if(e[Symbol.iterator])_=Array.from(e,(x,f)=>t(x,f,void 0,y&&y[f]));else{const x=Object.keys(e);_=new Array(x.length);for(let f=0,i=x.length;f<i;f++){const c=x[f];_[f]=t(e[c],c,f,y&&y[f])}}else _=[];return g&&(g[m]=_),_}function Bo(e,t,g={},m,_){if(Xe.isCE)return Ee("slot",t==="default"?null:{name:t},m&&m());let y=e[t];y&&y._c&&(y._d=!1),Qe();const x=y&&No(y(g)),f=pr(je,{key:g.key||`_${t}`},x||(m?m():[]),x&&e._===1?64:-2);return!_&&f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),y&&y._c&&(y._d=!0),f}function No(e){return e.some(t=>Gi(t)?!(t.type===Ve||t.type===je&&!No(t.children)):!0)?e:null}const Nn=e=>e?zo(e)?_r(e)||e.proxy:Nn(e.parent):null,$i=De(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Nn(e.parent),$root:e=>Nn(e.root),$emit:e=>e.emit,$options:e=>Eo(e),$forceUpdate:e=>()=>br(e.update),$nextTick:e=>Wo.bind(e.proxy),$watch:e=>Ic.bind(e)}),bc={get({_:e},t){const{ctx:g,setupState:m,data:_,props:y,accessCache:x,type:f,appContext:i}=e;let c;if(t[0]!=="$"){const a=x[t];if(a!==void 0)switch(a){case 1:return m[t];case 2:return _[t];case 4:return g[t];case 3:return y[t]}else{if(m!==we&&me(m,t))return x[t]=1,m[t];if(_!==we&&me(_,t))return x[t]=2,_[t];if((c=e.propsOptions[0])&&me(c,t))return x[t]=3,y[t];if(g!==we&&me(g,t))return x[t]=4,g[t];In&&(x[t]=0)}}const r=$i[t];let n,o;if(r)return t==="$attrs"&&He(e,"get",t),r(e);if((n=f.__cssModules)&&(n=n[t]))return n;if(g!==we&&me(g,t))return x[t]=4,g[t];if(o=i.config.globalProperties,me(o,t))return o[t]},set({_:e},t,g){const{data:m,setupState:_,ctx:y}=e;if(_!==we&&me(_,t))_[t]=g;else if(m!==we&&me(m,t))m[t]=g;else if(me(e.props,t))return!1;return t[0]==="$"&&t.slice(1)in e?!1:(y[t]=g,!0)},has({_:{data:e,setupState:t,accessCache:g,ctx:m,appContext:_,propsOptions:y}},x){let f;return!!g[x]||e!==we&&me(e,x)||t!==we&&me(t,x)||(f=y[0])&&me(f,x)||me(m,x)||me($i,x)||me(_.config.globalProperties,x)}},wc=Mo();let Cc=0;function xc(e,t,g){const m=e.type,_=(t?t.appContext:e.appContext)||wc,y={uid:Cc++,vnode:e,type:m,parent:t,appContext:_,root:null,next:null,subTree:null,update:null,scope:new Ya(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(_.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ao(m,_),emitsOptions:yo(m,_),emit:null,emitted:null,propsDefaults:we,inheritAttrs:m.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,suspense:g,suspenseId:g?g.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=t?t.root:y,y.emit=Pl.bind(null,y),e.ce&&e.ce(y),y}let Ae=null;const Sc=()=>Ae||Xe,Gt=e=>{Ae=e,e.scope.on()},kt=()=>{Ae&&Ae.scope.off(),Ae=null};function zo(e){return e.vnode.shapeFlag&4}let yi=!1;function Tc(e,t=!1){yi=t;const{props:g,children:m}=e.vnode,_=zo(e);Ql(e,g,_,t),ic(e,m);const y=_?Oc(e,t):void 0;return yi=!1,y}function Oc(e,t){const g=e.type;e.accessCache=Object.create(null),e.proxy=fo(new Proxy(e.ctx,bc));const{setup:m}=g;if(m){const _=e.setupContext=m.length>1?Pc(e):null;Gt(e),Jt();const y=vt(m,e,0,[e.props,_]);if(Lt(),kt(),Zs(y)){if(y.then(kt,kt),t)return y.then(x=>{es(e,x,t)}).catch(x=>{Oi(x,e,0)});e.asyncDep=y}else es(e,y,t)}else Xo(e,t)}function es(e,t,g){ge(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pe(t)&&(e.setupState=_o(t)),Xo(e,g)}let ts;function Xo(e,t,g){const m=e.type;if(!e.render){if(!t&&ts&&!m.render){const _=m.template;if(_){const{isCustomElement:y,compilerOptions:x}=e.appContext.config,{delimiters:f,compilerOptions:i}=m,c=De(De({isCustomElement:y,delimiters:f},x),i);m.render=ts(_,c)}}e.render=m.render||qe}Gt(e),Jt(),$l(e),Lt(),kt()}function Ec(e){return new Proxy(e.attrs,{get(t,g){return He(e,"get","$attrs"),t[g]}})}function Pc(e){const t=m=>{e.exposed=m||{}};let g;return{get attrs(){return g||(g=Ec(e))},slots:e.slots,emit:e.emit,expose:t}}function _r(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(_o(fo(e.exposed)),{get(t,g){if(g in t)return t[g];if(g in $i)return $i[g](e)}}))}function Ac(e){return ge(e)&&e.displayName||e.name}function kc(e){return ge(e)&&"__vccOpts"in e}function vt(e,t,g,m){let _;try{_=m?e(...m):e()}catch(y){Oi(y,t,g)}return _}function Ye(e,t,g,m){if(ge(e)){const y=vt(e,t,g,m);return y&&Zs(y)&&y.catch(x=>{Oi(x,t,g)}),y}const _=[];for(let y=0;y<e.length;y++)_.push(Ye(e[y],t,g,m));return _}function Oi(e,t,g,m=!0){const _=t?t.vnode:null;if(t){let y=t.parent;const x=t.proxy,f=g;for(;y;){const c=y.ec;if(c){for(let r=0;r<c.length;r++)if(c[r](e,x,f)===!1)return}y=y.parent}const i=t.appContext.config.errorHandler;if(i){vt(i,null,10,[e,x,f]);return}}Dc(e,g,_,m)}function Dc(e,t,g,m=!0){console.error(e)}let qi=!1,zn=!1;const ze=[];let rt=0;const fi=[];let li=null,jt=0;const di=[];let dt=null,Bt=0;const Ho=Promise.resolve();let yr=null,Xn=null;function Wo(e){const t=yr||Ho;return e?t.then(this?e.bind(this):e):t}function Lc(e){let t=rt+1,g=ze.length;for(;t<g;){const m=t+g>>>1;bi(ze[m])<e?t=m+1:g=m}return t}function br(e){(!ze.length||!ze.includes(e,qi&&e.allowRecurse?rt+1:rt))&&e!==Xn&&(e.id==null?ze.push(e):ze.splice(Lc(e.id),0,e),Uo())}function Uo(){!qi&&!zn&&(zn=!0,yr=Ho.then(Vo))}function Mc(e){const t=ze.indexOf(e);t>rt&&ze.splice(t,1)}function Yo(e,t,g,m){fe(e)?g.push(...e):(!t||!t.includes(e,e.allowRecurse?m+1:m))&&g.push(e),Uo()}function Rc(e){Yo(e,li,fi,jt)}function Fc(e){Yo(e,dt,di,Bt)}function wr(e,t=null){if(fi.length){for(Xn=t,li=[...new Set(fi)],fi.length=0,jt=0;jt<li.length;jt++)li[jt]();li=null,jt=0,Xn=null,wr(e,t)}}function Ki(e){if(di.length){const t=[...new Set(di)];if(di.length=0,dt){dt.push(...t);return}for(dt=t,dt.sort((g,m)=>bi(g)-bi(m)),Bt=0;Bt<dt.length;Bt++)dt[Bt]();dt=null,Bt=0}}const bi=e=>e.id==null?1/0:e.id;function Vo(e){zn=!1,qi=!0,wr(e),ze.sort((g,m)=>bi(g)-bi(m));const t=qe;try{for(rt=0;rt<ze.length;rt++){const g=ze[rt];g&&g.active!==!1&&vt(g,null,14)}}finally{rt=0,ze.length=0,Ki(),qi=!1,yr=null,(ze.length||fi.length||di.length)&&Vo(e)}}const is={};function ot(e,t,g){return Go(e,t,g)}function Go(e,t,{immediate:g,deep:m,flush:_,onTrack:y,onTrigger:x}=we){const f=Ae;let i,c=!1,r=!1;if(Me(e)?(i=()=>e.value,c=!!e._shallow):Ut(e)?(i=()=>e,m=!0):fe(e)?(r=!0,c=e.some(Ut),i=()=>e.map(h=>{if(Me(h))return h.value;if(Ut(h))return Tt(h);if(ge(h))return vt(h,f,2)})):ge(e)?t?i=()=>vt(e,f,2):i=()=>{if(!(f&&f.isUnmounted))return n&&n(),Ye(e,f,3,[o])}:i=qe,t&&m){const h=i;i=()=>Tt(h())}let n,o=h=>{n=s.onStop=()=>{vt(h,f,4)}};if(yi)return o=qe,t?g&&Ye(t,f,3,[i(),r?[]:void 0,o]):i(),qe;let a=r?[]:is;const u=()=>{if(!!s.active)if(t){const h=s.run();(m||c||(r?h.some((d,p)=>mi(d,a[p])):mi(h,a)))&&(n&&n(),Ye(t,f,3,[h,a===is?void 0:a,o]),a=h)}else s.run()};u.allowRecurse=!!t;let l;_==="sync"?l=u:_==="post"?l=()=>Fe(u,f&&f.suspense):l=()=>{!f||f.isMounted?Rc(u):u()};const s=new nr(i,l);return t?g?u():a=s.run():_==="post"?Fe(s.run.bind(s),f&&f.suspense):s.run(),()=>{s.stop(),f&&f.scope&&Ks(f.scope.effects,s)}}function Ic(e,t,g){const m=this.proxy,_=Se(e)?e.includes(".")?$o(m,e):()=>m[e]:e.bind(m,m);let y;ge(t)?y=t:(y=t.handler,g=t);const x=Ae;Gt(this);const f=Go(_,y.bind(m),g);return x?Gt(x):kt(),f}function $o(e,t){const g=t.split(".");return()=>{let m=e;for(let _=0;_<g.length&&m;_++)m=m[g[_]];return m}}function Tt(e,t){if(!Pe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Me(e))Tt(e.value,t);else if(fe(e))for(let g=0;g<e.length;g++)Tt(e[g],t);else if(Js(e)||Wt(e))e.forEach(g=>{Tt(g,t)});else if(eo(e))for(const g in e)Tt(e[g],t);return e}function _e(e,t,g){const m=arguments.length;return m===2?Pe(t)&&!fe(t)?Gi(t)?Ee(e,null,[t]):Ee(e,t):Ee(e,null,t):(m>3?g=Array.prototype.slice.call(arguments,2):m===3&&Gi(g)&&(g=[g]),Ee(e,t,g))}const jc="3.2.23",Bc="http://www.w3.org/2000/svg",Mt=typeof document!="undefined"?document:null,ns=new Map,Nc={insert:(e,t,g)=>{t.insertBefore(e,g||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,g,m)=>{const _=t?Mt.createElementNS(Bc,e):Mt.createElement(e,g?{is:g}:void 0);return e==="select"&&m&&m.multiple!=null&&_.setAttribute("multiple",m.multiple),_},createText:e=>Mt.createTextNode(e),createComment:e=>Mt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Mt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,g,m){const _=g?g.previousSibling:t.lastChild;let y=ns.get(e);if(!y){const x=Mt.createElement("template");if(x.innerHTML=m?`<svg>${e}</svg>`:e,y=x.content,m){const f=y.firstChild;for(;f.firstChild;)y.appendChild(f.firstChild);y.removeChild(f)}ns.set(e,y)}return t.insertBefore(y.cloneNode(!0),g),[_?_.nextSibling:t.firstChild,g?g.previousSibling:t.lastChild]}};function zc(e,t,g){const m=e._vtc;m&&(t=(t?[t,...m]:[...m]).join(" ")),t==null?e.removeAttribute("class"):g?e.setAttribute("class",t):e.className=t}function Xc(e,t,g){const m=e.style,_=Se(g);if(g&&!_){for(const y in g)Hn(m,y,g[y]);if(t&&!Se(t))for(const y in t)g[y]==null&&Hn(m,y,"")}else{const y=m.display;_?t!==g&&(m.cssText=g):t&&e.removeAttribute("style"),"_vod"in e&&(m.display=y)}}const rs=/\s*!important$/;function Hn(e,t,g){if(fe(g))g.forEach(m=>Hn(e,t,m));else if(t.startsWith("--"))e.setProperty(t,g);else{const m=Hc(e,t);rs.test(g)?e.setProperty(Kt(m),g.replace(rs,""),"important"):e[m]=g}}const ss=["Webkit","Moz","ms"],bn={};function Hc(e,t){const g=bn[t];if(g)return g;let m=et(t);if(m!=="filter"&&m in e)return bn[t]=m;m=rn(m);for(let _=0;_<ss.length;_++){const y=ss[_]+m;if(y in e)return bn[t]=y}return t}const os="http://www.w3.org/1999/xlink";function Wc(e,t,g,m,_){if(m&&t.startsWith("xlink:"))g==null?e.removeAttributeNS(os,t.slice(6,t.length)):e.setAttributeNS(os,t,g);else{const y=Ra(t);g==null||y&&!$s(g)?e.removeAttribute(t):e.setAttribute(t,y?"":g)}}function Uc(e,t,g,m,_,y,x){if(t==="innerHTML"||t==="textContent"){m&&x(m,_,y),e[t]=g==null?"":g;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=g;const f=g==null?"":g;(e.value!==f||e.tagName==="OPTION")&&(e.value=f),g==null&&e.removeAttribute(t);return}if(g===""||g==null){const f=typeof e[t];if(f==="boolean"){e[t]=$s(g);return}else if(g==null&&f==="string"){e[t]="",e.removeAttribute(t);return}else if(f==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=g}catch{}}let Ji=Date.now,qo=!1;if(typeof window!="undefined"){Ji()>document.createEvent("Event").timeStamp&&(Ji=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);qo=!!(e&&Number(e[1])<=53)}let Wn=0;const Yc=Promise.resolve(),Vc=()=>{Wn=0},Gc=()=>Wn||(Yc.then(Vc),Wn=Ji());function Nt(e,t,g,m){e.addEventListener(t,g,m)}function $c(e,t,g,m){e.removeEventListener(t,g,m)}function qc(e,t,g,m,_=null){const y=e._vei||(e._vei={}),x=y[t];if(m&&x)x.value=m;else{const[f,i]=Kc(t);if(m){const c=y[t]=Jc(m,_);Nt(e,f,c,i)}else x&&($c(e,f,x,i),y[t]=void 0)}}const as=/(?:Once|Passive|Capture)$/;function Kc(e){let t;if(as.test(e)){t={};let g;for(;g=e.match(as);)e=e.slice(0,e.length-g[0].length),t[g[0].toLowerCase()]=!0}return[Kt(e.slice(2)),t]}function Jc(e,t){const g=m=>{const _=m.timeStamp||Ji();(qo||_>=g.attached-1)&&Ye(Zc(m,g.value),t,5,[m])};return g.value=e,g.attached=Gc(),g}function Zc(e,t){if(fe(t)){const g=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{g.call(e),e._stopped=!0},t.map(m=>_=>!_._stopped&&m(_))}else return t}const ls=/^on[a-z]/,Qc=(e,t,g,m,_=!1,y,x,f,i)=>{t==="class"?zc(e,m,_):t==="style"?Xc(e,g,m):xi(t)?Qn(t)||qc(e,t,g,m,x):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):eh(e,t,m,_))?Uc(e,t,m,y,x,f,i):(t==="true-value"?e._trueValue=m:t==="false-value"&&(e._falseValue=m),Wc(e,t,m,_))};function eh(e,t,g,m){return m?!!(t==="innerHTML"||t==="textContent"||t in e&&ls.test(t)&&ge(g)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||ls.test(t)&&Se(g)?!1:t in e}const ut="transition",ii="animation",Cr=(e,{slots:t})=>_e(Co,th(e),t);Cr.displayName="Transition";const Ko={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Cr.props=De({},Co.props,Ko);const yt=(e,t=[])=>{fe(e)?e.forEach(g=>g(...t)):e&&e(...t)},cs=e=>e?fe(e)?e.some(t=>t.length>1):e.length>1:!1;function th(e){const t={};for(const E in e)E in Ko||(t[E]=e[E]);if(e.css===!1)return t;const{name:g="v",type:m,duration:_,enterFromClass:y=`${g}-enter-from`,enterActiveClass:x=`${g}-enter-active`,enterToClass:f=`${g}-enter-to`,appearFromClass:i=y,appearActiveClass:c=x,appearToClass:r=f,leaveFromClass:n=`${g}-leave-from`,leaveActiveClass:o=`${g}-leave-active`,leaveToClass:a=`${g}-leave-to`}=e,u=ih(_),l=u&&u[0],s=u&&u[1],{onBeforeEnter:h,onEnter:d,onEnterCancelled:p,onLeave:v,onLeaveCancelled:b,onBeforeAppear:C=h,onAppear:w=d,onAppearCancelled:S=p}=t,T=(E,D,N)=>{Rt(E,D?r:f),Rt(E,D?c:x),N&&N()},A=(E,D)=>{Rt(E,a),Rt(E,o),D&&D()},M=E=>(D,N)=>{const K=E?w:d,U=()=>T(D,E,N);yt(K,[D,U]),hs(()=>{Rt(D,E?i:y),ft(D,E?r:f),cs(K)||us(D,m,l,U)})};return De(t,{onBeforeEnter(E){yt(h,[E]),ft(E,y),ft(E,x)},onBeforeAppear(E){yt(C,[E]),ft(E,i),ft(E,c)},onEnter:M(!1),onAppear:M(!0),onLeave(E,D){const N=()=>A(E,D);ft(E,n),sh(),ft(E,o),hs(()=>{Rt(E,n),ft(E,a),cs(v)||us(E,m,s,N)}),yt(v,[E,N])},onEnterCancelled(E){T(E,!1),yt(p,[E])},onAppearCancelled(E){T(E,!0),yt(S,[E])},onLeaveCancelled(E){A(E),yt(b,[E])}})}function ih(e){if(e==null)return null;if(Pe(e))return[wn(e.enter),wn(e.leave)];{const t=wn(e);return[t,t]}}function wn(e){return Xi(e)}function ft(e,t){t.split(/\s+/).forEach(g=>g&&e.classList.add(g)),(e._vtc||(e._vtc=new Set)).add(t)}function Rt(e,t){t.split(/\s+/).forEach(m=>m&&e.classList.remove(m));const{_vtc:g}=e;g&&(g.delete(t),g.size||(e._vtc=void 0))}function hs(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let nh=0;function us(e,t,g,m){const _=e._endId=++nh,y=()=>{_===e._endId&&m()};if(g)return setTimeout(y,g);const{type:x,timeout:f,propCount:i}=rh(e,t);if(!x)return m();const c=x+"end";let r=0;const n=()=>{e.removeEventListener(c,o),y()},o=a=>{a.target===e&&++r>=i&&n()};setTimeout(()=>{r<i&&n()},f+1),e.addEventListener(c,o)}function rh(e,t){const g=window.getComputedStyle(e),m=u=>(g[u]||"").split(", "),_=m(ut+"Delay"),y=m(ut+"Duration"),x=fs(_,y),f=m(ii+"Delay"),i=m(ii+"Duration"),c=fs(f,i);let r=null,n=0,o=0;t===ut?x>0&&(r=ut,n=x,o=y.length):t===ii?c>0&&(r=ii,n=c,o=i.length):(n=Math.max(x,c),r=n>0?x>c?ut:ii:null,o=r?r===ut?y.length:i.length:0);const a=r===ut&&/\b(transform|all)(,|$)/.test(g[ut+"Property"]);return{type:r,timeout:n,propCount:o,hasTransform:a}}function fs(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((g,m)=>ds(g)+ds(e[m])))}function ds(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function sh(){return document.body.offsetHeight}const gs=e=>{const t=e.props["onUpdate:modelValue"];return fe(t)?g=>Ii(t,g):t};function oh(e){e.target.composing=!0}function ps(e){const t=e.target;t.composing&&(t.composing=!1,ah(t,"input"))}function ah(e,t){const g=document.createEvent("HTMLEvents");g.initEvent(t,!0,!0),e.dispatchEvent(g)}const lh={created(e,{modifiers:{lazy:t,trim:g,number:m}},_){e._assign=gs(_);const y=m||_.props&&_.props.type==="number";Nt(e,t?"change":"input",x=>{if(x.target.composing)return;let f=e.value;g?f=f.trim():y&&(f=Xi(f)),e._assign(f)}),g&&Nt(e,"change",()=>{e.value=e.value.trim()}),t||(Nt(e,"compositionstart",oh),Nt(e,"compositionend",ps),Nt(e,"change",ps))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:g,trim:m,number:_}},y){if(e._assign=gs(y),e.composing||document.activeElement===e&&(g||m&&e.value.trim()===t||(_||e.type==="number")&&Xi(e.value)===t))return;const x=t==null?"":t;e.value!==x&&(e.value=x)}},jm={beforeMount(e,{value:t},{transition:g}){e._vod=e.style.display==="none"?"":e.style.display,g&&t?g.beforeEnter(e):ni(e,t)},mounted(e,{value:t},{transition:g}){g&&t&&g.enter(e)},updated(e,{value:t,oldValue:g},{transition:m}){!t!=!g&&(m?t?(m.beforeEnter(e),ni(e,!0),m.enter(e)):m.leave(e,()=>{ni(e,!1)}):ni(e,t))},beforeUnmount(e,{value:t}){ni(e,t)}};function ni(e,t){e.style.display=t?e._vod:"none"}const ch=De({patchProp:Qc},Nc);let Cn,ms=!1;function hh(){return Cn=ms?Cn:lc(ch),ms=!0,Cn}const uh=(...e)=>{const t=hh().createApp(...e),{mount:g}=t;return t.mount=m=>{const _=fh(m);if(_)return g(_,!0,_ instanceof SVGElement)},t};function fh(e){return Se(e)?document.querySelector(e):e}/*!
  * vue-router v4.0.12
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */const Jo=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Zt=e=>Jo?Symbol(e):"_vr_"+e,dh=Zt("rvlm"),vs=Zt("rvd"),hn=Zt("r"),xr=Zt("rl"),Un=Zt("rvl"),zt=typeof window!="undefined";function gh(e){return e.__esModule||Jo&&e[Symbol.toStringTag]==="Module"}const be=Object.assign;function xn(e,t){const g={};for(const m in t){const _=t[m];g[m]=Array.isArray(_)?_.map(e):e(_)}return g}const gi=()=>{},ph=/\/$/,mh=e=>e.replace(ph,"");function Sn(e,t,g="/"){let m,_={},y="",x="";const f=t.indexOf("?"),i=t.indexOf("#",f>-1?f:0);return f>-1&&(m=t.slice(0,f),y=t.slice(f+1,i>-1?i:t.length),_=e(y)),i>-1&&(m=m||t.slice(0,i),x=t.slice(i,t.length)),m=bh(m!=null?m:t,g),{fullPath:m+(y&&"?")+y+x,path:m,query:_,hash:x}}function vh(e,t){const g=t.query?e(t.query):"";return t.path+(g&&"?")+g+(t.hash||"")}function _s(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function _h(e,t,g){const m=t.matched.length-1,_=g.matched.length-1;return m>-1&&m===_&&$t(t.matched[m],g.matched[_])&&Zo(t.params,g.params)&&e(t.query)===e(g.query)&&t.hash===g.hash}function $t(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Zo(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const g in e)if(!yh(e[g],t[g]))return!1;return!0}function yh(e,t){return Array.isArray(e)?ys(e,t):Array.isArray(t)?ys(t,e):e===t}function ys(e,t){return Array.isArray(t)?e.length===t.length&&e.every((g,m)=>g===t[m]):e.length===1&&e[0]===t}function bh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const g=t.split("/"),m=e.split("/");let _=g.length-1,y,x;for(y=0;y<m.length;y++)if(x=m[y],!(_===1||x==="."))if(x==="..")_--;else break;return g.slice(0,_).join("/")+"/"+m.slice(y-(y===m.length?1:0)).join("/")}var wi;(function(e){e.pop="pop",e.push="push"})(wi||(wi={}));var pi;(function(e){e.back="back",e.forward="forward",e.unknown=""})(pi||(pi={}));function wh(e){if(!e)if(zt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),mh(e)}const Ch=/^[^#]+#/;function xh(e,t){return e.replace(Ch,"#")+t}function Sh(e,t){const g=document.documentElement.getBoundingClientRect(),m=e.getBoundingClientRect();return{behavior:t.behavior,left:m.left-g.left-(t.left||0),top:m.top-g.top-(t.top||0)}}const un=()=>({left:window.pageXOffset,top:window.pageYOffset});function Th(e){let t;if("el"in e){const g=e.el,m=typeof g=="string"&&g.startsWith("#"),_=typeof g=="string"?m?document.getElementById(g.slice(1)):document.querySelector(g):g;if(!_)return;t=Sh(_,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function bs(e,t){return(history.state?history.state.position-t:-1)+e}const Yn=new Map;function Oh(e,t){Yn.set(e,t)}function Eh(e){const t=Yn.get(e);return Yn.delete(e),t}let Ph=()=>location.protocol+"//"+location.host;function Qo(e,t){const{pathname:g,search:m,hash:_}=t,y=e.indexOf("#");if(y>-1){let f=_.includes(e.slice(y))?e.slice(y).length:1,i=_.slice(f);return i[0]!=="/"&&(i="/"+i),_s(i,"")}return _s(g,e)+m+_}function Ah(e,t,g,m){let _=[],y=[],x=null;const f=({state:o})=>{const a=Qo(e,location),u=g.value,l=t.value;let s=0;if(o){if(g.value=a,t.value=o,x&&x===u){x=null;return}s=l?o.position-l.position:0}else m(a);_.forEach(h=>{h(g.value,u,{delta:s,type:wi.pop,direction:s?s>0?pi.forward:pi.back:pi.unknown})})};function i(){x=g.value}function c(o){_.push(o);const a=()=>{const u=_.indexOf(o);u>-1&&_.splice(u,1)};return y.push(a),a}function r(){const{history:o}=window;!o.state||o.replaceState(be({},o.state,{scroll:un()}),"")}function n(){for(const o of y)o();y=[],window.removeEventListener("popstate",f),window.removeEventListener("beforeunload",r)}return window.addEventListener("popstate",f),window.addEventListener("beforeunload",r),{pauseListeners:i,listen:c,destroy:n}}function ws(e,t,g,m=!1,_=!1){return{back:e,current:t,forward:g,replaced:m,position:window.history.length,scroll:_?un():null}}function kh(e){const{history:t,location:g}=window,m={value:Qo(e,g)},_={value:t.state};_.value||y(m.value,{back:null,current:m.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function y(i,c,r){const n=e.indexOf("#"),o=n>-1?(g.host&&document.querySelector("base")?e:e.slice(n))+i:Ph()+e+i;try{t[r?"replaceState":"pushState"](c,"",o),_.value=c}catch(a){console.error(a),g[r?"replace":"assign"](o)}}function x(i,c){const r=be({},t.state,ws(_.value.back,i,_.value.forward,!0),c,{position:_.value.position});y(i,r,!0),m.value=i}function f(i,c){const r=be({},_.value,t.state,{forward:i,scroll:un()});y(r.current,r,!0);const n=be({},ws(m.value,i,null),{position:r.position+1},c);y(i,n,!1),m.value=i}return{location:m,state:_,push:f,replace:x}}function Dh(e){e=wh(e);const t=kh(e),g=Ah(e,t.state,t.location,t.replace);function m(y,x=!0){x||g.pauseListeners(),history.go(y)}const _=be({location:"",base:e,go:m,createHref:xh.bind(null,e)},t,g);return Object.defineProperty(_,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(_,"state",{enumerable:!0,get:()=>t.state.value}),_}function Lh(e){return typeof e=="string"||e&&typeof e=="object"}function ea(e){return typeof e=="string"||typeof e=="symbol"}const nt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ta=Zt("nf");var Cs;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Cs||(Cs={}));function qt(e,t){return be(new Error,{type:e,[ta]:!0},t)}function bt(e,t){return e instanceof Error&&ta in e&&(t==null||!!(e.type&t))}const xs="[^/]+?",Mh={sensitive:!1,strict:!1,start:!0,end:!0},Rh=/[.+*?^${}()[\]/\\]/g;function Fh(e,t){const g=be({},Mh,t),m=[];let _=g.start?"^":"";const y=[];for(const c of e){const r=c.length?[]:[90];g.strict&&!c.length&&(_+="/");for(let n=0;n<c.length;n++){const o=c[n];let a=40+(g.sensitive?.25:0);if(o.type===0)n||(_+="/"),_+=o.value.replace(Rh,"\\$&"),a+=40;else if(o.type===1){const{value:u,repeatable:l,optional:s,regexp:h}=o;y.push({name:u,repeatable:l,optional:s});const d=h||xs;if(d!==xs){a+=10;try{new RegExp(`(${d})`)}catch(v){throw new Error(`Invalid custom RegExp for param "${u}" (${d}): `+v.message)}}let p=l?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;n||(p=s&&c.length<2?`(?:/${p})`:"/"+p),s&&(p+="?"),_+=p,a+=20,s&&(a+=-8),l&&(a+=-20),d===".*"&&(a+=-50)}r.push(a)}m.push(r)}if(g.strict&&g.end){const c=m.length-1;m[c][m[c].length-1]+=.7000000000000001}g.strict||(_+="/?"),g.end?_+="$":g.strict&&(_+="(?:/|$)");const x=new RegExp(_,g.sensitive?"":"i");function f(c){const r=c.match(x),n={};if(!r)return null;for(let o=1;o<r.length;o++){const a=r[o]||"",u=y[o-1];n[u.name]=a&&u.repeatable?a.split("/"):a}return n}function i(c){let r="",n=!1;for(const o of e){(!n||!r.endsWith("/"))&&(r+="/"),n=!1;for(const a of o)if(a.type===0)r+=a.value;else if(a.type===1){const{value:u,repeatable:l,optional:s}=a,h=u in c?c[u]:"";if(Array.isArray(h)&&!l)throw new Error(`Provided param "${u}" is an array but it is not repeatable (* or + modifiers)`);const d=Array.isArray(h)?h.join("/"):h;if(!d)if(s)o.length<2&&(r.endsWith("/")?r=r.slice(0,-1):n=!0);else throw new Error(`Missing required param "${u}"`);r+=d}}return r}return{re:x,score:m,keys:y,parse:f,stringify:i}}function Ih(e,t){let g=0;for(;g<e.length&&g<t.length;){const m=t[g]-e[g];if(m)return m;g++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function jh(e,t){let g=0;const m=e.score,_=t.score;for(;g<m.length&&g<_.length;){const y=Ih(m[g],_[g]);if(y)return y;g++}return _.length-m.length}const Bh={type:0,value:""},Nh=/[a-zA-Z0-9_]/;function zh(e){if(!e)return[[]];if(e==="/")return[[Bh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(a){throw new Error(`ERR (${g})/"${c}": ${a}`)}let g=0,m=g;const _=[];let y;function x(){y&&_.push(y),y=[]}let f=0,i,c="",r="";function n(){!c||(g===0?y.push({type:0,value:c}):g===1||g===2||g===3?(y.length>1&&(i==="*"||i==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),y.push({type:1,value:c,regexp:r,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):t("Invalid state to consume buffer"),c="")}function o(){c+=i}for(;f<e.length;){if(i=e[f++],i==="\\"&&g!==2){m=g,g=4;continue}switch(g){case 0:i==="/"?(c&&n(),x()):i===":"?(n(),g=1):o();break;case 4:o(),g=m;break;case 1:i==="("?g=2:Nh.test(i)?o():(n(),g=0,i!=="*"&&i!=="?"&&i!=="+"&&f--);break;case 2:i===")"?r[r.length-1]=="\\"?r=r.slice(0,-1)+i:g=3:r+=i;break;case 3:n(),g=0,i!=="*"&&i!=="?"&&i!=="+"&&f--,r="";break;default:t("Unknown state");break}}return g===2&&t(`Unfinished custom RegExp for param "${c}"`),n(),x(),_}function Xh(e,t,g){const m=Fh(zh(e.path),g),_=be(m,{record:e,parent:t,children:[],alias:[]});return t&&!_.record.aliasOf==!t.record.aliasOf&&t.children.push(_),_}function Hh(e,t){const g=[],m=new Map;t=Ts({strict:!1,end:!0,sensitive:!1},t);function _(r){return m.get(r)}function y(r,n,o){const a=!o,u=Uh(r);u.aliasOf=o&&o.record;const l=Ts(t,r),s=[u];if("alias"in r){const p=typeof r.alias=="string"?[r.alias]:r.alias;for(const v of p)s.push(be({},u,{components:o?o.record.components:u.components,path:v,aliasOf:o?o.record:u}))}let h,d;for(const p of s){const{path:v}=p;if(n&&v[0]!=="/"){const b=n.record.path,C=b[b.length-1]==="/"?"":"/";p.path=n.record.path+(v&&C+v)}if(h=Xh(p,n,l),o?o.alias.push(h):(d=d||h,d!==h&&d.alias.push(h),a&&r.name&&!Ss(h)&&x(r.name)),"children"in u){const b=u.children;for(let C=0;C<b.length;C++)y(b[C],h,o&&o.children[C])}o=o||h,i(h)}return d?()=>{x(d)}:gi}function x(r){if(ea(r)){const n=m.get(r);n&&(m.delete(r),g.splice(g.indexOf(n),1),n.children.forEach(x),n.alias.forEach(x))}else{const n=g.indexOf(r);n>-1&&(g.splice(n,1),r.record.name&&m.delete(r.record.name),r.children.forEach(x),r.alias.forEach(x))}}function f(){return g}function i(r){let n=0;for(;n<g.length&&jh(r,g[n])>=0;)n++;g.splice(n,0,r),r.record.name&&!Ss(r)&&m.set(r.record.name,r)}function c(r,n){let o,a={},u,l;if("name"in r&&r.name){if(o=m.get(r.name),!o)throw qt(1,{location:r});l=o.record.name,a=be(Wh(n.params,o.keys.filter(d=>!d.optional).map(d=>d.name)),r.params),u=o.stringify(a)}else if("path"in r)u=r.path,o=g.find(d=>d.re.test(u)),o&&(a=o.parse(u),l=o.record.name);else{if(o=n.name?m.get(n.name):g.find(d=>d.re.test(n.path)),!o)throw qt(1,{location:r,currentLocation:n});l=o.record.name,a=be({},n.params,r.params),u=o.stringify(a)}const s=[];let h=o;for(;h;)s.unshift(h.record),h=h.parent;return{name:l,path:u,params:a,matched:s,meta:Vh(s)}}return e.forEach(r=>y(r)),{addRoute:y,resolve:c,removeRoute:x,getRoutes:f,getRecordMatcher:_}}function Wh(e,t){const g={};for(const m of t)m in e&&(g[m]=e[m]);return g}function Uh(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Yh(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function Yh(e){const t={},g=e.props||!1;if("component"in e)t.default=g;else for(const m in e.components)t[m]=typeof g=="boolean"?g:g[m];return t}function Ss(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Vh(e){return e.reduce((t,g)=>be(t,g.meta),{})}function Ts(e,t){const g={};for(const m in e)g[m]=m in t?t[m]:e[m];return g}const ia=/#/g,Gh=/&/g,$h=/\//g,qh=/=/g,Kh=/\?/g,na=/\+/g,Jh=/%5B/g,Zh=/%5D/g,ra=/%5E/g,Qh=/%60/g,sa=/%7B/g,eu=/%7C/g,oa=/%7D/g,tu=/%20/g;function Sr(e){return encodeURI(""+e).replace(eu,"|").replace(Jh,"[").replace(Zh,"]")}function iu(e){return Sr(e).replace(sa,"{").replace(oa,"}").replace(ra,"^")}function Vn(e){return Sr(e).replace(na,"%2B").replace(tu,"+").replace(ia,"%23").replace(Gh,"%26").replace(Qh,"`").replace(sa,"{").replace(oa,"}").replace(ra,"^")}function nu(e){return Vn(e).replace(qh,"%3D")}function ru(e){return Sr(e).replace(ia,"%23").replace(Kh,"%3F")}function su(e){return e==null?"":ru(e).replace($h,"%2F")}function Zi(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function ou(e){const t={};if(e===""||e==="?")return t;const m=(e[0]==="?"?e.slice(1):e).split("&");for(let _=0;_<m.length;++_){const y=m[_].replace(na," "),x=y.indexOf("="),f=Zi(x<0?y:y.slice(0,x)),i=x<0?null:Zi(y.slice(x+1));if(f in t){let c=t[f];Array.isArray(c)||(c=t[f]=[c]),c.push(i)}else t[f]=i}return t}function Os(e){let t="";for(let g in e){const m=e[g];if(g=nu(g),m==null){m!==void 0&&(t+=(t.length?"&":"")+g);continue}(Array.isArray(m)?m.map(y=>y&&Vn(y)):[m&&Vn(m)]).forEach(y=>{y!==void 0&&(t+=(t.length?"&":"")+g,y!=null&&(t+="="+y))})}return t}function au(e){const t={};for(const g in e){const m=e[g];m!==void 0&&(t[g]=Array.isArray(m)?m.map(_=>_==null?null:""+_):m==null?m:""+m)}return t}function ri(){let e=[];function t(m){return e.push(m),()=>{const _=e.indexOf(m);_>-1&&e.splice(_,1)}}function g(){e=[]}return{add:t,list:()=>e,reset:g}}function pt(e,t,g,m,_){const y=m&&(m.enterCallbacks[_]=m.enterCallbacks[_]||[]);return()=>new Promise((x,f)=>{const i=n=>{n===!1?f(qt(4,{from:g,to:t})):n instanceof Error?f(n):Lh(n)?f(qt(2,{from:t,to:n})):(y&&m.enterCallbacks[_]===y&&typeof n=="function"&&y.push(n),x())},c=e.call(m&&m.instances[_],t,g,i);let r=Promise.resolve(c);e.length<3&&(r=r.then(i)),r.catch(n=>f(n))})}function Tn(e,t,g,m){const _=[];for(const y of e)for(const x in y.components){let f=y.components[x];if(!(t!=="beforeRouteEnter"&&!y.instances[x]))if(lu(f)){const c=(f.__vccOpts||f)[t];c&&_.push(pt(c,g,m,y,x))}else{let i=f();_.push(()=>i.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${x}" at "${y.path}"`));const r=gh(c)?c.default:c;y.components[x]=r;const o=(r.__vccOpts||r)[t];return o&&pt(o,g,m,y,x)()}))}}return _}function lu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Es(e){const t=ke(hn),g=ke(xr),m=xe(()=>t.resolve(st(e.to))),_=xe(()=>{const{matched:i}=m.value,{length:c}=i,r=i[c-1],n=g.matched;if(!r||!n.length)return-1;const o=n.findIndex($t.bind(null,r));if(o>-1)return o;const a=Ps(i[c-2]);return c>1&&Ps(r)===a&&n[n.length-1].path!==a?n.findIndex($t.bind(null,i[c-2])):o}),y=xe(()=>_.value>-1&&fu(g.params,m.value.params)),x=xe(()=>_.value>-1&&_.value===g.matched.length-1&&Zo(g.params,m.value.params));function f(i={}){return uu(i)?t[st(e.replace)?"replace":"push"](st(e.to)).catch(gi):Promise.resolve()}return{route:m,href:xe(()=>m.value.href),isActive:y,isExactActive:x,navigate:f}}const cu=Ge({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Es,setup(e,{slots:t}){const g=Si(Es(e)),{options:m}=ke(hn),_=xe(()=>({[As(e.activeClass,m.linkActiveClass,"router-link-active")]:g.isActive,[As(e.exactActiveClass,m.linkExactActiveClass,"router-link-exact-active")]:g.isExactActive}));return()=>{const y=t.default&&t.default(g);return e.custom?y:_e("a",{"aria-current":g.isExactActive?e.ariaCurrentValue:null,href:g.href,onClick:g.navigate,class:_.value},y)}}}),hu=cu;function uu(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function fu(e,t){for(const g in t){const m=t[g],_=e[g];if(typeof m=="string"){if(m!==_)return!1}else if(!Array.isArray(_)||_.length!==m.length||m.some((y,x)=>y!==_[x]))return!1}return!0}function Ps(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const As=(e,t,g)=>e!=null?e:t!=null?t:g,du=Ge({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:g}){const m=ke(Un),_=xe(()=>e.route||m.value),y=ke(vs,0),x=xe(()=>_.value.matched[y]);Pt(vs,y+1),Pt(dh,x),Pt(Un,_);const f=Te();return ot(()=>[f.value,x.value,e.name],([i,c,r],[n,o,a])=>{c&&(c.instances[r]=i,o&&o!==c&&i&&i===n&&(c.leaveGuards.size||(c.leaveGuards=o.leaveGuards),c.updateGuards.size||(c.updateGuards=o.updateGuards))),i&&c&&(!o||!$t(c,o)||!n)&&(c.enterCallbacks[r]||[]).forEach(u=>u(i))},{flush:"post"}),()=>{const i=_.value,c=x.value,r=c&&c.components[e.name],n=e.name;if(!r)return ks(g.default,{Component:r,route:i});const o=c.props[e.name],a=o?o===!0?i.params:typeof o=="function"?o(i):o:null,l=_e(r,be({},a,t,{onVnodeUnmounted:s=>{s.component.isUnmounted&&(c.instances[n]=null)},ref:f}));return ks(g.default,{Component:l,route:i})||l}}});function ks(e,t){if(!e)return null;const g=e(t);return g.length===1?g[0]:g}const aa=du;function gu(e){const t=Hh(e.routes,e),g=e.parseQuery||ou,m=e.stringifyQuery||Os,_=e.history,y=ri(),x=ri(),f=ri(),i=mo(nt);let c=nt;zt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const r=xn.bind(null,O=>""+O),n=xn.bind(null,su),o=xn.bind(null,Zi);function a(O,R){let I,X;return ea(O)?(I=t.getRecordMatcher(O),X=R):X=O,t.addRoute(X,I)}function u(O){const R=t.getRecordMatcher(O);R&&t.removeRoute(R)}function l(){return t.getRoutes().map(O=>O.record)}function s(O){return!!t.getRecordMatcher(O)}function h(O,R){if(R=be({},R||i.value),typeof O=="string"){const se=Sn(g,O,R.path),P=t.resolve({path:se.path},R),L=_.createHref(se.fullPath);return be(se,P,{params:o(P.params),hash:Zi(se.hash),redirectedFrom:void 0,href:L})}let I;if("path"in O)I=be({},O,{path:Sn(g,O.path,R.path).path});else{const se=be({},O.params);for(const P in se)se[P]==null&&delete se[P];I=be({},O,{params:n(O.params)}),R.params=n(R.params)}const X=t.resolve(I,R),V=O.hash||"";X.params=r(o(X.params));const ee=vh(m,be({},O,{hash:iu(V),path:X.path})),$=_.createHref(ee);return be({fullPath:ee,hash:V,query:m===Os?au(O.query):O.query||{}},X,{redirectedFrom:void 0,href:$})}function d(O){return typeof O=="string"?Sn(g,O,i.value.path):be({},O)}function p(O,R){if(c!==O)return qt(8,{from:R,to:O})}function v(O){return w(O)}function b(O){return v(be(d(O),{replace:!0}))}function C(O){const R=O.matched[O.matched.length-1];if(R&&R.redirect){const{redirect:I}=R;let X=typeof I=="function"?I(O):I;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=d(X):{path:X},X.params={}),be({query:O.query,hash:O.hash,params:O.params},X)}}function w(O,R){const I=c=h(O),X=i.value,V=O.state,ee=O.force,$=O.replace===!0,se=C(I);if(se)return w(be(d(se),{state:V,force:ee,replace:$}),R||I);const P=I;P.redirectedFrom=R;let L;return!ee&&_h(m,X,I)&&(L=qt(16,{to:P,from:X}),z(X,X,!0,!1)),(L?Promise.resolve(L):T(P,X)).catch(B=>bt(B)?B:Q(B,P,X)).then(B=>{if(B){if(bt(B,2))return w(be(d(B.to),{state:V,force:ee,replace:$}),R||P)}else B=M(P,X,!0,$,V);return A(P,X,B),B})}function S(O,R){const I=p(O,R);return I?Promise.reject(I):Promise.resolve()}function T(O,R){let I;const[X,V,ee]=pu(O,R);I=Tn(X.reverse(),"beforeRouteLeave",O,R);for(const se of X)se.leaveGuards.forEach(P=>{I.push(pt(P,O,R))});const $=S.bind(null,O,R);return I.push($),Ft(I).then(()=>{I=[];for(const se of y.list())I.push(pt(se,O,R));return I.push($),Ft(I)}).then(()=>{I=Tn(V,"beforeRouteUpdate",O,R);for(const se of V)se.updateGuards.forEach(P=>{I.push(pt(P,O,R))});return I.push($),Ft(I)}).then(()=>{I=[];for(const se of O.matched)if(se.beforeEnter&&!R.matched.includes(se))if(Array.isArray(se.beforeEnter))for(const P of se.beforeEnter)I.push(pt(P,O,R));else I.push(pt(se.beforeEnter,O,R));return I.push($),Ft(I)}).then(()=>(O.matched.forEach(se=>se.enterCallbacks={}),I=Tn(ee,"beforeRouteEnter",O,R),I.push($),Ft(I))).then(()=>{I=[];for(const se of x.list())I.push(pt(se,O,R));return I.push($),Ft(I)}).catch(se=>bt(se,8)?se:Promise.reject(se))}function A(O,R,I){for(const X of f.list())X(O,R,I)}function M(O,R,I,X,V){const ee=p(O,R);if(ee)return ee;const $=R===nt,se=zt?history.state:{};I&&(X||$?_.replace(O.fullPath,be({scroll:$&&se&&se.scroll},V)):_.push(O.fullPath,V)),i.value=O,z(O,R,I,$),k()}let E;function D(){E=_.listen((O,R,I)=>{const X=h(O),V=C(X);if(V){w(be(V,{replace:!0}),X).catch(gi);return}c=X;const ee=i.value;zt&&Oh(bs(ee.fullPath,I.delta),un()),T(X,ee).catch($=>bt($,12)?$:bt($,2)?(w($.to,X).then(se=>{bt(se,20)&&!I.delta&&I.type===wi.pop&&_.go(-1,!1)}).catch(gi),Promise.reject()):(I.delta&&_.go(-I.delta,!1),Q($,X,ee))).then($=>{$=$||M(X,ee,!1),$&&(I.delta?_.go(-I.delta,!1):I.type===wi.pop&&bt($,20)&&_.go(-1,!1)),A(X,ee,$)}).catch(gi)})}let N=ri(),K=ri(),U;function Q(O,R,I){k(O);const X=K.list();return X.length?X.forEach(V=>V(O,R,I)):console.error(O),Promise.reject(O)}function re(){return U&&i.value!==nt?Promise.resolve():new Promise((O,R)=>{N.add([O,R])})}function k(O){U||(U=!0,D(),N.list().forEach(([R,I])=>O?I(O):R()),N.reset())}function z(O,R,I,X){const{scrollBehavior:V}=e;if(!zt||!V)return Promise.resolve();const ee=!I&&Eh(bs(O.fullPath,0))||(X||!I)&&history.state&&history.state.scroll||null;return Wo().then(()=>V(O,R,ee)).then($=>$&&Th($)).catch($=>Q($,O,R))}const W=O=>_.go(O);let G;const le=new Set;return{currentRoute:i,addRoute:a,removeRoute:u,hasRoute:s,getRoutes:l,resolve:h,options:e,push:v,replace:b,go:W,back:()=>W(-1),forward:()=>W(1),beforeEach:y.add,beforeResolve:x.add,afterEach:f.add,onError:K.add,isReady:re,install(O){const R=this;O.component("RouterLink",hu),O.component("RouterView",aa),O.config.globalProperties.$router=R,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>st(i)}),zt&&!G&&i.value===nt&&(G=!0,v(_.location).catch(V=>{}));const I={};for(const V in nt)I[V]=xe(()=>i.value[V]);O.provide(hn,R),O.provide(xr,Si(I)),O.provide(Un,i);const X=O.unmount;le.add(O),O.unmount=function(){le.delete(O),le.size<1&&(c=nt,E&&E(),i.value=nt,G=!1,U=!1),X()}}}}function Ft(e){return e.reduce((t,g)=>t.then(()=>g()),Promise.resolve())}function pu(e,t){const g=[],m=[],_=[],y=Math.max(t.matched.length,e.matched.length);for(let x=0;x<y;x++){const f=t.matched[x];f&&(e.matched.find(c=>$t(c,f))?m.push(f):g.push(f));const i=e.matched[x];i&&(t.matched.find(c=>$t(c,i))||_.push(i))}return[g,m,_]}function fn(){return ke(hn)}function dn(){return ke(xr)}const mu=Ge({setup(e,t){const g=Te(!1);return tt(()=>{g.value=!0}),()=>{var m,_;return g.value?(_=(m=t.slots).default)===null||_===void 0?void 0:_.call(m):null}}}),vu="modulepreload",Ds={},_u="/",he=function(t,g){return!g||g.length===0?t():Promise.all(g.map(m=>{if(m=`${_u}${m}`,m in Ds)return;Ds[m]=!0;const _=m.endsWith(".css"),y=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const x=document.createElement("link");if(x.rel=_?"stylesheet":vu,_||(x.as="script",x.crossOrigin=""),x.href=m,document.head.appendChild(x),_)return new Promise((f,i)=>{x.addEventListener("load",f),x.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${m}`)))})})).then(()=>t())},la={"v-8daa1a0e":ye(()=>he(()=>import("./index.html.8a79111f.js"),[])),"v-2d0a89b7":ye(()=>he(()=>import("./index.html.b699762a.js"),[])),"v-6240d60f":ye(()=>he(()=>import("./app.html.fe38129d.js"),[])),"v-65adaa6c":ye(()=>he(()=>import("./arch.html.58c31c1c.js"),[])),"v-1c250430":ye(()=>he(()=>import("./browser.html.3150dbff.js"),[])),"v-54572926":ye(()=>he(()=>import("./css.html.1ca424e9.js"),[])),"v-070cbd00":ye(()=>he(()=>import("./fis.html.95f259d8.js"),[])),"v-0b563763":ye(()=>he(()=>import("./hot.html.513e56b9.js"),[])),"v-03101522":ye(()=>he(()=>import("./interview.html.75fbc630.js"),[])),"v-88a59616":ye(()=>he(()=>import("./javascript.html.9f104122.js"),[])),"v-21b90034":ye(()=>he(()=>import("./miniapp.html.76f462b6.js"),[])),"v-35690f80":ye(()=>he(()=>import("./node.html.d7aa2e53.js"),[])),"v-3556a88e":ye(()=>he(()=>import("./perf.html.7da1f8fc.js"),[])),"v-7d10a6d2":ye(()=>he(()=>import("./project.html.a21a02e0.js"),[])),"v-c52ce09e":ye(()=>he(()=>import("./react.html.21561f1a.js"),[])),"v-eb779d42":ye(()=>he(()=>import("./server.html.56ac048b.js"),[])),"v-f99f08a0":ye(()=>he(()=>import("./test.html.546fa4c7.js"),[])),"v-1a829e46":ye(()=>he(()=>import("./typescript.html.5f4e2f50.js"),[])),"v-4519446c":ye(()=>he(()=>import("./vue.html.69ed1a69.js"),[])),"v-2d0a96cb":ye(()=>he(()=>import("./index.html.4cf50ae8.js"),[])),"v-25cc5155":ye(()=>he(()=>import("./algorithm.html.5baf66a2.js"),[])),"v-2da0e54d":ye(()=>he(()=>import("./internet.html.4f40b30d.js"),[])),"v-1e823484":ye(()=>he(()=>import("./soft.html.5030c687.js"),[])),"v-5c7b669e":ye(()=>he(()=>import("./weibo.html.925450d6.js"),[])),"v-3706649a":ye(()=>he(()=>import("./404.html.3177e0b1.js"),[]))},yu={"v-8daa1a0e":()=>he(()=>import("./index.html.9f63b37d.js"),[]).then(({data:e})=>e),"v-2d0a89b7":()=>he(()=>import("./index.html.8755ed30.js"),[]).then(({data:e})=>e),"v-6240d60f":()=>he(()=>import("./app.html.51caf5af.js"),[]).then(({data:e})=>e),"v-65adaa6c":()=>he(()=>import("./arch.html.f8b35ead.js"),[]).then(({data:e})=>e),"v-1c250430":()=>he(()=>import("./browser.html.15013aac.js"),[]).then(({data:e})=>e),"v-54572926":()=>he(()=>import("./css.html.39f16421.js"),[]).then(({data:e})=>e),"v-070cbd00":()=>he(()=>import("./fis.html.dd71208c.js"),[]).then(({data:e})=>e),"v-0b563763":()=>he(()=>import("./hot.html.f3f78f59.js"),[]).then(({data:e})=>e),"v-03101522":()=>he(()=>import("./interview.html.ba0077bd.js"),[]).then(({data:e})=>e),"v-88a59616":()=>he(()=>import("./javascript.html.198ca997.js"),[]).then(({data:e})=>e),"v-21b90034":()=>he(()=>import("./miniapp.html.42cba2b9.js"),[]).then(({data:e})=>e),"v-35690f80":()=>he(()=>import("./node.html.3671f1eb.js"),[]).then(({data:e})=>e),"v-3556a88e":()=>he(()=>import("./perf.html.8d2e97c8.js"),[]).then(({data:e})=>e),"v-7d10a6d2":()=>he(()=>import("./project.html.91484557.js"),[]).then(({data:e})=>e),"v-c52ce09e":()=>he(()=>import("./react.html.a629cb86.js"),[]).then(({data:e})=>e),"v-eb779d42":()=>he(()=>import("./server.html.0f5f826d.js"),[]).then(({data:e})=>e),"v-f99f08a0":()=>he(()=>import("./test.html.c353ab75.js"),[]).then(({data:e})=>e),"v-1a829e46":()=>he(()=>import("./typescript.html.9c641500.js"),[]).then(({data:e})=>e),"v-4519446c":()=>he(()=>import("./vue.html.dd7488fb.js"),[]).then(({data:e})=>e),"v-2d0a96cb":()=>he(()=>import("./index.html.753c8c1e.js"),[]).then(({data:e})=>e),"v-25cc5155":()=>he(()=>import("./algorithm.html.11cac093.js"),[]).then(({data:e})=>e),"v-2da0e54d":()=>he(()=>import("./internet.html.0a98ad76.js"),[]).then(({data:e})=>e),"v-1e823484":()=>he(()=>import("./soft.html.fc1c6b54.js"),[]).then(({data:e})=>e),"v-5c7b669e":()=>he(()=>import("./weibo.html.4f2e81a0.js"),[]).then(({data:e})=>e),"v-3706649a":()=>he(()=>import("./404.html.4f8e6760.js"),[]).then(({data:e})=>e)},ca=Te(yu),Gn=lr({key:"",path:"",title:"",lang:"",frontmatter:{},excerpt:"",headers:[]}),mt=Te(Gn),Qt=()=>mt,bu=async e=>{const t=ca.value[e];if(!t)return Gn;const g=await t();return g!=null?g:Gn};gn.webpackHot&&(__VUE_HMR_RUNTIME__.updatePageData=e=>{ca.value[e.key]=()=>Promise.resolve(e),e.key===mt.value.key&&(mt.value=e)});const ha=Symbol(""),wu=()=>{const e=ke(ha);if(!e)throw new Error("usePageFrontmatter() is called without provider.");return e},Cu=e=>e.frontmatter,xu=([e,t,g])=>e==="meta"&&t.name?`${e}.${t.name}`:["title","base"].includes(e)?e:e==="template"&&t.id?`${e}.${t.id}`:JSON.stringify([e,t,g]),Su=e=>{const t=new Set,g=[];return e.forEach(m=>{const _=xu(m);t.has(_)||(t.add(_),g.push(m))}),g},Tu=e=>/^(https?:)?\/\//.test(e),Bm=e=>/^mailto:/.test(e),Nm=e=>/^tel:/.test(e),ua=e=>Object.prototype.toString.call(e)==="[object Object]",Ou=e=>e.replace(/\/$/,""),Eu=e=>e.replace(/^\//,""),fa=(e,t)=>{const g=Object.keys(e).sort((m,_)=>{const y=_.split("/").length-m.split("/").length;return y!==0?y:_.length-m.length});for(const m of g)if(t.startsWith(m))return m;return"/"},da=Symbol(""),Pu=()=>{const e=ke(da);if(!e)throw new Error("usePageHead() is called without provider.");return e},Au=(e,t,g)=>{const m=Se(t.description)?t.description:g.description,_=[...fe(t.head)?t.head:[],...g.head,["title",{},e],["meta",{name:"description",content:m}]];return Su(_)},ku=Symbol(""),Du=(e,t)=>`${e.title?`${e.title} | `:""}${t.title}`,ga=Symbol(""),Lu=()=>{const e=ke(ga);if(!e)throw new Error("usePageLang() is called without provider.");return e},Mu=e=>e.lang||"en",Tr=Symbol(""),Ru=()=>{const e=ke(Tr);if(!e)throw new Error("useRouteLocale() is called without provider.");return e},Fu=(e,t)=>fa(e,t),Iu={base:"/",lang:"en-US",title:"\u524D\u7AEF\u7F16\u7A0B\u81EA\u5B66\u7F51",description:"\u5B66\u524D\u7AEF\u7684\u6700\u4F73\u5B9E\u8DF5.",head:[["link",{rel:"shortcut icon",type:"image/x-icon",href:"/logo.jpeg"}]],locales:{}},Dt=Te(Iu),ju=()=>Dt;gn.webpackHot&&(__VUE_HMR_RUNTIME__.updateSiteData=e=>{Dt.value=e});const pa=Symbol(""),zm=()=>{const e=ke(pa);if(!e)throw new Error("useSiteLocaleData() is called without provider.");return e},Bu=(e,t)=>({...e,...e.locales[t]}),Nu=Symbol(""),zu=()=>{const e=dn(),t=Pu(),g=Lu(),m=Te([]),_=()=>{t.value.forEach(x=>{const f=Xu(x);f&&m.value.push(f)})},y=()=>{document.documentElement.lang=g.value,m.value.forEach(x=>{x.parentNode===document.head&&document.head.removeChild(x)}),m.value.splice(0,m.value.length),t.value.forEach(x=>{const f=Hu(x);f!==null&&(document.head.appendChild(f),m.value.push(f))})};Pt(Nu,y),tt(()=>{_(),y(),ot(()=>e.path,()=>y())})},Xu=([e,t,g=""])=>{const m=Object.entries(t).map(([f,i])=>Se(i)?`[${f}="${i}"]`:i===!0?`[${f}]`:"").join(""),_=`head > ${e}${m}`;return Array.from(document.querySelectorAll(_)).find(f=>f.innerText===g)||null},Hu=([e,t,g])=>{if(!Se(e))return null;const m=document.createElement(e);return ua(t)&&Object.entries(t).forEach(([_,y])=>{Se(y)?m.setAttribute(_,y):y===!0&&m.setAttribute(_,"")}),Se(g)&&m.appendChild(document.createTextNode(g)),m},Or=e=>{let t;e.pageKey?t=e.pageKey:t=Qt().value.key;const g=la[t];return g?_e(g):_e("div","404 Not Found")};Or.displayName="Content";Or.props={pageKey:{type:String,required:!1}};const Wu=_e("svg",{class:"icon outbound",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[_e("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),_e("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),Er=(e,{slots:t})=>{var g;return _e("span",[Wu,(g=t.default)===null||g===void 0?void 0:g.call(t)])};Er.displayName="OutboundLink";const Uu={404:ye(()=>he(()=>import("./404.fcbfde3f.js"),[])),Layout:ye(()=>he(()=>import("./Layout.f008bd46.js"),[]))},Ls=Ge({name:"Vuepress",setup(){const e=Qt(),t=xe(()=>{let g;if(e.value.path){const m=e.value.frontmatter.layout;Se(m)?g=m:g="Layout"}else g="404";return Uu[g]||fc(g,!1)});return()=>_e(t.value)}}),Ei=e=>e,Pr=e=>e,Yu=e=>Tu(e)?e:`${ju().value.base}${Eu(e)}`,Vu=Ge({props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(e){return(t,g)=>(Qe(),St("span",{class:Ci(["badge",e.type]),style:en({verticalAlign:e.vertical})},[Bo(t.$slots,"default",{},()=>[mr(Zn(e.text),1)])],6))}});var Gu=Ge({name:"CodeGroup",setup(e,{slots:t}){const g=Te(-1),m=Te([]),_=(f=g.value)=>{f<m.value.length-1?g.value=f+1:g.value=0,m.value[g.value].focus()},y=(f=g.value)=>{f>0?g.value=f-1:g.value=m.value.length-1,m.value[g.value].focus()},x=(f,i)=>{f.key===" "||f.key==="Enter"?(f.preventDefault(),g.value=i):f.key==="ArrowRight"?(f.preventDefault(),_(i)):f.key==="ArrowLeft"&&(f.preventDefault(),y(i))};return()=>{var f;const i=(((f=t.default)===null||f===void 0?void 0:f.call(t))||[]).filter(c=>c.type.name==="CodeGroupItem").map(c=>(c.props===null&&(c.props={}),c));return i.length===0?null:(g.value<0||g.value>i.length-1?(g.value=i.findIndex(c=>c.props.active===""||c.props.active===!0),g.value===-1&&(g.value=0)):i.forEach((c,r)=>{c.props.active=r===g.value}),_e("div",{class:"code-group"},[_e("div",{class:"code-group__nav"},_e("ul",{class:"code-group__ul"},i.map((c,r)=>{const n=r===g.value;return _e("li",{class:"code-group__li"},_e("button",{ref:o=>{o&&(m.value[r]=o)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":n},ariaPressed:n,ariaExpanded:n,onClick:()=>g.value=r,onKeydown:o=>x(o,r)},c.props.title))}))),i]))}}});const $u=["aria-selected"],qu=Ge({name:"CodeGroupItem"});function Ku(e){return(t,g)=>(Qe(),St("div",{class:Ci(["code-group-item",{"code-group-item__active":e.active}]),"aria-selected":e.active},[Bo(t.$slots,"default")],10,$u))}const Ju=Ge({...qu,props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup:Ku});function ma(e){return Ga()?($a(e),!0):!1}const Ar=typeof window!="undefined",Zu=e=>typeof e=="string",On=()=>{};function Qu(e,t){function g(...m){e(()=>t.apply(this,m),{fn:t,thisArg:this,args:m})}return g}const ef=e=>e();var Ms=Object.getOwnPropertySymbols,tf=Object.prototype.hasOwnProperty,nf=Object.prototype.propertyIsEnumerable,rf=(e,t)=>{var g={};for(var m in e)tf.call(e,m)&&t.indexOf(m)<0&&(g[m]=e[m]);if(e!=null&&Ms)for(var m of Ms(e))t.indexOf(m)<0&&nf.call(e,m)&&(g[m]=e[m]);return g};function sf(e,t,g={}){const m=g,{eventFilter:_=ef}=m,y=rf(m,["eventFilter"]);return ot(e,Qu(_,t),y)}const Qi=Ar?window:void 0;Ar&&window.document;Ar&&window.navigator;function of(...e){let t,g,m,_;if(Zu(e[0])?([g,m,_]=e,t=Qi):[t,g,m,_]=e,!t)return On;let y=On;const x=ot(()=>st(t),i=>{y(),i&&(i.addEventListener(g,m,_),y=()=>{i.removeEventListener(g,m,_),y=On})},{immediate:!0,flush:"post"}),f=()=>{x(),y()};return ma(f),f}function af(e,t={}){const{window:g=Qi}=t;if(!g)return Te(!1);const m=g.matchMedia(e),_=Te(m.matches),y=x=>{_.value=x.matches};return"addEventListener"in m?m.addEventListener("change",y):m.addListener(y),ma(()=>{"removeEventListener"in m?m.removeEventListener("change",y):m.removeListener(y)}),_}const lf={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))}};function cf(e,t,g=(_=>(_=Qi)==null?void 0:_.localStorage)(),m={}){var _;const{flush:y="pre",deep:x=!0,listenToStorageChanges:f=!0,writeDefaults:i=!0,shallow:c,window:r=Qi,eventFilter:n,onError:o=d=>{console.error(d)}}=m,a=st(t),u=a==null?"any":a instanceof Set?"set":a instanceof Map?"map":typeof a=="boolean"?"boolean":typeof a=="string"?"string":typeof a=="object"||Array.isArray(a)?"object":Number.isNaN(a)?"any":"number",l=(c?mo:Te)(t),s=(_=m.serializer)!=null?_:lf[u];function h(d){if(!(!g||d&&d.key!==e))try{const p=d?d.newValue:g.getItem(e);p==null?(l.value=a,i&&a!==null&&g.setItem(e,s.write(a))):l.value=s.read(p)}catch(p){o(p)}}return h(),r&&f&&of(r,"storage",d=>setTimeout(()=>h(d),0)),g&&sf(l,()=>{try{l.value==null?g.removeItem(e):g.setItem(e,s.write(l.value))}catch(d){o(d)}},{flush:y,deep:x,eventFilter:n}),l}function hf(e){return af("(prefers-color-scheme: dark)",e)}var Rs;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(Rs||(Rs={}));const va=Symbol(""),Xm=()=>{const e=ke(va);if(!e)throw new Error("useDarkMode() is called without provider.");return e},uf=()=>{const e=Dr(),t=hf(),g=cf("vuepress-color-scheme","auto"),m=xe({get(){return e.value.darkMode?g.value==="auto"?t.value:g.value==="dark":!1},set(_){_===t.value?g.value="auto":g.value=_?"dark":"light"}});Pt(va,m),ff(m)},ff=e=>{const t=(g=e.value)=>{const m=window==null?void 0:window.document.querySelector("html");m==null||m.classList.toggle("dark",g)};tt(()=>{ot(e,t,{immediate:!0})}),dr(()=>t())},_a=(...e)=>{const g=fn().resolve(...e),m=g.matched[g.matched.length-1];if(!(m!=null&&m.redirect))return g;const{redirect:_}=m,y=ge(_)?_(g):_,x=Se(y)?{path:y}:y;return _a({hash:g.hash,query:g.query,params:g.params,...x})},df=e=>{const t=_a(e);return{text:t.meta.title||e,link:t.name==="404"?e:t.fullPath}};let En=null,si=null;const gf={wait:()=>En,pending:()=>{En=new Promise(e=>si=e)},resolve:()=>{si==null||si(),En=null,si=null}},pf=()=>gf,ya=Symbol("sidebarItems"),Hm=()=>{const e=ke(ya);if(!e)throw new Error("useSidebarItems() is called without provider.");return e},mf=()=>{const e=Dr(),t=wu(),g=xe(()=>vf(t.value,e.value));Pt(ya,g)},vf=(e,t)=>{var g,m,_,y;const x=(m=(g=e.sidebar)!==null&&g!==void 0?g:t.sidebar)!==null&&m!==void 0?m:"auto",f=(y=(_=e.sidebarDepth)!==null&&_!==void 0?_:t.sidebarDepth)!==null&&y!==void 0?y:2;return e.home||x===!1?[]:x==="auto"?yf(f):fe(x)?ba(x,f):ua(x)?bf(x,f):[]},_f=(e,t)=>({text:e.title,link:`#${e.slug}`,children:kr(e.children,t)}),kr=(e,t)=>t>0?e.map(g=>_f(g,t-1)):[],yf=e=>{const t=Qt();return[{text:t.value.title,children:kr(t.value.headers,e)}]},ba=(e,t)=>{const g=dn(),m=Qt(),_=y=>{var x;let f;if(Se(y)?f=df(y):f=y,f.children)return{...f,children:f.children.map(i=>_(i))};if(f.link===g.path){const i=((x=m.value.headers[0])===null||x===void 0?void 0:x.level)===1?m.value.headers[0].children:m.value.headers;return{...f,children:kr(i,t)}}return f};return e.map(y=>_(y))},bf=(e,t)=>{var g;const m=dn(),_=fa(e,m.path),y=(g=e[_])!==null&&g!==void 0?g:[];return ba(y,t)},wf={logo:"/logo.jpeg",contributors:!1,contributorsText:"\u8D21\u732E\u8005",lastUpdatedText:"\u4E0A\u6B21\u66F4\u65B0",notFound:["\u8FD9\u5C31\u6233\u78B0\u5230\u6211\u77E5\u8BC6\u7684\u76F2\u70B9\u4E86"],editLinkText:"\u7F16\u8F91\u9875\u9762",docsRepo:"https://github.com/thunder-gzy/guziyi.git",docsBranch:"main",docsDir:"docs",navbar:["/fe/",{text:"\u5E38\u7528\u5DE5\u5177",children:["/tools/weibo.md",{text:"\u65F6\u949F",link:"https://pandafe.gitee.io/clock/"},{text:"\u6B63\u5219\u53EF\u89C6\u5316",link:"https://jex.im/regulex/#!flags=&re=%5E(a%7Cb)*%3F%24"},{text:"mdnice",link:"https://mdnice.com/"},{text:"\u65F6\u95F4\u8F74\u5DE5\u5177",link:"https://time.graphics/editor"},{text:"\u6241\u5E73\u914D\u56FEunDraw",link:"https://undraw.co/illustrations"},{text:"\u521B\u5BA2\u8D34\u505A\u6D77\u62A5",link:"https://www.chuangkit.com/"},{text:"\u6B63\u5219\u8868\u8FBE\u5F0F",link:"https://any86.github.io/any-rule/"},{text:"\u56FE\u7247\u6E05\u9664\u80CC\u666F",link:"https://remove.bg/"},{text:"\u5C0F\u5FBD\u7AE0",link:"https://shields.io/"},{text:"\u6570\u636E\u7ED3\u6784/\u7B97\u6CD5\u52A8\u6001\u53EF\u89C6\u5316",link:"https://visualgo.net/zh"},{text:"AST Explorer",link:"https://astexplorer.net/"},{text:"Apifox",link:"https://www.apifox.cn/"}]},{text:"\u6478\u9C7C\u5FC5\u5907",children:[{text:"\u5728\u7EBF\u8857\u673A",link:"https://www.yikm.net/"},{text:"\u5047\u88C5\u66F4\u65B0\u7CFB\u7EDF",link:"https://fakeupdate.net/"},{text:"\u5728\u7EBF\u770B\u5927\u718A\u732B",link:"http://live.ipanda.com/xmcd/"},{text:"\u77E5\u4E4E",link:"https://www.zhihu.com/people/woniuppp"},{text:"B\u7AD9",link:"https://space.bilibili.com/26995758"},{text:"\u4E91\u65C5\u6E38",link:"https://livechina.cctv.com/mlzg/index.shtml?spm=0.PiHRJ12Bw7m4.EVbEpxjQVGbO.4"},{text:"\u4E91\u6E38\u6545\u5BAB",link:"https://www.dpm.org.cn/yygg.html"}]},{text:"Github",link:"https://github.com/thunder-gzy/guziyi.git"}],sidebar:["/fe/README.md",{text:"\u5165\u95E8\u5B9E\u6218",children:["/fe/css.md","/fe/Javascript.md","/fe/project.md","/fe/interview.md","/fe/server.md"]},{text:"\u5B9E\u6218\u8FDB\u9636",children:["/fe/vue.md","/fe/react.md","/fe/typescript.md","/fe/node.md","/fe/fis.md","/fe/arch.md","/fe/perf.md","/fe/browser.md"]},{text:"\u901A\u7528\u6280\u80FD",children:["/it/soft.md","/it/internet.md","/it/algorithm.md"]},{text:"\u7528\u5230\u518D\u5B66",children:["/fe/miniapp.md","/fe/app.md","/fe/hot.md"]},{text:"\u5C0F\u5DE5\u5177",children:["/tools/weibo.md"]}],locales:{"/":{selectLanguageName:"English"}},darkMode:!0,repo:null,selectLanguageText:"Languages",selectLanguageAriaLabel:"Select language",sidebarDepth:2,editLink:!0,lastUpdated:!0,backToHome:"Take me home",openInNewWindow:"open in new window",toggleDarkMode:"toggle dark mode",toggleSidebar:"toggle sidebar"},wa=Te(wf),Cf=()=>wa;gn.webpackHot&&(__VUE_HMR_RUNTIME__.updateThemeData=e=>{wa.value=e});const Ca=Symbol(""),xf=()=>{const e=ke(Ca);if(!e)throw new Error("useThemeLocaleData() is called without provider.");return e},Sf=(e,t)=>{var g;return{...e,...(g=e.locales)===null||g===void 0?void 0:g[t]}},Dr=()=>xf(),Tf={class:"sr-only"},Of=Ge({setup(e){const t=Dr();return(g,m)=>(Qe(),pr(st(Er),null,{default:bo(()=>[Ne("span",Tf,Zn(st(t).openInNewWindow),1)]),_:1}))}});var Ef=Ei(({app:e,router:t})=>{e.component("Badge",Vu),e.component("CodeGroup",Gu),e.component("CodeGroupItem",Ju),delete e._context.components.OutboundLink,e.component("OutboundLink",Of),e.component("NavbarSearch",()=>{const m=e.component("Docsearch")||e.component("SearchBox");return m?_e(m):null});const g=t.options.scrollBehavior;t.options.scrollBehavior=async(...m)=>(await pf().wait(),g(...m))});/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */var Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var g=arguments[t];for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(e[m]=g[m])}return e},Fi=function(t){return t.tagName==="IMG"},Pf=function(t){return NodeList.prototype.isPrototypeOf(t)},Bi=function(t){return t&&t.nodeType===1},Fs=function(t){var g=t.currentSrc||t.src;return g.substr(-4).toLowerCase()===".svg"},Is=function(t){try{return Array.isArray(t)?t.filter(Fi):Pf(t)?[].slice.call(t).filter(Fi):Bi(t)?[t].filter(Fi):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(Fi):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},Af=function(t){var g=document.createElement("div");return g.classList.add("medium-zoom-overlay"),g.style.background=t,g},kf=function(t){var g=t.getBoundingClientRect(),m=g.top,_=g.left,y=g.width,x=g.height,f=t.cloneNode(),i=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return f.removeAttribute("id"),f.style.position="absolute",f.style.top=m+i+"px",f.style.left=_+c+"px",f.style.width=y+"px",f.style.height=x+"px",f.style.transform="",f},It=function(t,g){var m=Ct({bubbles:!1,cancelable:!1,detail:void 0},g);if(typeof window.CustomEvent=="function")return new CustomEvent(t,m);var _=document.createEvent("CustomEvent");return _.initCustomEvent(t,m.bubbles,m.cancelable,m.detail),_},Df=function e(t){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=window.Promise||function(E){function D(){}E(D,D)},_=function(E){var D=E.target;if(D===T){u();return}p.indexOf(D)!==-1&&l({target:D})},y=function(){if(!(b||!S.original)){var E=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(C-E)>w.scrollOffset&&setTimeout(u,150)}},x=function(E){var D=E.key||E.keyCode;(D==="Escape"||D==="Esc"||D===27)&&u()},f=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=E;if(E.background&&(T.style.background=E.background),E.container&&E.container instanceof Object&&(D.container=Ct({},w.container,E.container)),E.template){var N=Bi(E.template)?E.template:document.querySelector(E.template);D.template=N}return w=Ct({},w,D),p.forEach(function(K){K.dispatchEvent(It("medium-zoom:update",{detail:{zoom:A}}))}),A},i=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(Ct({},w,E))},c=function(){for(var E=arguments.length,D=Array(E),N=0;N<E;N++)D[N]=arguments[N];var K=D.reduce(function(U,Q){return[].concat(U,Is(Q))},[]);return K.filter(function(U){return p.indexOf(U)===-1}).forEach(function(U){p.push(U),U.classList.add("medium-zoom-image")}),v.forEach(function(U){var Q=U.type,re=U.listener,k=U.options;K.forEach(function(z){z.addEventListener(Q,re,k)})}),A},r=function(){for(var E=arguments.length,D=Array(E),N=0;N<E;N++)D[N]=arguments[N];S.zoomed&&u();var K=D.length>0?D.reduce(function(U,Q){return[].concat(U,Is(Q))},[]):p;return K.forEach(function(U){U.classList.remove("medium-zoom-image"),U.dispatchEvent(It("medium-zoom:detach",{detail:{zoom:A}}))}),p=p.filter(function(U){return K.indexOf(U)===-1}),A},n=function(E,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return p.forEach(function(K){K.addEventListener("medium-zoom:"+E,D,N)}),v.push({type:"medium-zoom:"+E,listener:D,options:N}),A},o=function(E,D){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return p.forEach(function(K){K.removeEventListener("medium-zoom:"+E,D,N)}),v=v.filter(function(K){return!(K.type==="medium-zoom:"+E&&K.listener.toString()===D.toString())}),A},a=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=E.target,N=function(){var U={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},Q=void 0,re=void 0;if(w.container)if(w.container instanceof Object)U=Ct({},U,w.container),Q=U.width-U.left-U.right-w.margin*2,re=U.height-U.top-U.bottom-w.margin*2;else{var k=Bi(w.container)?w.container:document.querySelector(w.container),z=k.getBoundingClientRect(),W=z.width,G=z.height,le=z.left,F=z.top;U=Ct({},U,{width:W,height:G,left:le,top:F})}Q=Q||U.width-w.margin*2,re=re||U.height-w.margin*2;var O=S.zoomedHd||S.original,R=Fs(O)?Q:O.naturalWidth||Q,I=Fs(O)?re:O.naturalHeight||re,X=O.getBoundingClientRect(),V=X.top,ee=X.left,$=X.width,se=X.height,P=Math.min(R,Q)/$,L=Math.min(I,re)/se,B=Math.min(P,L),H=(-ee+(Q-$)/2+w.margin+U.left)/B,Y=(-V+(re-se)/2+w.margin+U.top)/B,Z="scale("+B+") translate3d("+H+"px, "+Y+"px, 0)";S.zoomed.style.transform=Z,S.zoomedHd&&(S.zoomedHd.style.transform=Z)};return new m(function(K){if(D&&p.indexOf(D)===-1){K(A);return}var U=function W(){b=!1,S.zoomed.removeEventListener("transitionend",W),S.original.dispatchEvent(It("medium-zoom:opened",{detail:{zoom:A}})),K(A)};if(S.zoomed){K(A);return}if(D)S.original=D;else if(p.length>0){var Q=p;S.original=Q[0]}else{K(A);return}if(S.original.dispatchEvent(It("medium-zoom:open",{detail:{zoom:A}})),C=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,b=!0,S.zoomed=kf(S.original),document.body.appendChild(T),w.template){var re=Bi(w.template)?w.template:document.querySelector(w.template);S.template=document.createElement("div"),S.template.appendChild(re.content.cloneNode(!0)),document.body.appendChild(S.template)}if(document.body.appendChild(S.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),S.original.classList.add("medium-zoom-image--hidden"),S.zoomed.classList.add("medium-zoom-image--opened"),S.zoomed.addEventListener("click",u),S.zoomed.addEventListener("transitionend",U),S.original.getAttribute("data-zoom-src")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("srcset"),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.src=S.zoomed.getAttribute("data-zoom-src"),S.zoomedHd.onerror=function(){clearInterval(k),console.warn("Unable to reach the zoom image target "+S.zoomedHd.src),S.zoomedHd=null,N()};var k=setInterval(function(){S.zoomedHd.complete&&(clearInterval(k),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",u),document.body.appendChild(S.zoomedHd),N())},10)}else if(S.original.hasAttribute("srcset")){S.zoomedHd=S.zoomed.cloneNode(),S.zoomedHd.removeAttribute("sizes"),S.zoomedHd.removeAttribute("loading");var z=S.zoomedHd.addEventListener("load",function(){S.zoomedHd.removeEventListener("load",z),S.zoomedHd.classList.add("medium-zoom-image--opened"),S.zoomedHd.addEventListener("click",u),document.body.appendChild(S.zoomedHd),N()})}else N()})},u=function(){return new m(function(E){if(b||!S.original){E(A);return}var D=function N(){S.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(S.zoomed),S.zoomedHd&&document.body.removeChild(S.zoomedHd),document.body.removeChild(T),S.zoomed.classList.remove("medium-zoom-image--opened"),S.template&&document.body.removeChild(S.template),b=!1,S.zoomed.removeEventListener("transitionend",N),S.original.dispatchEvent(It("medium-zoom:closed",{detail:{zoom:A}})),S.original=null,S.zoomed=null,S.zoomedHd=null,S.template=null,E(A)};b=!0,document.body.classList.remove("medium-zoom--opened"),S.zoomed.style.transform="",S.zoomedHd&&(S.zoomedHd.style.transform=""),S.template&&(S.template.style.transition="opacity 150ms",S.template.style.opacity=0),S.original.dispatchEvent(It("medium-zoom:close",{detail:{zoom:A}})),S.zoomed.addEventListener("transitionend",D)})},l=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=E.target;return S.original?u():a({target:D})},s=function(){return w},h=function(){return p},d=function(){return S.original},p=[],v=[],b=!1,C=0,w=g,S={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?w=t:(t||typeof t=="string")&&c(t),w=Ct({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},w);var T=Af(w.background);document.addEventListener("click",_),document.addEventListener("keyup",x),document.addEventListener("scroll",y),window.addEventListener("resize",u);var A={open:a,close:u,toggle:l,update:f,clone:i,attach:c,detach:r,on:n,off:o,getOptions:s,getImages:h,getZoomedImage:d};return A};function Lf(e,t){t===void 0&&(t={});var g=t.insertAt;if(!(!e||typeof document=="undefined")){var m=document.head||document.getElementsByTagName("head")[0],_=document.createElement("style");_.type="text/css",g==="top"&&m.firstChild?m.insertBefore(_,m.firstChild):m.appendChild(_),_.styleSheet?_.styleSheet.cssText=e:_.appendChild(document.createTextNode(e))}}var Mf=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";Lf(Mf);var Rf=Df;const Ff=Symbol("mediumZoom");const If=".theme-default-content > img, .theme-default-content :not(a) > img",jf={},Bf=400;var Nf=Ei(({app:e,router:t})=>{const g=Rf(jf);g.refresh=(m=If)=>{g.detach(),g.attach(m)},e.provide(Ff,g),t.afterEach(()=>{setTimeout(()=>g.refresh(),Bf)})}),zf=Ei(({app:e})=>{const t=Cf(),g=e._context.provides[Tr],m=xe(()=>Sf(t.value,g.value));e.provide(Ca,m),Object.defineProperties(e.config.globalProperties,{$theme:{get(){return t.value}},$themeLocale:{get(){return m.value}}})});const Xf=({input:e,hotKeys:t})=>{const g=m=>{!e.value||t.value.length===0||m.target===document.body&&t.value.includes(m.key)&&(e.value.focus(),m.preventDefault())};tt(()=>{document.addEventListener("keydown",g)}),ln(()=>{document.removeEventListener("keydown",g)})},Hf=[{title:"\u524D\u7AEF\u5B66\u4E60\u8DEF\u7EBF",headers:[],path:"/",pathLocale:"/",extraFields:[]},{title:"\u4ECB\u7ECD",headers:[{level:2,title:"\u5173\u4E8E\u8FD9\u4E2A\u56FE\u8C31",slug:"\u5173\u4E8E\u8FD9\u4E2A\u56FE\u8C31",children:[]},{level:2,title:"\u5982\u4F55\u5171\u5EFA",slug:"\u5982\u4F55\u5171\u5EFA",children:[]}],path:"/fe/",pathLocale:"/",extraFields:[]},{title:"App\u5F00\u53D1",headers:[{level:2,title:"Flutter",slug:"flutter",children:[]},{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]}],path:"/fe/app.html",pathLocale:"/",extraFields:[]},{title:"\u9879\u76EE\u67B6\u6784",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u4ED8\u8D39\u6559\u7A0B",slug:"\u4ED8\u8D39\u6559\u7A0B",children:[]}],path:"/fe/arch.html",pathLocale:"/",extraFields:[]},{title:"\u6D4F\u89C8\u5668",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u4ED8\u8D39\u6559\u7A0B",slug:"\u4ED8\u8D39\u6559\u7A0B",children:[]}],path:"/fe/browser.html",pathLocale:"/",extraFields:[]},{title:"HTML + CSS \u5165\u95E8\u63A8\u8350",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]}],path:"/fe/css.html",pathLocale:"/",extraFields:[]},{title:"\u5DE5\u7A0B\u5316",headers:[{level:2,title:"\u6587\u6863",slug:"\u6587\u6863",children:[]},{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]}],path:"/fe/fis.html",pathLocale:"/",extraFields:[]},{title:"\u70ED\u95E8\u6280\u672F",headers:[{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]}],path:"/fe/hot.html",pathLocale:"/",extraFields:[]},{title:"\u9762\u8BD5",headers:[{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]}],path:"/fe/interview.html",pathLocale:"/",extraFields:[]},{title:"Javascript",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u4ED8\u8D39\u6559\u7A0B",slug:"\u4ED8\u8D39\u6559\u7A0B",children:[]}],path:"/fe/javascript.html",pathLocale:"/",extraFields:[]},{title:"\u5C0F\u7A0B\u5E8F",headers:[{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]}],path:"/fe/miniapp.html",pathLocale:"/",extraFields:[]},{title:"Node.js",headers:[{level:2,title:"\u6587\u6863",slug:"\u6587\u6863",children:[]},{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]}],path:"/fe/node.html",pathLocale:"/",extraFields:[]},{title:"\u6027\u80FD\u4F18\u5316",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4ED8\u8D39\u6559\u7A0B",slug:"\u4ED8\u8D39\u6559\u7A0B",children:[]}],path:"/fe/perf.html",pathLocale:"/",extraFields:[]},{title:"\u5B9E\u6218\u5F00\u53D1",headers:[{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]}],path:"/fe/project.html",pathLocale:"/",extraFields:[]},{title:"React",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u4ED8\u8D39\u8BFE\u7A0B",slug:"\u4ED8\u8D39\u8BFE\u7A0B",children:[]}],path:"/fe/react.html",pathLocale:"/",extraFields:[]},{title:"\u7F51\u7AD9\u642D\u5EFA",headers:[{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]}],path:"/fe/server.html",pathLocale:"/",extraFields:[]},{title:"test \u81EA\u52A8\u5316\u6D4B\u8BD5",headers:[],path:"/fe/test.html",pathLocale:"/",extraFields:[]},{title:"Typescript",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]}],path:"/fe/typescript.html",pathLocale:"/",extraFields:[]},{title:"Vue.js",headers:[{level:2,title:"\u6280\u672F\u6587\u6863",slug:"\u6280\u672F\u6587\u6863",children:[]},{level:2,title:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",slug:"\u514D\u8D39\u6587\u7AE0\u548C\u6559\u7A0B",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]}],path:"/fe/vue.html",pathLocale:"/",extraFields:[]},{title:"\u7A0B\u5E8F\u5458\u901A\u7528\u6280\u80FD",headers:[],path:"/it/",pathLocale:"/",extraFields:[]},{title:"\u7B97\u6CD5\u6570\u636E\u7ED3\u6784",headers:[{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u5B66\u4E60\u8D44\u6599",slug:"\u5B66\u4E60\u8D44\u6599",children:[]},{level:2,title:"\u5F00\u6E90\u9879\u76EE",slug:"\u5F00\u6E90\u9879\u76EE",children:[]},{level:2,title:"\u4ED8\u8D39\u6559\u7A0B",slug:"\u4ED8\u8D39\u6559\u7A0B",children:[]}],path:"/it/algorithm.html",pathLocale:"/",extraFields:[]},{title:"\u8BA1\u7B97\u673A\u7F51\u7EDC",headers:[{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u4ED8\u8D39\u6559\u7A0B",slug:"\u4ED8\u8D39\u6559\u7A0B",children:[]}],path:"/it/internet.html",pathLocale:"/",extraFields:[]},{title:"\u7A0B\u5E8F\u5458\u8F6F\u6280\u80FD",headers:[{level:2,title:"\u804C\u4E1A\u751F\u6DAF\u89C4\u5212",slug:"\u804C\u4E1A\u751F\u6DAF\u89C4\u5212",children:[]},{level:2,title:"\u7CBE\u54C1\u6587\u7AE0",slug:"\u7CBE\u54C1\u6587\u7AE0",children:[]},{level:2,title:"\u4E66\u7C4D\u63A8\u8350",slug:"\u4E66\u7C4D\u63A8\u8350",children:[]},{level:2,title:"\u514D\u8D39\u89C6\u9891",slug:"\u514D\u8D39\u89C6\u9891",children:[]},{level:2,title:"\u4ED8\u8D39\u6559\u7A0B",slug:"\u4ED8\u8D39\u6559\u7A0B",children:[]}],path:"/it/soft.html",pathLocale:"/",extraFields:[]},{title:"\u5B89\u5168\u53D1\u5FAE\u535A",headers:[],path:"/tools/weibo.html",pathLocale:"/",extraFields:[]},{title:"",headers:[],path:"/404.html",pathLocale:"/",extraFields:[]}],xa=Te(Hf),Wf=()=>xa;gn.webpackHot&&(__VUE_HMR_RUNTIME__.updateSearchIndex=e=>{xa.value=e});const Uf=/[^\x00-\x7F]/,Yf=e=>e.split(/\s+/g).map(t=>t.trim()).filter(t=>!!t),js=e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),Bs=(e,t)=>{const g=t.join(" "),m=Yf(e);if(Uf.test(e))return m.some(x=>g.toLowerCase().indexOf(x)>-1);const _=e.endsWith(" ");return new RegExp(m.map((x,f)=>m.length===f+1&&!_?`(?=.*\\b${js(x)})`:`(?=.*\\b${js(x)}\\b)`).join("")+".+","gi").test(g)},Vf=({searchIndex:e,routeLocale:t,query:g,maxSuggestions:m})=>{const _=xe(()=>e.value.filter(y=>y.pathLocale===t.value));return xe(()=>{const y=g.value.trim().toLowerCase();if(!y)return[];const x=[],f=(i,c)=>{Bs(y,[c.title])&&x.push({link:`${i.path}#${c.slug}`,title:i.title,header:c.title});for(const r of c.children){if(x.length>=m.value)return;f(i,r)}};for(const i of _.value){if(x.length>=m.value)break;if(Bs(y,[i.title,...i.extraFields])){x.push({link:i.path,title:i.title});continue}for(const c of i.headers){if(x.length>=m.value)break;f(i,c)}}return x})},Gf=e=>{const t=Te(0);return{focusIndex:t,focusNext:()=>{t.value<e.value.length-1?t.value+=1:t.value=0},focusPrev:()=>{t.value>0?t.value-=1:t.value=e.value.length-1}}},$f=Ge({name:"SearchBox",props:{locales:{type:Object,required:!1,default:()=>({})},hotKeys:{type:Array,required:!1,default:()=>[]},maxSuggestions:{type:Number,required:!1,default:5}},setup(e){const{locales:t,hotKeys:g,maxSuggestions:m}=Sl(e),_=fn(),y=Ru(),x=Wf(),f=Te(null),i=Te(!1),c=Te(""),r=xe(()=>{var p;return(p=t.value[y.value])!==null&&p!==void 0?p:{}}),n=Vf({searchIndex:x,routeLocale:y,query:c,maxSuggestions:m}),{focusIndex:o,focusNext:a,focusPrev:u}=Gf(n);Xf({input:f,hotKeys:g});const l=xe(()=>i.value&&!!n.value.length),s=()=>{!l.value||u()},h=()=>{!l.value||a()},d=p=>{if(!l.value)return;const v=n.value[p];!v||_.push(v.link).then(()=>{c.value="",o.value=0})};return()=>_e("form",{class:"search-box",role:"search"},[_e("input",{ref:f,type:"search",placeholder:r.value.placeholder,autocomplete:"off",spellcheck:!1,value:c.value,onFocus:()=>i.value=!0,onBlur:()=>i.value=!1,onInput:p=>c.value=p.target.value,onKeydown:p=>{switch(p.key){case"ArrowUp":{s();break}case"ArrowDown":{h();break}case"Enter":{p.preventDefault(),d(o.value);break}}}}),l.value&&_e("ul",{class:"suggestions",onMouseleave:()=>o.value=-1},n.value.map(({link:p,title:v,header:b},C)=>_e("li",{class:["suggestion",{focus:o.value===C}],onMouseenter:()=>o.value=C,onMousedown:()=>d(C)},_e("a",{href:p,onClick:w=>w.preventDefault()},[_e("span",{class:"page-title"},v),b&&_e("span",{class:"page-header"},`> ${b}`)]))))])}});const qf={},Kf=["s","/"],Jf=5;var Zf=Ei(({app:e})=>{e.component("SearchBox",t=>_e($f,{locales:qf,hotKeys:Kf,maxSuggestions:Jf,...t}))}),Qf="/all.png",Xt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ed(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(g){var m=Object.getOwnPropertyDescriptor(e,g);Object.defineProperty(t,g,m.get?m:{enumerable:!0,get:function(){return e[g]}})}),t}var $n={exports:{}};(function(e,t){(function(g,m){var _="1.0.2",y="",x="?",f="function",i="undefined",c="object",r="string",n="major",o="model",a="name",u="type",l="vendor",s="version",h="architecture",d="console",p="mobile",v="tablet",b="smarttv",C="wearable",w="embedded",S=255,T="Amazon",A="Apple",M="ASUS",E="BlackBerry",D="Browser",N="Chrome",K="Edge",U="Firefox",Q="Google",re="Huawei",k="LG",z="Microsoft",W="Motorola",G="Opera",le="Samsung",F="Sony",O="Xiaomi",R="Zebra",I="Facebook",X=function(j,J){var q={};for(var oe in j)J[oe]&&J[oe].length%2===0?q[oe]=J[oe].concat(j[oe]):q[oe]=j[oe];return q},V=function(j){for(var J={},q=0;q<j.length;q++)J[j[q].toUpperCase()]=j[q];return J},ee=function(j,J){return typeof j===r?$(J).indexOf($(j))!==-1:!1},$=function(j){return j.toLowerCase()},se=function(j){return typeof j===r?j.replace(/[^\d\.]/g,y).split(".")[0]:m},P=function(j,J){if(typeof j===r)return j=j.replace(/^\s\s*/,y).replace(/\s\s*$/,y),typeof J===i?j:j.substring(0,S)},L=function(j,J){for(var q=0,oe,ae,ue,ce,de,pe;q<J.length&&!de;){var Ie=J[q],it=J[q+1];for(oe=ae=0;oe<Ie.length&&!de;)if(de=Ie[oe++].exec(j),de)for(ue=0;ue<it.length;ue++)pe=de[++ae],ce=it[ue],typeof ce===c&&ce.length>0?ce.length===2?typeof ce[1]==f?this[ce[0]]=ce[1].call(this,pe):this[ce[0]]=ce[1]:ce.length===3?typeof ce[1]===f&&!(ce[1].exec&&ce[1].test)?this[ce[0]]=pe?ce[1].call(this,pe,ce[2]):m:this[ce[0]]=pe?pe.replace(ce[1],ce[2]):m:ce.length===4&&(this[ce[0]]=pe?ce[3].call(this,pe.replace(ce[1],ce[2])):m):this[ce]=pe||m;q+=2}},B=function(j,J){for(var q in J)if(typeof J[q]===c&&J[q].length>0){for(var oe=0;oe<J[q].length;oe++)if(ee(J[q][oe],j))return q===x?m:q}else if(ee(J[q],j))return q===x?m:q;return j},H={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[s,[a,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[s,[a,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[a,s],[/opios[\/ ]+([\w\.]+)/i],[s,[a,G+" Mini"]],[/\bopr\/([\w\.]+)/i],[s,[a,G]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[a,s],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[s,[a,"UC"+D]],[/\bqbcore\/([\w\.]+)/i],[s,[a,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[s,[a,"WeChat"]],[/konqueror\/([\w\.]+)/i],[s,[a,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[s,[a,"IE"]],[/yabrowser\/([\w\.]+)/i],[s,[a,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[a,/(.+)/,"$1 Secure "+D],s],[/\bfocus\/([\w\.]+)/i],[s,[a,U+" Focus"]],[/\bopt\/([\w\.]+)/i],[s,[a,G+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[s,[a,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[s,[a,"Dolphin"]],[/coast\/([\w\.]+)/i],[s,[a,G+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[s,[a,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[s,[a,U]],[/\bqihu|(qi?ho?o?|360)browser/i],[[a,"360 "+D]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[a,/(.+)/,"$1 "+D],s],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],s],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[a,s],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[a],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[a,I],s],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[a,s],[/\bgsa\/([\w\.]+) .*safari\//i],[s,[a,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[s,[a,N+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[a,N+" WebView"],s],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[s,[a,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[a,s],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[s,[a,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[s,a],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[a,[s,B,H]],[/(webkit|khtml)\/([\w\.]+)/i],[a,s],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[a,"Netscape"],s],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[s,[a,U+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[a,s]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,$]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,y,$]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,$]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[o,[l,le],[u,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[o,[l,le],[u,p]],[/\((ip(?:hone|od)[\w ]*);/i],[o,[l,A],[u,p]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[o,[l,A],[u,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[o,[l,re],[u,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[o,[l,re],[u,p]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[o,/_/g," "],[l,O],[u,p]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[o,/_/g," "],[l,O],[u,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[o,[l,"OPPO"],[u,p]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[o,[l,"Vivo"],[u,p]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[o,[l,"Realme"],[u,p]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[o,[l,W],[u,p]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[o,[l,W],[u,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[o,[l,k],[u,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[o,[l,k],[u,p]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[o,[l,"Lenovo"],[u,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[o,/_/g," "],[l,"Nokia"],[u,p]],[/(pixel c)\b/i],[o,[l,Q],[u,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[o,[l,Q],[u,p]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[o,[l,F],[u,p]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[o,"Xperia Tablet"],[l,F],[u,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[o,[l,"OnePlus"],[u,p]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[o,[l,T],[u,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[o,/(.+)/g,"Fire Phone $1"],[l,T],[u,p]],[/(playbook);[-\w\),; ]+(rim)/i],[o,l,[u,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[o,[l,E],[u,p]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[o,[l,M],[u,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[o,[l,M],[u,p]],[/(nexus 9)/i],[o,[l,"HTC"],[u,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[l,[o,/_/g," "],[u,p]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[o,[l,"Acer"],[u,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[o,[l,"Meizu"],[u,p]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[o,[l,"Sharp"],[u,p]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[l,o,[u,p]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[l,o,[u,v]],[/(surface duo)/i],[o,[l,z],[u,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[o,[l,"Fairphone"],[u,p]],[/(u304aa)/i],[o,[l,"AT&T"],[u,p]],[/\bsie-(\w*)/i],[o,[l,"Siemens"],[u,p]],[/\b(rct\w+) b/i],[o,[l,"RCA"],[u,v]],[/\b(venue[\d ]{2,7}) b/i],[o,[l,"Dell"],[u,v]],[/\b(q(?:mv|ta)\w+) b/i],[o,[l,"Verizon"],[u,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[o,[l,"Barnes & Noble"],[u,v]],[/\b(tm\d{3}\w+) b/i],[o,[l,"NuVision"],[u,v]],[/\b(k88) b/i],[o,[l,"ZTE"],[u,v]],[/\b(nx\d{3}j) b/i],[o,[l,"ZTE"],[u,p]],[/\b(gen\d{3}) b.+49h/i],[o,[l,"Swiss"],[u,p]],[/\b(zur\d{3}) b/i],[o,[l,"Swiss"],[u,v]],[/\b((zeki)?tb.*\b) b/i],[o,[l,"Zeki"],[u,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[l,"Dragon Touch"],o,[u,v]],[/\b(ns-?\w{0,9}) b/i],[o,[l,"Insignia"],[u,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[o,[l,"NextBook"],[u,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[l,"Voice"],o,[u,p]],[/\b(lvtel\-)?(v1[12]) b/i],[[l,"LvTel"],o,[u,p]],[/\b(ph-1) /i],[o,[l,"Essential"],[u,p]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[o,[l,"Envizen"],[u,v]],[/\b(trio[-\w\. ]+) b/i],[o,[l,"MachSpeed"],[u,v]],[/\btu_(1491) b/i],[o,[l,"Rotor"],[u,v]],[/(shield[\w ]+) b/i],[o,[l,"Nvidia"],[u,v]],[/(sprint) (\w+)/i],[l,o,[u,p]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[l,z],[u,p]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[o,[l,R],[u,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[o,[l,R],[u,p]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[l,o,[u,d]],[/droid.+; (shield) bui/i],[o,[l,"Nvidia"],[u,d]],[/(playstation [345portablevi]+)/i],[o,[l,F],[u,d]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[o,[l,z],[u,d]],[/smart-tv.+(samsung)/i],[l,[u,b]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[l,le],[u,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[l,k],[u,b]],[/(apple) ?tv/i],[l,[o,A+" TV"],[u,b]],[/crkey/i],[[o,N+"cast"],[l,Q],[u,b]],[/droid.+aft(\w)( bui|\))/i],[o,[l,T],[u,b]],[/\(dtv[\);].+(aquos)/i],[o,[l,"Sharp"],[u,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[l,P],[o,P],[u,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[u,b]],[/((pebble))app/i],[l,o,[u,C]],[/droid.+; (glass) \d/i],[o,[l,Q],[u,C]],[/droid.+; (wt63?0{2,3})\)/i],[o,[l,R],[u,C]],[/(quest( 2)?)/i],[o,[l,I],[u,C]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[l,[u,w]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[o,[u,p]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[o,[u,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[u,v]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[u,p]],[/(android[-\w\. ]{0,9});.+buil/i],[o,[l,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[s,[a,K+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[s,[a,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[a,s],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[s,a]],os:[[/microsoft (windows) (vista|xp)/i],[a,s],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[a,[s,B,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[a,"Windows"],[s,B,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[s,/_/g,"."],[a,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[a,"Mac OS"],[s,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[s,a],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[a,s],[/\(bb(10);/i],[s,[a,E]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[s,[a,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[s,[a,U+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[s,[a,"webOS"]],[/crkey\/([\d\.]+)/i],[s,[a,N+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[a,"Chromium OS"],s],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[a,s],[/(sunos) ?([\w\.\d]*)/i],[[a,"Solaris"],s],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[a,s]]},te=function(j,J){if(typeof j===c&&(J=j,j=m),!(this instanceof te))return new te(j,J).getResult();var q=j||(typeof g!==i&&g.navigator&&g.navigator.userAgent?g.navigator.userAgent:y),oe=J?X(Z,J):Z;return this.getBrowser=function(){var ae={};return ae[a]=m,ae[s]=m,L.call(ae,q,oe.browser),ae.major=se(ae.version),ae},this.getCPU=function(){var ae={};return ae[h]=m,L.call(ae,q,oe.cpu),ae},this.getDevice=function(){var ae={};return ae[l]=m,ae[o]=m,ae[u]=m,L.call(ae,q,oe.device),ae},this.getEngine=function(){var ae={};return ae[a]=m,ae[s]=m,L.call(ae,q,oe.engine),ae},this.getOS=function(){var ae={};return ae[a]=m,ae[s]=m,L.call(ae,q,oe.os),ae},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return q},this.setUA=function(ae){return q=typeof ae===r&&ae.length>S?P(ae,S):ae,this},this.setUA(q),this};te.VERSION=_,te.BROWSER=V([a,s,n]),te.CPU=V([h]),te.DEVICE=V([o,l,u,d,p,b,v,C,w]),te.ENGINE=te.OS=V([a,s]),e.exports&&(t=e.exports=te),t.UAParser=te;var ie=typeof g!==i&&(g.jQuery||g.Zepto);if(ie&&!ie.ua){var ne=new te;ie.ua=ne.getResult(),ie.ua.get=function(){return ne.getUA()},ie.ua.set=function(j){ne.setUA(j);var J=ne.getResult();for(var q in J)ie.ua[q]=J[q]}}})(typeof window=="object"?window:Xt)})($n,$n.exports);var td=$n.exports,Le={},id={},nd=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:id}),Pn=ed(nd);(function(e){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var t=t||{version:"3.6.3"};if(e.fabric=t,typeof document!="undefined"&&typeof window!="undefined")document instanceof(typeof HTMLDocument!="undefined"?HTMLDocument:Document)?t.document=document:t.document=document.implementation.createHTMLDocument(""),t.window=window;else{var g=Pn,m=new g.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;t.document=m.document,t.jsdomImplForWrapper=Pn.implForWrapper,t.nodeCanvas=Pn.Canvas,t.window=m,DOMParser=t.window.DOMParser}t.isTouchSupported="ontouchstart"in t.window||"ontouchstart"in t.document||t.window&&t.window.navigator&&t.window.navigator.maxTouchPoints>0,t.isLikelyNode=typeof Buffer!="undefined"&&typeof window=="undefined",t.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],t.DPI=96,t.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",t.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,t.reNonWord=/[ \n\.,;!\?\-]/,t.fontPaths={},t.iMatrix=[1,0,0,1,0,0],t.svgNS="http://www.w3.org/2000/svg",t.perfLimitSizeTotal=2097152,t.maxCacheSideLimit=4096,t.minCacheSideLimit=256,t.charWidthsCache={},t.textureSize=2048,t.disableStyleCopyPaste=!1,t.enableGLFiltering=!0,t.devicePixelRatio=t.window.devicePixelRatio||t.window.webkitDevicePixelRatio||t.window.mozDevicePixelRatio||1,t.browserShadowBlurConstant=1,t.arcToSegmentsCache={},t.boundsOfCurveCache={},t.cachesBoundsOfCurve=!0,t.forceGLPutImageData=!1,t.initFilterBackend=function(){if(t.enableGLFiltering&&t.isWebglSupported&&t.isWebglSupported(t.textureSize))return console.log("max texture size: "+t.maxTextureSize),new t.WebglFilterBackend({tileSize:t.textureSize});if(t.Canvas2dFilterBackend)return new t.Canvas2dFilterBackend},typeof document!="undefined"&&typeof window!="undefined"&&(window.fabric=t),function(){function f(n,o){if(!!this.__eventListeners[n]){var a=this.__eventListeners[n];o?a[a.indexOf(o)]=!1:t.util.array.fill(a,!1)}}function i(n,o){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var a in n)this.on(a,n[a]);else this.__eventListeners[n]||(this.__eventListeners[n]=[]),this.__eventListeners[n].push(o);return this}function c(n,o){if(!this.__eventListeners)return this;if(arguments.length===0)for(n in this.__eventListeners)f.call(this,n);else if(arguments.length===1&&typeof arguments[0]=="object")for(var a in n)f.call(this,a,n[a]);else f.call(this,n,o);return this}function r(n,o){if(!this.__eventListeners)return this;var a=this.__eventListeners[n];if(!a)return this;for(var u=0,l=a.length;u<l;u++)a[u]&&a[u].call(this,o||{});return this.__eventListeners[n]=a.filter(function(s){return s!==!1}),this}t.Observable={observe:i,stopObserving:c,fire:r,on:i,off:c,trigger:r}}(),t.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var f=0,i=arguments.length;f<i;f++)this._onObjectAdded(arguments[f]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(f,i,c){var r=this._objects;return c?r[i]=f:r.splice(i,0,f),this._onObjectAdded&&this._onObjectAdded(f),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var f=this._objects,i,c=!1,r=0,n=arguments.length;r<n;r++)i=f.indexOf(arguments[r]),i!==-1&&(c=!0,f.splice(i,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&c&&this.requestRenderAll(),this},forEachObject:function(f,i){for(var c=this.getObjects(),r=0,n=c.length;r<n;r++)f.call(i,c[r],r,c);return this},getObjects:function(f){return typeof f=="undefined"?this._objects.concat():this._objects.filter(function(i){return i.type===f})},item:function(f){return this._objects[f]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(f){return this._objects.indexOf(f)>-1},complexity:function(){return this._objects.reduce(function(f,i){return f+=i.complexity?i.complexity():0,f},0)}},t.CommonMethods={_setOptions:function(f){for(var i in f)this.set(i,f[i])},_initGradient:function(f,i){f&&f.colorStops&&!(f instanceof t.Gradient)&&this.set(i,new t.Gradient(f))},_initPattern:function(f,i,c){f&&f.source&&!(f instanceof t.Pattern)?this.set(i,new t.Pattern(f,c)):c&&c()},_initClipping:function(f){if(!(!f.clipTo||typeof f.clipTo!="string")){var i=t.util.getFunctionBody(f.clipTo);typeof i!="undefined"&&(this.clipTo=new Function("ctx",i))}},_setObject:function(f){for(var i in f)this._set(i,f[i])},set:function(f,i){return typeof f=="object"?this._setObject(f):typeof i=="function"&&f!=="clipTo"?this._set(f,i(this.get(f))):this._set(f,i),this},_set:function(f,i){this[f]=i},toggle:function(f){var i=this.get(f);return typeof i=="boolean"&&this.set(f,!i),this},get:function(f){return this[f]}},function(f){var i=Math.sqrt,c=Math.atan2,r=Math.pow,n=Math.PI/180,o=Math.PI/2;t.util={cos:function(a){if(a===0)return 1;a<0&&(a=-a);var u=a/o;switch(u){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},sin:function(a){if(a===0)return 0;var u=a/o,l=1;switch(a<0&&(l=-1),u){case 1:return l;case 2:return 0;case 3:return-l}return Math.sin(a)},removeFromArray:function(a,u){var l=a.indexOf(u);return l!==-1&&a.splice(l,1),a},getRandomInt:function(a,u){return Math.floor(Math.random()*(u-a+1))+a},degreesToRadians:function(a){return a*n},radiansToDegrees:function(a){return a/n},rotatePoint:function(a,u,l){a.subtractEquals(u);var s=t.util.rotateVector(a,l);return new t.Point(s.x,s.y).addEquals(u)},rotateVector:function(a,u){var l=t.util.sin(u),s=t.util.cos(u),h=a.x*s-a.y*l,d=a.x*l+a.y*s;return{x:h,y:d}},transformPoint:function(a,u,l){return l?new t.Point(u[0]*a.x+u[2]*a.y,u[1]*a.x+u[3]*a.y):new t.Point(u[0]*a.x+u[2]*a.y+u[4],u[1]*a.x+u[3]*a.y+u[5])},makeBoundingBoxFromPoints:function(a,u){if(u)for(var l=0;l<a.length;l++)a[l]=t.util.transformPoint(a[l],u);var s=[a[0].x,a[1].x,a[2].x,a[3].x],h=t.util.array.min(s),d=t.util.array.max(s),p=d-h,v=[a[0].y,a[1].y,a[2].y,a[3].y],b=t.util.array.min(v),C=t.util.array.max(v),w=C-b;return{left:h,top:b,width:p,height:w}},invertTransform:function(a){var u=1/(a[0]*a[3]-a[1]*a[2]),l=[u*a[3],-u*a[1],-u*a[2],u*a[0]],s=t.util.transformPoint({x:a[4],y:a[5]},l,!0);return l[4]=-s.x,l[5]=-s.y,l},toFixed:function(a,u){return parseFloat(Number(a).toFixed(u))},parseUnit:function(a,u){var l=/\D{0,2}$/.exec(a),s=parseFloat(a);switch(u||(u=t.Text.DEFAULT_SVG_FONT_SIZE),l[0]){case"mm":return s*t.DPI/25.4;case"cm":return s*t.DPI/2.54;case"in":return s*t.DPI;case"pt":return s*t.DPI/72;case"pc":return s*t.DPI/72*12;case"em":return s*u;default:return s}},falseFunction:function(){return!1},getKlass:function(a,u){return a=t.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1)),t.util.resolveNamespace(u)[a]},getSvgAttributes:function(a){var u=["instantiated_by_use","style","id","class"];switch(a){case"linearGradient":u=u.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":u=u.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":u=u.concat(["offset","stop-color","stop-opacity"]);break}return u},resolveNamespace:function(a){if(!a)return t;var u=a.split("."),l=u.length,s,h=f||t.window;for(s=0;s<l;++s)h=h[u[s]];return h},loadImage:function(a,u,l,s){if(!a){u&&u.call(l,a);return}var h=t.util.createImage(),d=function(){u&&u.call(l,h),h=h.onload=h.onerror=null};h.onload=d,h.onerror=function(){t.log("Error loading "+h.src),u&&u.call(l,null,!0),h=h.onload=h.onerror=null},a.indexOf("data")!==0&&s&&(h.crossOrigin=s),a.substring(0,14)==="data:image/svg"&&(h.onload=null,t.util.loadImageInDom(h,d)),h.src=a},loadImageInDom:function(a,u){var l=t.document.createElement("div");l.style.width=l.style.height="1px",l.style.left=l.style.top="-100%",l.style.position="absolute",l.appendChild(a),t.document.querySelector("body").appendChild(l),a.onload=function(){u(),l.parentNode.removeChild(l),l=null}},enlivenObjects:function(a,u,l,s){a=a||[];var h=[],d=0,p=a.length;function v(){++d===p&&u&&u(h.filter(function(b){return b}))}if(!p){u&&u(h);return}a.forEach(function(b,C){if(!b||!b.type){v();return}var w=t.util.getKlass(b.type,l);w.fromObject(b,function(S,T){T||(h[C]=S),s&&s(b,S,T),v()})})},enlivenPatterns:function(a,u){a=a||[];function l(){++h===d&&u&&u(s)}var s=[],h=0,d=a.length;if(!d){u&&u(s);return}a.forEach(function(p,v){p&&p.source?new t.Pattern(p,function(b){s[v]=b,l()}):(s[v]=p,l())})},groupSVGElements:function(a,u,l){var s;return a&&a.length===1?a[0]:(u&&(u.width&&u.height?u.centerPoint={x:u.width/2,y:u.height/2}:(delete u.width,delete u.height)),s=new t.Group(a,u),typeof l!="undefined"&&(s.sourcePath=l),s)},populateWithProperties:function(a,u,l){if(l&&Object.prototype.toString.call(l)==="[object Array]")for(var s=0,h=l.length;s<h;s++)l[s]in a&&(u[l[s]]=a[l[s]])},drawDashedLine:function(a,u,l,s,h,d){var p=s-u,v=h-l,b=i(p*p+v*v),C=c(v,p),w=d.length,S=0,T=!0;for(a.save(),a.translate(u,l),a.moveTo(0,0),a.rotate(C),u=0;b>u;)u+=d[S++%w],u>b&&(u=b),a[T?"lineTo":"moveTo"](u,0),T=!T;a.restore()},createCanvasElement:function(){return t.document.createElement("canvas")},copyCanvasElement:function(a){var u=t.util.createCanvasElement();return u.width=a.width,u.height=a.height,u.getContext("2d").drawImage(a,0,0),u},toDataURL:function(a,u,l){return a.toDataURL("image/"+u,l)},createImage:function(){return t.document.createElement("img")},clipContext:function(a,u){u.save(),u.beginPath(),a.clipTo(u),u.clip()},multiplyTransformMatrices:function(a,u,l){return[a[0]*u[0]+a[2]*u[1],a[1]*u[0]+a[3]*u[1],a[0]*u[2]+a[2]*u[3],a[1]*u[2]+a[3]*u[3],l?0:a[0]*u[4]+a[2]*u[5]+a[4],l?0:a[1]*u[4]+a[3]*u[5]+a[5]]},qrDecompose:function(a){var u=c(a[1],a[0]),l=r(a[0],2)+r(a[1],2),s=i(l),h=(a[0]*a[3]-a[2]*a[1])/s,d=c(a[0]*a[2]+a[1]*a[3],l);return{angle:u/n,scaleX:s,scaleY:h,skewX:d/n,skewY:0,translateX:a[4],translateY:a[5]}},calcRotateMatrix:function(a){if(!a.angle)return t.iMatrix.concat();var u=t.util.degreesToRadians(a.angle),l=t.util.cos(u),s=t.util.sin(u);return[l,s,-s,l,0,0]},calcDimensionsMatrix:function(a){var u=typeof a.scaleX=="undefined"?1:a.scaleX,l=typeof a.scaleY=="undefined"?1:a.scaleY,s=[a.flipX?-u:u,0,0,a.flipY?-l:l,0,0],h=t.util.multiplyTransformMatrices,d=t.util.degreesToRadians;return a.skewX&&(s=h(s,[1,0,Math.tan(d(a.skewX)),1],!0)),a.skewY&&(s=h(s,[1,Math.tan(d(a.skewY)),0,1],!0)),s},composeMatrix:function(a){var u=[1,0,0,1,a.translateX||0,a.translateY||0],l=t.util.multiplyTransformMatrices;return a.angle&&(u=l(u,t.util.calcRotateMatrix(a))),(a.scaleX||a.scaleY||a.skewX||a.skewY||a.flipX||a.flipY)&&(u=l(u,t.util.calcDimensionsMatrix(a))),u},customTransformMatrix:function(a,u,l){return t.util.composeMatrix({scaleX:a,scaleY:u,skewX:l})},resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.rotate(0)},saveObjectTransform:function(a){return{scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}},getFunctionBody:function(a){return(String(a).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(a,u,l,s){s>0&&(u>s?u-=s:u=0,l>s?l-=s:l=0);var h=!0,d,p,v=a.getImageData(u,l,s*2||1,s*2||1),b=v.data.length;for(d=3;d<b&&(p=v.data[d],h=p<=0,h!==!1);d+=4);return v=null,h},parsePreserveAspectRatioAttribute:function(a){var u="meet",l="Mid",s="Mid",h=a.split(" "),d;return h&&h.length&&(u=h.pop(),u!=="meet"&&u!=="slice"?(d=u,u="meet"):h.length&&(d=h.pop())),l=d!=="none"?d.slice(1,4):"none",s=d!=="none"?d.slice(5,8):"none",{meetOrSlice:u,alignX:l,alignY:s}},clearFabricFontCache:function(a){a=(a||"").toLowerCase(),a?t.charWidthsCache[a]&&delete t.charWidthsCache[a]:t.charWidthsCache={}},limitDimsByArea:function(a,u){var l=Math.sqrt(u*a),s=Math.floor(u/l);return{x:Math.floor(l),y:s}},capValue:function(a,u,l){return Math.max(a,Math.min(u,l))},findScaleToFit:function(a,u){return Math.min(u.width/a.width,u.height/a.height)},findScaleToCover:function(a,u){return Math.max(u.width/a.width,u.height/a.height)},matrixToSVG:function(a){return"matrix("+a.map(function(u){return t.util.toFixed(u,t.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"}}}(e),function(){var f=Array.prototype.join;function i(o,a,u,l,s,h,d){var p=f.call(arguments);if(t.arcToSegmentsCache[p])return t.arcToSegmentsCache[p];var v=Math.PI,b=d*v/180,C=t.util.sin(b),w=t.util.cos(b),S=0,T=0;u=Math.abs(u),l=Math.abs(l);var A=-w*o*.5-C*a*.5,M=-w*a*.5+C*o*.5,E=u*u,D=l*l,N=M*M,K=A*A,U=E*D-E*N-D*K,Q=0;if(U<0){var re=Math.sqrt(1-U/(E*D));u*=re,l*=re}else Q=(s===h?-1:1)*Math.sqrt(U/(E*N+D*K));var k=Q*u*M/l,z=-Q*l*A/u,W=w*k-C*z+o*.5,G=C*k+w*z+a*.5,le=r(1,0,(A-k)/u,(M-z)/l),F=r((A-k)/u,(M-z)/l,(-A-k)/u,(-M-z)/l);h===0&&F>0?F-=2*v:h===1&&F<0&&(F+=2*v);for(var O=Math.ceil(Math.abs(F/v*2)),R=[],I=F/O,X=8/3*Math.sin(I/4)*Math.sin(I/4)/Math.sin(I/2),V=le+I,ee=0;ee<O;ee++)R[ee]=c(le,V,w,C,u,l,W,G,X,S,T),S=R[ee][4],T=R[ee][5],le=V,V+=I;return t.arcToSegmentsCache[p]=R,R}function c(o,a,u,l,s,h,d,p,v,b,C){var w=t.util.cos(o),S=t.util.sin(o),T=t.util.cos(a),A=t.util.sin(a),M=u*s*T-l*h*A+d,E=l*s*T+u*h*A+p,D=b+v*(-u*s*S-l*h*w),N=C+v*(-l*s*S+u*h*w),K=M+v*(u*s*A+l*h*T),U=E+v*(l*s*A-u*h*T);return[D,N,K,U,M,E]}function r(o,a,u,l){var s=Math.atan2(a,o),h=Math.atan2(l,u);return h>=s?h-s:2*Math.PI-(s-h)}t.util.drawArc=function(o,a,u,l){for(var s=l[0],h=l[1],d=l[2],p=l[3],v=l[4],b=l[5],C=l[6],w=[[],[],[],[]],S=i(b-a,C-u,s,h,p,v,d),T=0,A=S.length;T<A;T++)w[T][0]=S[T][0]+a,w[T][1]=S[T][1]+u,w[T][2]=S[T][2]+a,w[T][3]=S[T][3]+u,w[T][4]=S[T][4]+a,w[T][5]=S[T][5]+u,o.bezierCurveTo.apply(o,w[T])},t.util.getBoundsOfArc=function(o,a,u,l,s,h,d,p,v){for(var b=0,C=0,w,S=[],T=i(p-o,v-a,u,l,h,d,s),A=0,M=T.length;A<M;A++)w=n(b,C,T[A][0],T[A][1],T[A][2],T[A][3],T[A][4],T[A][5]),S.push({x:w[0].x+o,y:w[0].y+a}),S.push({x:w[1].x+o,y:w[1].y+a}),b=T[A][4],C=T[A][5];return S};function n(o,a,u,l,s,h,d,p){var v;if(t.cachesBoundsOfCurve&&(v=f.call(arguments),t.boundsOfCurveCache[v]))return t.boundsOfCurveCache[v];var b=Math.sqrt,C=Math.min,w=Math.max,S=Math.abs,T=[],A=[[],[]],M,E,D,N,K,U,Q,re;E=6*o-12*u+6*s,M=-3*o+9*u-9*s+3*d,D=3*u-3*o;for(var k=0;k<2;++k){if(k>0&&(E=6*a-12*l+6*h,M=-3*a+9*l-9*h+3*p,D=3*l-3*a),S(M)<1e-12){if(S(E)<1e-12)continue;N=-D/E,0<N&&N<1&&T.push(N);continue}Q=E*E-4*D*M,!(Q<0)&&(re=b(Q),K=(-E+re)/(2*M),0<K&&K<1&&T.push(K),U=(-E-re)/(2*M),0<U&&U<1&&T.push(U))}for(var z,W,G=T.length,le=G,F;G--;)N=T[G],F=1-N,z=F*F*F*o+3*F*F*N*u+3*F*N*N*s+N*N*N*d,A[0][G]=z,W=F*F*F*a+3*F*F*N*l+3*F*N*N*h+N*N*N*p,A[1][G]=W;A[0][le]=o,A[1][le]=a,A[0][le+1]=d,A[1][le+1]=p;var O=[{x:C.apply(null,A[0]),y:C.apply(null,A[1])},{x:w.apply(null,A[0]),y:w.apply(null,A[1])}];return t.cachesBoundsOfCurve&&(t.boundsOfCurveCache[v]=O),O}t.util.getBoundsOfCurve=n}(),function(){var f=Array.prototype.slice;function i(a,u){for(var l=f.call(arguments,2),s=[],h=0,d=a.length;h<d;h++)s[h]=l.length?a[h][u].apply(a[h],l):a[h][u].call(a[h]);return s}function c(a,u){return o(a,u,function(l,s){return l>=s})}function r(a,u){return o(a,u,function(l,s){return l<s})}function n(a,u){for(var l=a.length;l--;)a[l]=u;return a}function o(a,u,l){if(!(!a||a.length===0)){var s=a.length-1,h=u?a[s][u]:a[s];if(u)for(;s--;)l(a[s][u],h)&&(h=a[s][u]);else for(;s--;)l(a[s],h)&&(h=a[s]);return h}}t.util.array={fill:n,invoke:i,min:r,max:c}}(),function(){function f(c,r,n){if(n)if(!t.isLikelyNode&&r instanceof Element)c=r;else if(r instanceof Array){c=[];for(var o=0,a=r.length;o<a;o++)c[o]=f({},r[o],n)}else if(r&&typeof r=="object")for(var u in r)u==="canvas"?c[u]=f({},r[u]):r.hasOwnProperty(u)&&(c[u]=f({},r[u],n));else c=r;else for(var u in r)c[u]=r[u];return c}function i(c,r){return f({},c,r)}t.util.object={extend:f,clone:i},t.util.object.extend(t.util,t.Observable)}(),function(){function f(o){return o.replace(/-+(.)?/g,function(a,u){return u?u.toUpperCase():""})}function i(o,a){return o.charAt(0).toUpperCase()+(a?o.slice(1):o.slice(1).toLowerCase())}function c(o){return o.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(o){var a=0,u,l=[];for(a=0,u;a<o.length;a++)(u=n(o,a))!==!1&&l.push(u);return l}function n(o,a){var u=o.charCodeAt(a);if(isNaN(u))return"";if(u<55296||u>57343)return o.charAt(a);if(55296<=u&&u<=56319){if(o.length<=a+1)throw"High surrogate without following low surrogate";var l=o.charCodeAt(a+1);if(56320>l||l>57343)throw"High surrogate without following low surrogate";return o.charAt(a)+o.charAt(a+1)}if(a===0)throw"Low surrogate without preceding high surrogate";var s=o.charCodeAt(a-1);if(55296>s||s>56319)throw"Low surrogate without preceding high surrogate";return!1}t.util.string={camelize:f,capitalize:i,escapeXml:c,graphemeSplit:r}}(),function(){var f=Array.prototype.slice,i=function(){},c=function(){for(var u in{toString:1})if(u==="toString")return!1;return!0}(),r=function(u,l,s){for(var h in l)h in u.prototype&&typeof u.prototype[h]=="function"&&(l[h]+"").indexOf("callSuper")>-1?u.prototype[h]=function(d){return function(){var p=this.constructor.superclass;this.constructor.superclass=s;var v=l[d].apply(this,arguments);if(this.constructor.superclass=p,d!=="initialize")return v}}(h):u.prototype[h]=l[h],c&&(l.toString!==Object.prototype.toString&&(u.prototype.toString=l.toString),l.valueOf!==Object.prototype.valueOf&&(u.prototype.valueOf=l.valueOf))};function n(){}function o(u){for(var l=null,s=this;s.constructor.superclass;){var h=s.constructor.superclass.prototype[u];if(s[u]!==h){l=h;break}s=s.constructor.superclass.prototype}return l?arguments.length>1?l.apply(this,f.call(arguments,1)):l.call(this):console.log("tried to callSuper "+u+", method not found in prototype chain",this)}function a(){var u=null,l=f.call(arguments,0);typeof l[0]=="function"&&(u=l.shift());function s(){this.initialize.apply(this,arguments)}s.superclass=u,s.subclasses=[],u&&(n.prototype=u.prototype,s.prototype=new n,u.subclasses.push(s));for(var h=0,d=l.length;h<d;h++)r(s,l[h],u);return s.prototype.initialize||(s.prototype.initialize=i),s.prototype.constructor=s,s.prototype.callSuper=o,s}t.util.createClass=a}(),function(){var f=!!t.document.createElement("div").attachEvent;t.util.addListener=function(c,r,n,o){c&&c.addEventListener(r,n,f?!1:o)},t.util.removeListener=function(c,r,n,o){c&&c.removeEventListener(r,n,f?!1:o)};function i(c){var r=c.changedTouches;return r&&r[0]?r[0]:c}t.util.getPointer=function(c){var r=c.target,n=t.util.getScrollLeftTop(r),o=i(c);return{x:o.clientX+n.left,y:o.clientY+n.top}}}(),function(){function f(a,u){var l=a.style;if(!l)return a;if(typeof u=="string")return a.style.cssText+=";"+u,u.indexOf("opacity")>-1?o(a,u.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var s in u)if(s==="opacity")o(a,u[s]);else{var h=s==="float"||s==="cssFloat"?typeof l.styleFloat=="undefined"?"cssFloat":"styleFloat":s;l[h]=u[s]}return a}var i=t.document.createElement("div"),c=typeof i.style.opacity=="string",r=typeof i.style.filter=="string",n=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(a){return a};c?o=function(a,u){return a.style.opacity=u,a}:r&&(o=function(a,u){var l=a.style;return a.currentStyle&&!a.currentStyle.hasLayout&&(l.zoom=1),n.test(l.filter)?(u=u>=.9999?"":"alpha(opacity="+u*100+")",l.filter=l.filter.replace(n,u)):l.filter+=" alpha(opacity="+u*100+")",a}),t.util.setStyle=f}(),function(){var f=Array.prototype.slice;function i(p){return typeof p=="string"?t.document.getElementById(p):p}var c,r=function(p){return f.call(p,0)};try{c=r(t.document.childNodes)instanceof Array}catch{}c||(r=function(p){for(var v=new Array(p.length),b=p.length;b--;)v[b]=p[b];return v});function n(p,v){var b=t.document.createElement(p);for(var C in v)C==="class"?b.className=v[C]:C==="for"?b.htmlFor=v[C]:b.setAttribute(C,v[C]);return b}function o(p,v){p&&(" "+p.className+" ").indexOf(" "+v+" ")===-1&&(p.className+=(p.className?" ":"")+v)}function a(p,v,b){return typeof v=="string"&&(v=n(v,b)),p.parentNode&&p.parentNode.replaceChild(v,p),v.appendChild(p),v}function u(p){for(var v=0,b=0,C=t.document.documentElement,w=t.document.body||{scrollLeft:0,scrollTop:0};p&&(p.parentNode||p.host)&&(p=p.parentNode||p.host,p===t.document?(v=w.scrollLeft||C.scrollLeft||0,b=w.scrollTop||C.scrollTop||0):(v+=p.scrollLeft||0,b+=p.scrollTop||0),!(p.nodeType===1&&p.style.position==="fixed")););return{left:v,top:b}}function l(p){var v,b=p&&p.ownerDocument,C={left:0,top:0},w={left:0,top:0},S,T={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!b)return w;for(var A in T)w[T[A]]+=parseInt(s(p,A),10)||0;return v=b.documentElement,typeof p.getBoundingClientRect!="undefined"&&(C=p.getBoundingClientRect()),S=u(p),{left:C.left+S.left-(v.clientLeft||0)+w.left,top:C.top+S.top-(v.clientTop||0)+w.top}}var s;t.document.defaultView&&t.document.defaultView.getComputedStyle?s=function(p,v){var b=t.document.defaultView.getComputedStyle(p,null);return b?b[v]:void 0}:s=function(p,v){var b=p.style[v];return!b&&p.currentStyle&&(b=p.currentStyle[v]),b},function(){var p=t.document.documentElement.style,v="userSelect"in p?"userSelect":"MozUserSelect"in p?"MozUserSelect":"WebkitUserSelect"in p?"WebkitUserSelect":"KhtmlUserSelect"in p?"KhtmlUserSelect":"";function b(w){return typeof w.onselectstart!="undefined"&&(w.onselectstart=t.util.falseFunction),v?w.style[v]="none":typeof w.unselectable=="string"&&(w.unselectable="on"),w}function C(w){return typeof w.onselectstart!="undefined"&&(w.onselectstart=null),v?w.style[v]="":typeof w.unselectable=="string"&&(w.unselectable=""),w}t.util.makeElementUnselectable=b,t.util.makeElementSelectable=C}(),function(){function p(v,b){var C=t.document.getElementsByTagName("head")[0],w=t.document.createElement("script"),S=!0;w.onload=w.onreadystatechange=function(T){if(S){if(typeof this.readyState=="string"&&this.readyState!=="loaded"&&this.readyState!=="complete")return;S=!1,b(T||t.window.event),w=w.onload=w.onreadystatechange=null}},w.src=v,C.appendChild(w)}t.util.getScript=p}();function h(p){var v=t.jsdomImplForWrapper(p);return v._canvas||v._image}function d(p){if(!!t.isLikelyNode){var v=t.jsdomImplForWrapper(p);v&&(v._image=null,v._canvas=null,v._currentSrc=null,v._attributes=null,v._classList=null)}}t.util.getById=i,t.util.toArray=r,t.util.makeElement=n,t.util.addClass=o,t.util.wrapElement=a,t.util.getScrollLeftTop=u,t.util.getElementOffset=l,t.util.getElementStyle=s,t.util.getNodeCanvas=h,t.util.cleanUpJsdomNode=d}(),function(){function f(r,n){return r+(/\?/.test(r)?"&":"?")+n}function i(){}function c(r,n){n||(n={});var o=n.method?n.method.toUpperCase():"GET",a=n.onComplete||function(){},u=new t.window.XMLHttpRequest,l=n.body||n.parameters;return u.onreadystatechange=function(){u.readyState===4&&(a(u),u.onreadystatechange=i)},o==="GET"&&(l=null,typeof n.parameters=="string"&&(r=f(r,n.parameters))),u.open(o,r,!0),(o==="POST"||o==="PUT")&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(l),u}t.util.request=c}(),t.log=console.log,t.warn=console.warn,function(){function f(){return!1}function i(u,l,s,h){return-s*Math.cos(u/h*(Math.PI/2))+s+l}function c(u){o(function(l){u||(u={});var s=l||+new Date,h=u.duration||500,d=s+h,p,v=u.onChange||f,b=u.abort||f,C=u.onComplete||f,w=u.easing||i,S="startValue"in u?u.startValue:0,T="endValue"in u?u.endValue:100,A=u.byValue||T-S;u.onStart&&u.onStart(),function M(E){p=E||+new Date;var D=p>d?h:p-s,N=D/h,K=w(D,S,A,h),U=Math.abs((K-S)/A);if(b()){C(T,1,1);return}if(p>d){v(T,1,1),C(T,1,1);return}else v(K,U,N),o(M)}(s)})}var r=t.window.requestAnimationFrame||t.window.webkitRequestAnimationFrame||t.window.mozRequestAnimationFrame||t.window.oRequestAnimationFrame||t.window.msRequestAnimationFrame||function(u){return t.window.setTimeout(u,1e3/60)},n=t.window.cancelAnimationFrame||t.window.clearTimeout;function o(){return r.apply(t.window,arguments)}function a(){return n.apply(t.window,arguments)}t.util.animate=c,t.util.requestAnimFrame=o,t.util.cancelAnimFrame=a}(),function(){function f(c,r,n){var o="rgba("+parseInt(c[0]+n*(r[0]-c[0]),10)+","+parseInt(c[1]+n*(r[1]-c[1]),10)+","+parseInt(c[2]+n*(r[2]-c[2]),10);return o+=","+(c&&r?parseFloat(c[3]+n*(r[3]-c[3])):1),o+=")",o}function i(c,r,n,o){var a=new t.Color(c).getSource(),u=new t.Color(r).getSource();o=o||{},t.util.animate(t.util.object.extend(o,{duration:n||500,startValue:a,endValue:u,byValue:u,easing:function(l,s,h,d){var p=o.colorEasing?o.colorEasing(l,d):1-Math.cos(l/d*(Math.PI/2));return f(s,h,p)}}))}t.util.animateColor=i}(),function(){function f(k,z,W,G){return k<Math.abs(z)?(k=z,G=W/4):z===0&&k===0?G=W/(2*Math.PI)*Math.asin(1):G=W/(2*Math.PI)*Math.asin(z/k),{a:k,c:z,p:W,s:G}}function i(k,z,W){return k.a*Math.pow(2,10*(z-=1))*Math.sin((z*W-k.s)*(2*Math.PI)/k.p)}function c(k,z,W,G){return W*((k=k/G-1)*k*k+1)+z}function r(k,z,W,G){return k/=G/2,k<1?W/2*k*k*k+z:W/2*((k-=2)*k*k+2)+z}function n(k,z,W,G){return W*(k/=G)*k*k*k+z}function o(k,z,W,G){return-W*((k=k/G-1)*k*k*k-1)+z}function a(k,z,W,G){return k/=G/2,k<1?W/2*k*k*k*k+z:-W/2*((k-=2)*k*k*k-2)+z}function u(k,z,W,G){return W*(k/=G)*k*k*k*k+z}function l(k,z,W,G){return W*((k=k/G-1)*k*k*k*k+1)+z}function s(k,z,W,G){return k/=G/2,k<1?W/2*k*k*k*k*k+z:W/2*((k-=2)*k*k*k*k+2)+z}function h(k,z,W,G){return-W*Math.cos(k/G*(Math.PI/2))+W+z}function d(k,z,W,G){return W*Math.sin(k/G*(Math.PI/2))+z}function p(k,z,W,G){return-W/2*(Math.cos(Math.PI*k/G)-1)+z}function v(k,z,W,G){return k===0?z:W*Math.pow(2,10*(k/G-1))+z}function b(k,z,W,G){return k===G?z+W:W*(-Math.pow(2,-10*k/G)+1)+z}function C(k,z,W,G){return k===0?z:k===G?z+W:(k/=G/2,k<1?W/2*Math.pow(2,10*(k-1))+z:W/2*(-Math.pow(2,-10*--k)+2)+z)}function w(k,z,W,G){return-W*(Math.sqrt(1-(k/=G)*k)-1)+z}function S(k,z,W,G){return W*Math.sqrt(1-(k=k/G-1)*k)+z}function T(k,z,W,G){return k/=G/2,k<1?-W/2*(Math.sqrt(1-k*k)-1)+z:W/2*(Math.sqrt(1-(k-=2)*k)+1)+z}function A(k,z,W,G){var le=1.70158,F=0,O=W;if(k===0)return z;if(k/=G,k===1)return z+W;F||(F=G*.3);var R=f(O,W,F,le);return-i(R,k,G)+z}function M(k,z,W,G){var le=1.70158,F=0,O=W;if(k===0)return z;if(k/=G,k===1)return z+W;F||(F=G*.3);var R=f(O,W,F,le);return R.a*Math.pow(2,-10*k)*Math.sin((k*G-R.s)*(2*Math.PI)/R.p)+R.c+z}function E(k,z,W,G){var le=1.70158,F=0,O=W;if(k===0)return z;if(k/=G/2,k===2)return z+W;F||(F=G*(.3*1.5));var R=f(O,W,F,le);return k<1?-.5*i(R,k,G)+z:R.a*Math.pow(2,-10*(k-=1))*Math.sin((k*G-R.s)*(2*Math.PI)/R.p)*.5+R.c+z}function D(k,z,W,G,le){return le===void 0&&(le=1.70158),W*(k/=G)*k*((le+1)*k-le)+z}function N(k,z,W,G,le){return le===void 0&&(le=1.70158),W*((k=k/G-1)*k*((le+1)*k+le)+1)+z}function K(k,z,W,G,le){return le===void 0&&(le=1.70158),k/=G/2,k<1?W/2*(k*k*(((le*=1.525)+1)*k-le))+z:W/2*((k-=2)*k*(((le*=1.525)+1)*k+le)+2)+z}function U(k,z,W,G){return W-Q(G-k,0,W,G)+z}function Q(k,z,W,G){return(k/=G)<1/2.75?W*(7.5625*k*k)+z:k<2/2.75?W*(7.5625*(k-=1.5/2.75)*k+.75)+z:k<2.5/2.75?W*(7.5625*(k-=2.25/2.75)*k+.9375)+z:W*(7.5625*(k-=2.625/2.75)*k+.984375)+z}function re(k,z,W,G){return k<G/2?U(k*2,0,W,G)*.5+z:Q(k*2-G,0,W,G)*.5+W*.5+z}t.util.ease={easeInQuad:function(k,z,W,G){return W*(k/=G)*k+z},easeOutQuad:function(k,z,W,G){return-W*(k/=G)*(k-2)+z},easeInOutQuad:function(k,z,W,G){return k/=G/2,k<1?W/2*k*k+z:-W/2*(--k*(k-2)-1)+z},easeInCubic:function(k,z,W,G){return W*(k/=G)*k*k+z},easeOutCubic:c,easeInOutCubic:r,easeInQuart:n,easeOutQuart:o,easeInOutQuart:a,easeInQuint:u,easeOutQuint:l,easeInOutQuint:s,easeInSine:h,easeOutSine:d,easeInOutSine:p,easeInExpo:v,easeOutExpo:b,easeInOutExpo:C,easeInCirc:w,easeOutCirc:S,easeInOutCirc:T,easeInElastic:A,easeOutElastic:M,easeInOutElastic:E,easeInBack:D,easeOutBack:N,easeInOutBack:K,easeInBounce:U,easeOutBounce:Q,easeInOutBounce:re}}(),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.object.clone,n=i.util.toFixed,o=i.util.parseUnit,a=i.util.multiplyTransformMatrices,u=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],l=["symbol","image","marker","pattern","view","svg"],s=["pattern","defs","symbol","metadata","clipPath","mask","desc"],h=["symbol","g","a","svg","clipPath","defs"],d={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform"},p={stroke:"strokeOpacity",fill:"fillOpacity"},v="font-size",b="clip-path";i.svgValidTagNamesRegEx=S(u),i.svgViewBoxElementsRegEx=S(l),i.svgInvalidAncestorsRegEx=S(s),i.svgValidParentsRegEx=S(h),i.cssRules={},i.gradientDefs={},i.clipPaths={};function C(F){return F in d?d[F]:F}function w(F,O,R,I){var X=Object.prototype.toString.call(O)==="[object Array]",V;if((F==="fill"||F==="stroke")&&O==="none")O="";else if(F==="vector-effect")O=O==="non-scaling-stroke";else if(F==="strokeDashArray")O==="none"?O=null:O=O.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(F==="transformMatrix")R&&R.transformMatrix?O=a(R.transformMatrix,i.parseTransformAttribute(O)):O=i.parseTransformAttribute(O);else if(F==="visible")O=O!=="none"&&O!=="hidden",R&&R.visible===!1&&(O=!1);else if(F==="opacity")O=parseFloat(O),R&&typeof R.opacity!="undefined"&&(O*=R.opacity);else if(F==="textAnchor")O=O==="start"?"left":O==="end"?"right":"center";else if(F==="charSpacing")V=o(O,I)/I*1e3;else if(F==="paintFirst"){var ee=O.indexOf("fill"),$=O.indexOf("stroke"),O="fill";(ee>-1&&$>-1&&$<ee||ee===-1&&$>-1)&&(O="stroke")}else{if(F==="href"||F==="xlink:href")return O;V=X?O.map(o):o(O,I)}return!X&&isNaN(V)?O:V}function S(F){return new RegExp("^("+F.join("|")+")\\b","i")}function T(F){for(var O in p)if(!(typeof F[p[O]]=="undefined"||F[O]==="")){if(typeof F[O]=="undefined"){if(!i.Object.prototype[O])continue;F[O]=i.Object.prototype[O]}if(F[O].indexOf("url(")!==0){var R=new i.Color(F[O]);F[O]=R.setAlpha(n(R.getAlpha()*F[p[O]],2)).toRgba()}}return F}function A(F,O){var R,I=[],X,V,ee;for(V=0,ee=O.length;V<ee;V++)R=O[V],X=F.getElementsByTagName(R),I=I.concat(Array.prototype.slice.call(X));return I}i.parseTransformAttribute=function(){function F(j,J){var q=i.util.cos(J[0]),oe=i.util.sin(J[0]),ae=0,ue=0;J.length===3&&(ae=J[1],ue=J[2]),j[0]=q,j[1]=oe,j[2]=-oe,j[3]=q,j[4]=ae-(q*ae-oe*ue),j[5]=ue-(oe*ae+q*ue)}function O(j,J){var q=J[0],oe=J.length===2?J[1]:J[0];j[0]=q,j[3]=oe}function R(j,J,q){j[q]=Math.tan(i.util.degreesToRadians(J[0]))}function I(j,J){j[4]=J[0],J.length===2&&(j[5]=J[1])}var X=i.iMatrix,V=i.reNum,ee="(?:\\s+,?\\s*|,\\s*)",$="(?:(skewX)\\s*\\(\\s*("+V+")\\s*\\))",se="(?:(skewY)\\s*\\(\\s*("+V+")\\s*\\))",P="(?:(rotate)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+")"+ee+"("+V+"))?\\s*\\))",L="(?:(scale)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+"))?\\s*\\))",B="(?:(translate)\\s*\\(\\s*("+V+")(?:"+ee+"("+V+"))?\\s*\\))",H="(?:(matrix)\\s*\\(\\s*("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")"+ee+"("+V+")\\s*\\))",Y="(?:"+H+"|"+B+"|"+L+"|"+P+"|"+$+"|"+se+")",Z="(?:"+Y+"(?:"+ee+"*"+Y+")*)",te="^\\s*(?:"+Z+"?)\\s*$",ie=new RegExp(te),ne=new RegExp(Y,"g");return function(j){var J=X.concat(),q=[];if(!j||j&&!ie.test(j))return J;j.replace(ne,function(ae){var ue=new RegExp(Y).exec(ae).filter(function(pe){return!!pe}),ce=ue[1],de=ue.slice(2).map(parseFloat);switch(ce){case"translate":I(J,de);break;case"rotate":de[0]=i.util.degreesToRadians(de[0]),F(J,de);break;case"scale":O(J,de);break;case"skewX":R(J,de,2);break;case"skewY":R(J,de,1);break;case"matrix":J=de;break}q.push(J.concat()),J=X.concat()});for(var oe=q[0];q.length>1;)q.shift(),oe=i.util.multiplyTransformMatrices(oe,q[0]);return oe}}();function M(F,O){var R,I;F.replace(/;\s*$/,"").split(";").forEach(function(X){var V=X.split(":");R=V[0].trim().toLowerCase(),I=V[1].trim(),O[R]=I})}function E(F,O){var R,I;for(var X in F)typeof F[X]!="undefined"&&(R=X.toLowerCase(),I=F[X],O[R]=I)}function D(F,O){var R={};for(var I in i.cssRules[O])if(N(F,I.split(" ")))for(var X in i.cssRules[O][I])R[X]=i.cssRules[O][I][X];return R}function N(F,O){var R,I=!0;return R=U(F,O.pop()),R&&O.length&&(I=K(F,O)),R&&I&&O.length===0}function K(F,O){for(var R,I=!0;F.parentNode&&F.parentNode.nodeType===1&&O.length;)I&&(R=O.pop()),F=F.parentNode,I=U(F,R);return O.length===0}function U(F,O){var R=F.nodeName,I=F.getAttribute("class"),X=F.getAttribute("id"),V,ee;if(V=new RegExp("^"+R,"i"),O=O.replace(V,""),X&&O.length&&(V=new RegExp("#"+X+"(?![a-zA-Z\\-]+)","i"),O=O.replace(V,"")),I&&O.length)for(I=I.split(" "),ee=I.length;ee--;)V=new RegExp("\\."+I[ee]+"(?![a-zA-Z\\-]+)","i"),O=O.replace(V,"");return O.length===0}function Q(F,O){var R;if(F.getElementById&&(R=F.getElementById(O)),R)return R;var I,X,V,ee=F.getElementsByTagName("*");for(X=0,V=ee.length;X<V;X++)if(I=ee[X],O===I.getAttribute("id"))return I}function re(F){for(var O=A(F,["use","svg:use"]),R=0;O.length&&R<O.length;){var I=O[R],X=(I.getAttribute("xlink:href")||I.getAttribute("href")).substr(1),V=I.getAttribute("x")||0,ee=I.getAttribute("y")||0,$=Q(F,X).cloneNode(!0),se=($.getAttribute("transform")||"")+" translate("+V+", "+ee+")",P,L=O.length,B,H,Y,Z,te=i.svgNS;if(z($),/^svg$/i.test($.nodeName)){var ie=$.ownerDocument.createElementNS(te,"g");for(H=0,Y=$.attributes,Z=Y.length;H<Z;H++)B=Y.item(H),ie.setAttributeNS(te,B.nodeName,B.nodeValue);for(;$.firstChild;)ie.appendChild($.firstChild);$=ie}for(H=0,Y=I.attributes,Z=Y.length;H<Z;H++)B=Y.item(H),!(B.nodeName==="x"||B.nodeName==="y"||B.nodeName==="xlink:href"||B.nodeName==="href")&&(B.nodeName==="transform"?se=B.nodeValue+" "+se:$.setAttribute(B.nodeName,B.nodeValue));$.setAttribute("transform",se),$.setAttribute("instantiated_by_use","1"),$.removeAttribute("id"),P=I.parentNode,P.replaceChild($,I),O.length===L&&R++}}var k=new RegExp("^\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*,?\\s*("+i.reNum+"+)\\s*$");function z(F){var O=F.getAttribute("viewBox"),R=1,I=1,X=0,V=0,ee,$,se,P,L=F.getAttribute("width"),B=F.getAttribute("height"),H=F.getAttribute("x")||0,Y=F.getAttribute("y")||0,Z=F.getAttribute("preserveAspectRatio")||"",te=!O||!i.svgViewBoxElementsRegEx.test(F.nodeName)||!(O=O.match(k)),ie=!L||!B||L==="100%"||B==="100%",ne=te&&ie,j={},J="",q=0,oe=0;if(j.width=0,j.height=0,j.toBeParsed=ne,ne)return j;if(te)return j.width=o(L),j.height=o(B),j;if(X=-parseFloat(O[1]),V=-parseFloat(O[2]),ee=parseFloat(O[3]),$=parseFloat(O[4]),j.minX=X,j.minY=V,j.viewBoxWidth=ee,j.viewBoxHeight=$,ie?(j.width=ee,j.height=$):(j.width=o(L),j.height=o(B),R=j.width/ee,I=j.height/$),Z=i.util.parsePreserveAspectRatioAttribute(Z),Z.alignX!=="none"&&(Z.meetOrSlice==="meet"&&(I=R=R>I?I:R),Z.meetOrSlice==="slice"&&(I=R=R>I?R:I),q=j.width-ee*R,oe=j.height-$*R,Z.alignX==="Mid"&&(q/=2),Z.alignY==="Mid"&&(oe/=2),Z.alignX==="Min"&&(q=0),Z.alignY==="Min"&&(oe=0)),R===1&&I===1&&X===0&&V===0&&H===0&&Y===0)return j;if((H||Y)&&(J=" translate("+o(H)+" "+o(Y)+") "),se=J+" matrix("+R+" 0 0 "+I+" "+(X*R+q)+" "+(V*I+oe)+") ",j.viewboxTransform=i.parseTransformAttribute(se),F.nodeName==="svg"){for(P=F.ownerDocument.createElementNS(i.svgNS,"g");F.firstChild;)P.appendChild(F.firstChild);F.appendChild(P)}else P=F,se=P.getAttribute("transform")+se;return P.setAttribute("transform",se),j}function W(F,O){for(;F&&(F=F.parentNode);)if(F.nodeName&&O.test(F.nodeName.replace("svg:",""))&&!F.getAttribute("instantiated_by_use"))return!0;return!1}i.parseSVGDocument=function(F,O,R,I){if(!!F){re(F);var X=i.Object.__uid++,V,ee,$=z(F),se=i.util.toArray(F.getElementsByTagName("*"));if($.crossOrigin=I&&I.crossOrigin,$.svgUid=X,se.length===0&&i.isLikelyNode){se=F.selectNodes('//*[name(.)!="svg"]');var P=[];for(V=0,ee=se.length;V<ee;V++)P[V]=se[V];se=P}var L=se.filter(function(H){return z(H),i.svgValidTagNamesRegEx.test(H.nodeName.replace("svg:",""))&&!W(H,i.svgInvalidAncestorsRegEx)});if(!L||L&&!L.length){O&&O([],{});return}var B={};se.filter(function(H){return H.nodeName.replace("svg:","")==="clipPath"}).forEach(function(H){var Y=H.getAttribute("id");B[Y]=i.util.toArray(H.getElementsByTagName("*")).filter(function(Z){return i.svgValidTagNamesRegEx.test(Z.nodeName.replace("svg:",""))})}),i.gradientDefs[X]=i.getGradientDefs(F),i.cssRules[X]=i.getCSSRules(F),i.clipPaths[X]=B,i.parseElements(L,function(H,Y){O&&(O(H,$,Y,se),delete i.gradientDefs[X],delete i.cssRules[X],delete i.clipPaths[X])},r($),R,I)}};function G(F,O){var R=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],I="xlink:href",X=O.getAttribute(I).substr(1),V=Q(F,X);if(V&&V.getAttribute(I)&&G(F,V),R.forEach(function($){V&&!O.hasAttribute($)&&V.hasAttribute($)&&O.setAttribute($,V.getAttribute($))}),!O.children.length)for(var ee=V.cloneNode(!0);ee.firstChild;)O.appendChild(ee.firstChild);O.removeAttribute(I)}var le=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+i.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+i.reNum+"))?\\s+(.*)");c(i,{parseFontDeclaration:function(F,O){var R=F.match(le);if(!!R){var I=R[1],X=R[3],V=R[4],ee=R[5],$=R[6];I&&(O.fontStyle=I),X&&(O.fontWeight=isNaN(parseFloat(X))?X:parseFloat(X)),V&&(O.fontSize=o(V)),$&&(O.fontFamily=$),ee&&(O.lineHeight=ee==="normal"?1:ee)}},getGradientDefs:function(F){var O=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],R=A(F,O),I,X=0,V={};for(X=R.length;X--;)I=R[X],I.getAttribute("xlink:href")&&G(F,I),V[I.getAttribute("id")]=I;return V},parseAttributes:function(F,O,R){if(!!F){var I,X={},V,ee;typeof R=="undefined"&&(R=F.getAttribute("svgUid")),F.parentNode&&i.svgValidParentsRegEx.test(F.parentNode.nodeName)&&(X=i.parseAttributes(F.parentNode,O,R));var $=O.reduce(function(Z,te){return I=F.getAttribute(te),I&&(Z[te]=I),Z},{}),se=c(D(F,R),i.parseStyleAttribute(F));$=c($,se),se[b]&&F.setAttribute(b,se[b]),V=ee=X.fontSize||i.Text.DEFAULT_SVG_FONT_SIZE,$[v]&&($[v]=V=o($[v],ee));var P,L,B={};for(var H in $)P=C(H),L=w(P,$[H],X,V),B[P]=L;B&&B.font&&i.parseFontDeclaration(B.font,B);var Y=c(X,B);return i.svgValidParentsRegEx.test(F.nodeName)?Y:T(Y)}},parseElements:function(F,O,R,I,X){new i.ElementsParser(F,O,R,I,X).parse()},parseStyleAttribute:function(F){var O={},R=F.getAttribute("style");return R&&(typeof R=="string"?M(R,O):E(R,O)),O},parsePointsAttribute:function(F){if(!F)return null;F=F.replace(/,/g," ").trim(),F=F.split(/\s+/);var O=[],R,I;for(R=0,I=F.length;R<I;R+=2)O.push({x:parseFloat(F[R]),y:parseFloat(F[R+1])});return O},getCSSRules:function(F){var O=F.getElementsByTagName("style"),R,I,X={},V;for(R=0,I=O.length;R<I;R++){var ee=O[R].textContent||"";ee=ee.replace(/\/\*[\s\S]*?\*\//g,""),ee.trim()!==""&&(V=ee.match(/[^{]*\{[\s\S]*?\}/g),V=V.map(function($){return $.trim()}),V.forEach(function($){var se=$.match(/([\s\S]*?)\s*\{([^}]*)\}/),P={},L=se[2].trim(),B=L.replace(/;$/,"").split(/\s*;\s*/);for(R=0,I=B.length;R<I;R++){var H=B[R].split(/\s*:\s*/),Y=H[0],Z=H[1];P[Y]=Z}$=se[1],$.split(",").forEach(function(te){te=te.replace(/^svg/i,"").trim(),te!==""&&(X[te]?i.util.object.extend(X[te],P):X[te]=i.util.object.clone(P))})}))}return X},loadSVGFromURL:function(F,O,R,I){F=F.replace(/^\n\s*/,"").trim(),new i.util.request(F,{method:"get",onComplete:X});function X(V){var ee=V.responseXML;if(ee&&!ee.documentElement&&i.window.ActiveXObject&&V.responseText&&(ee=new ActiveXObject("Microsoft.XMLDOM"),ee.async="false",ee.loadXML(V.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),!ee||!ee.documentElement)return O&&O(null),!1;i.parseSVGDocument(ee.documentElement,function($,se,P,L){O&&O($,se,P,L)},R,I)}},loadSVGFromString:function(F,O,R,I){F=F.trim();var X;if(typeof i.window.DOMParser!="undefined"){var V=new i.window.DOMParser;V&&V.parseFromString&&(X=V.parseFromString(F,"text/xml"))}else i.window.ActiveXObject&&(X=new ActiveXObject("Microsoft.XMLDOM"),X.async="false",X.loadXML(F.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));i.parseSVGDocument(X.documentElement,function(ee,$,se,P){O(ee,$,se,P)},R,I)}})}(e),t.ElementsParser=function(f,i,c,r,n,o){this.elements=f,this.callback=i,this.options=c,this.reviver=r,this.svgUid=c&&c.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(f){f.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},f.createObjects=function(){var i=this;this.elements.forEach(function(c,r){c.setAttribute("svgUid",i.svgUid),i.createObject(c,r)})},f.findTag=function(i){return t[t.util.string.capitalize(i.tagName.replace("svg:",""))]},f.createObject=function(i,c){var r=this.findTag(i);if(r&&r.fromElement)try{r.fromElement(i,this.createCallback(c,i),this.options)}catch(n){t.log(n)}else this.checkIfDone()},f.createCallback=function(i,c){var r=this;return function(n){var o;r.resolveGradient(n,c,"fill"),r.resolveGradient(n,c,"stroke"),n instanceof t.Image&&n._originalElement&&(o=n.parsePreserveAspectRatioAttribute(c)),n._removeTransformMatrix(o),r.resolveClipPath(n,c),r.reviver&&r.reviver(c,n),r.instances[i]=n,r.checkIfDone()}},f.extractPropertyDefinition=function(i,c,r){var n=i[c],o=this.regexUrl;if(!!o.test(n)){o.lastIndex=0;var a=o.exec(n)[1];return o.lastIndex=0,t[r][this.svgUid][a]}},f.resolveGradient=function(i,c,r){var n=this.extractPropertyDefinition(i,r,"gradientDefs");if(n){var o=c.getAttribute(r+"-opacity"),a=t.Gradient.fromElement(n,i,o,this.options);i.set(r,a)}},f.createClipPathCallback=function(i,c){return function(r){r._removeTransformMatrix(),r.fillRule=r.clipRule,c.push(r)}},f.resolveClipPath=function(i,c){var r=this.extractPropertyDefinition(i,"clipPath","clipPaths"),n,o,a,u,l,s;if(r){u=[],a=t.util.invertTransform(i.calcTransformMatrix());for(var h=r[0].parentNode,d=c;d.parentNode&&d.getAttribute("clip-path")!==i.clipPath;)d=d.parentNode;d.parentNode.appendChild(h);for(var p=0;p<r.length;p++)n=r[p],o=this.findTag(n),o.fromElement(n,this.createClipPathCallback(i,u),this.options);u.length===1?r=u[0]:r=new t.Group(u),l=t.util.multiplyTransformMatrices(a,r.calcTransformMatrix()),r.clipPath&&this.resolveClipPath(r,d);var s=t.util.qrDecompose(l);r.flipX=!1,r.flipY=!1,r.set("scaleX",s.scaleX),r.set("scaleY",s.scaleY),r.angle=s.angle,r.skewX=s.skewX,r.skewY=0,r.setPositionByOrigin({x:s.translateX,y:s.translateY},"center","center"),i.clipPath=r}else delete i.clipPath},f.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(i){return i!=null}),this.callback(this.instances,this.elements))}}(t.ElementsParser.prototype),function(f){var i=f.fabric||(f.fabric={});if(i.Point){i.warn("fabric.Point is already defined");return}i.Point=c;function c(r,n){this.x=r,this.y=n}c.prototype={type:"point",constructor:c,add:function(r){return new c(this.x+r.x,this.y+r.y)},addEquals:function(r){return this.x+=r.x,this.y+=r.y,this},scalarAdd:function(r){return new c(this.x+r,this.y+r)},scalarAddEquals:function(r){return this.x+=r,this.y+=r,this},subtract:function(r){return new c(this.x-r.x,this.y-r.y)},subtractEquals:function(r){return this.x-=r.x,this.y-=r.y,this},scalarSubtract:function(r){return new c(this.x-r,this.y-r)},scalarSubtractEquals:function(r){return this.x-=r,this.y-=r,this},multiply:function(r){return new c(this.x*r,this.y*r)},multiplyEquals:function(r){return this.x*=r,this.y*=r,this},divide:function(r){return new c(this.x/r,this.y/r)},divideEquals:function(r){return this.x/=r,this.y/=r,this},eq:function(r){return this.x===r.x&&this.y===r.y},lt:function(r){return this.x<r.x&&this.y<r.y},lte:function(r){return this.x<=r.x&&this.y<=r.y},gt:function(r){return this.x>r.x&&this.y>r.y},gte:function(r){return this.x>=r.x&&this.y>=r.y},lerp:function(r,n){return typeof n=="undefined"&&(n=.5),n=Math.max(Math.min(1,n),0),new c(this.x+(r.x-this.x)*n,this.y+(r.y-this.y)*n)},distanceFrom:function(r){var n=this.x-r.x,o=this.y-r.y;return Math.sqrt(n*n+o*o)},midPointFrom:function(r){return this.lerp(r)},min:function(r){return new c(Math.min(this.x,r.x),Math.min(this.y,r.y))},max:function(r){return new c(Math.max(this.x,r.x),Math.max(this.y,r.y))},toString:function(){return this.x+","+this.y},setXY:function(r,n){return this.x=r,this.y=n,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setFromPoint:function(r){return this.x=r.x,this.y=r.y,this},swap:function(r){var n=this.x,o=this.y;this.x=r.x,this.y=r.y,r.x=n,r.y=o},clone:function(){return new c(this.x,this.y)}}}(e),function(f){var i=f.fabric||(f.fabric={});if(i.Intersection){i.warn("fabric.Intersection is already defined");return}function c(r){this.status=r,this.points=[]}i.Intersection=c,i.Intersection.prototype={constructor:c,appendPoint:function(r){return this.points.push(r),this},appendPoints:function(r){return this.points=this.points.concat(r),this}},i.Intersection.intersectLineLine=function(r,n,o,a){var u,l=(a.x-o.x)*(r.y-o.y)-(a.y-o.y)*(r.x-o.x),s=(n.x-r.x)*(r.y-o.y)-(n.y-r.y)*(r.x-o.x),h=(a.y-o.y)*(n.x-r.x)-(a.x-o.x)*(n.y-r.y);if(h!==0){var d=l/h,p=s/h;0<=d&&d<=1&&0<=p&&p<=1?(u=new c("Intersection"),u.appendPoint(new i.Point(r.x+d*(n.x-r.x),r.y+d*(n.y-r.y)))):u=new c}else l===0||s===0?u=new c("Coincident"):u=new c("Parallel");return u},i.Intersection.intersectLinePolygon=function(r,n,o){var a=new c,u=o.length,l,s,h,d;for(d=0;d<u;d++)l=o[d],s=o[(d+1)%u],h=c.intersectLineLine(r,n,l,s),a.appendPoints(h.points);return a.points.length>0&&(a.status="Intersection"),a},i.Intersection.intersectPolygonPolygon=function(r,n){var o=new c,a=r.length,u;for(u=0;u<a;u++){var l=r[u],s=r[(u+1)%a],h=c.intersectLinePolygon(l,s,n);o.appendPoints(h.points)}return o.points.length>0&&(o.status="Intersection"),o},i.Intersection.intersectPolygonRectangle=function(r,n,o){var a=n.min(o),u=n.max(o),l=new i.Point(u.x,a.y),s=new i.Point(a.x,u.y),h=c.intersectLinePolygon(a,l,r),d=c.intersectLinePolygon(l,u,r),p=c.intersectLinePolygon(u,s,r),v=c.intersectLinePolygon(s,a,r),b=new c;return b.appendPoints(h.points),b.appendPoints(d.points),b.appendPoints(p.points),b.appendPoints(v.points),b.points.length>0&&(b.status="Intersection"),b}}(e),function(f){var i=f.fabric||(f.fabric={});if(i.Color){i.warn("fabric.Color is already defined.");return}function c(n){n?this._tryParsingColor(n):this.setSource([0,0,0,1])}i.Color=c,i.Color.prototype={_tryParsingColor:function(n){var o;n in c.colorNameMap&&(n=c.colorNameMap[n]),n==="transparent"&&(o=[255,255,255,0]),o||(o=c.sourceFromHex(n)),o||(o=c.sourceFromRgb(n)),o||(o=c.sourceFromHsl(n)),o||(o=[0,0,0,1]),o&&this.setSource(o)},_rgbToHsl:function(n,o,a){n/=255,o/=255,a/=255;var u,l,s,h=i.util.array.max([n,o,a]),d=i.util.array.min([n,o,a]);if(s=(h+d)/2,h===d)u=l=0;else{var p=h-d;switch(l=s>.5?p/(2-h-d):p/(h+d),h){case n:u=(o-a)/p+(o<a?6:0);break;case o:u=(a-n)/p+2;break;case a:u=(n-o)/p+4;break}u/=6}return[Math.round(u*360),Math.round(l*100),Math.round(s*100)]},getSource:function(){return this._source},setSource:function(n){this._source=n},toRgb:function(){var n=this.getSource();return"rgb("+n[0]+","+n[1]+","+n[2]+")"},toRgba:function(){var n=this.getSource();return"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"},toHsl:function(){var n=this.getSource(),o=this._rgbToHsl(n[0],n[1],n[2]);return"hsl("+o[0]+","+o[1]+"%,"+o[2]+"%)"},toHsla:function(){var n=this.getSource(),o=this._rgbToHsl(n[0],n[1],n[2]);return"hsla("+o[0]+","+o[1]+"%,"+o[2]+"%,"+n[3]+")"},toHex:function(){var n=this.getSource(),o,a,u;return o=n[0].toString(16),o=o.length===1?"0"+o:o,a=n[1].toString(16),a=a.length===1?"0"+a:a,u=n[2].toString(16),u=u.length===1?"0"+u:u,o.toUpperCase()+a.toUpperCase()+u.toUpperCase()},toHexa:function(){var n=this.getSource(),o;return o=Math.round(n[3]*255),o=o.toString(16),o=o.length===1?"0"+o:o,this.toHex()+o.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(n){var o=this.getSource();return o[3]=n,this.setSource(o),this},toGrayscale:function(){var n=this.getSource(),o=parseInt((n[0]*.3+n[1]*.59+n[2]*.11).toFixed(0),10),a=n[3];return this.setSource([o,o,o,a]),this},toBlackWhite:function(n){var o=this.getSource(),a=(o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),u=o[3];return n=n||127,a=Number(a)<Number(n)?0:255,this.setSource([a,a,a,u]),this},overlayWith:function(n){n instanceof c||(n=new c(n));var o=[],a=this.getAlpha(),u=.5,l=this.getSource(),s=n.getSource(),h;for(h=0;h<3;h++)o.push(Math.round(l[h]*(1-u)+s[h]*u));return o[3]=a,this.setSource(o),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,i.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function r(n,o,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?n+(o-n)*6*a:a<1/2?o:a<2/3?n+(o-n)*(2/3-a)*6:n}i.Color.fromRgb=function(n){return c.fromSource(c.sourceFromRgb(n))},i.Color.sourceFromRgb=function(n){var o=n.match(c.reRGBa);if(o){var a=parseInt(o[1],10)/(/%$/.test(o[1])?100:1)*(/%$/.test(o[1])?255:1),u=parseInt(o[2],10)/(/%$/.test(o[2])?100:1)*(/%$/.test(o[2])?255:1),l=parseInt(o[3],10)/(/%$/.test(o[3])?100:1)*(/%$/.test(o[3])?255:1);return[parseInt(a,10),parseInt(u,10),parseInt(l,10),o[4]?parseFloat(o[4]):1]}},i.Color.fromRgba=c.fromRgb,i.Color.fromHsl=function(n){return c.fromSource(c.sourceFromHsl(n))},i.Color.sourceFromHsl=function(n){var o=n.match(c.reHSLa);if(!!o){var a=(parseFloat(o[1])%360+360)%360/360,u=parseFloat(o[2])/(/%$/.test(o[2])?100:1),l=parseFloat(o[3])/(/%$/.test(o[3])?100:1),s,h,d;if(u===0)s=h=d=l;else{var p=l<=.5?l*(u+1):l+u-l*u,v=l*2-p;s=r(v,p,a+1/3),h=r(v,p,a),d=r(v,p,a-1/3)}return[Math.round(s*255),Math.round(h*255),Math.round(d*255),o[4]?parseFloat(o[4]):1]}},i.Color.fromHsla=c.fromHsl,i.Color.fromHex=function(n){return c.fromSource(c.sourceFromHex(n))},i.Color.sourceFromHex=function(n){if(n.match(c.reHex)){var o=n.slice(n.indexOf("#")+1),a=o.length===3||o.length===4,u=o.length===8||o.length===4,l=a?o.charAt(0)+o.charAt(0):o.substring(0,2),s=a?o.charAt(1)+o.charAt(1):o.substring(2,4),h=a?o.charAt(2)+o.charAt(2):o.substring(4,6),d=u?a?o.charAt(3)+o.charAt(3):o.substring(6,8):"FF";return[parseInt(l,16),parseInt(s,16),parseInt(h,16),parseFloat((parseInt(d,16)/255).toFixed(2))]}},i.Color.fromSource=function(n){var o=new c;return o.setSource(n),o}}(e),function(){function f(o,a){var u=o.getAttribute("style"),l=o.getAttribute("offset")||0,s,h,d,p;if(l=parseFloat(l)/(/%$/.test(l)?100:1),l=l<0?0:l>1?1:l,u){var v=u.split(/\s*;\s*/);for(v[v.length-1]===""&&v.pop(),p=v.length;p--;){var b=v[p].split(/\s*:\s*/),C=b[0].trim(),w=b[1].trim();C==="stop-color"?s=w:C==="stop-opacity"&&(d=w)}}return s||(s=o.getAttribute("stop-color")||"rgb(0,0,0)"),d||(d=o.getAttribute("stop-opacity")),s=new t.Color(s),h=s.getAlpha(),d=isNaN(parseFloat(d))?1:parseFloat(d),d*=h*a,{offset:l,color:s.toRgb(),opacity:d}}function i(o){return{x1:o.getAttribute("x1")||0,y1:o.getAttribute("y1")||0,x2:o.getAttribute("x2")||"100%",y2:o.getAttribute("y2")||0}}function c(o){return{x1:o.getAttribute("fx")||o.getAttribute("cx")||"50%",y1:o.getAttribute("fy")||o.getAttribute("cy")||"50%",r1:0,x2:o.getAttribute("cx")||"50%",y2:o.getAttribute("cy")||"50%",r2:o.getAttribute("r")||"50%"}}var r=t.util.object.clone;t.Gradient=t.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(o){o||(o={}),o.coords||(o.coords={});var a,u=this;Object.keys(o).forEach(function(l){u[l]=o[l]}),this.id?this.id+="_"+t.Object.__uid++:this.id=t.Object.__uid++,a={x1:o.coords.x1||0,y1:o.coords.y1||0,x2:o.coords.x2||0,y2:o.coords.y2||0},this.type==="radial"&&(a.r1=o.coords.r1||0,a.r2=o.coords.r2||0),this.coords=a,this.colorStops=o.colorStops.slice()},addColorStop:function(o){for(var a in o){var u=new t.Color(o[a]);this.colorStops.push({offset:parseFloat(a),color:u.toRgb(),opacity:u.getAlpha()})}return this},toObject:function(o){var a={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return t.util.populateWithProperties(this,a,o),a},toSVG:function(o,h){var u=r(this.coords,!0),l,s,h=h||{},d,p,v=r(this.colorStops,!0),b=u.r1>u.r2,C=this.gradientTransform?this.gradientTransform.concat():t.iMatrix.concat(),w=-this.offsetX,S=-this.offsetY,T=!!h.additionalTransform,A=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(v.sort(function(K,U){return K.offset-U.offset}),A==="objectBoundingBox"?(w/=o.width,S/=o.height):(w+=o.width/2,S+=o.height/2),o.type==="path"&&(w-=o.pathOffset.x,S-=o.pathOffset.y),C[4]-=w,C[5]-=S,p='id="SVGID_'+this.id+'" gradientUnits="'+A+'"',p+=' gradientTransform="'+(T?h.additionalTransform+" ":"")+t.util.matrixToSVG(C)+'" ',this.type==="linear"?d=["<linearGradient ",p,' x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`">
`]:this.type==="radial"&&(d=["<radialGradient ",p,' cx="',b?u.x1:u.x2,'" cy="',b?u.y1:u.y2,'" r="',b?u.r1:u.r2,'" fx="',b?u.x2:u.x1,'" fy="',b?u.y2:u.y1,`">
`]),this.type==="radial"){if(b)for(v=v.concat(),v.reverse(),l=0,s=v.length;l<s;l++)v[l].offset=1-v[l].offset;var M=Math.min(u.r1,u.r2);if(M>0){var E=Math.max(u.r1,u.r2),D=M/E;for(l=0,s=v.length;l<s;l++)v[l].offset+=D*(1-v[l].offset)}}for(l=0,s=v.length;l<s;l++){var N=v[l];d.push("<stop ",'offset="',N.offset*100+"%",'" style="stop-color:',N.color,typeof N.opacity!="undefined"?";stop-opacity: "+N.opacity:";",`"/>
`)}return d.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),d.join("")},toLive:function(o,a){var u,l=t.util.object.clone(this.coords),s,h,d=l.x1,p=l.y1,v=l.x2,b=l.y2,C=this.colorStops;if(!!this.type){for(a instanceof t.Text&&this.gradientUnits==="percentage"&&(d*=a.width,p*=a.height,v*=a.width,b*=a.height),this.type==="linear"?u=o.createLinearGradient(d,p,v,b):this.type==="radial"&&(u=o.createRadialGradient(d,p,l.r1,v,b,l.r2)),s=0,h=C.length;s<h;s++){var w=C[s].color,S=C[s].opacity,T=C[s].offset;typeof S!="undefined"&&(w=new t.Color(w).setAlpha(S).toRgba()),u.addColorStop(T,w)}return u}}}),t.util.object.extend(t.Gradient,{fromElement:function(o,a,u,l){var s=parseFloat(u)/(/%$/.test(u)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var h=o.getElementsByTagName("stop"),d,p=o.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",v=o.getAttribute("gradientTransform")||"",b=[],C,w,S=0,T=0,A;for(o.nodeName==="linearGradient"||o.nodeName==="LINEARGRADIENT"?(d="linear",C=i(o)):(d="radial",C=c(o)),w=h.length;w--;)b.push(f(h[w],s));A=t.parseTransformAttribute(v),n(a,C,l,p),p==="pixels"&&(S=-a.left,T=-a.top);var M=new t.Gradient({id:o.getAttribute("id"),type:d,coords:C,colorStops:b,gradientUnits:p,gradientTransform:A,offsetX:S,offsetY:T});return M},forObject:function(o,a){return a||(a={}),n(o,a.coords,a.gradientUnits,{viewBoxWidth:100,viewBoxHeight:100}),new t.Gradient(a)}});function n(o,a,u,l){var s,h;Object.keys(a).forEach(function(d){s=a[d],s==="Infinity"?h=1:s==="-Infinity"?h=0:(h=parseFloat(a[d],10),typeof s=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(s)&&(h*=.01,l==="pixels"&&((d==="x1"||d==="x2"||d==="r2")&&(h*=u.viewBoxWidth||u.width),(d==="y1"||d==="y2")&&(h*=u.viewBoxHeight||u.height)))),a[d]=h})}}(),function(){var f=t.util.toFixed;t.Pattern=t.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(i,c){if(i||(i={}),this.id=t.Object.__uid++,this.setOptions(i),!i.source||i.source&&typeof i.source!="string"){c&&c(this);return}if(typeof t.util.getFunctionBody(i.source)!="undefined")this.source=new Function(t.util.getFunctionBody(i.source)),c&&c(this);else{var r=this;this.source=t.util.createImage(),t.util.loadImage(i.source,function(n){r.source=n,c&&c(r)},null,this.crossOrigin)}},toObject:function(i){var c=t.Object.NUM_FRACTION_DIGITS,r,n;return typeof this.source=="function"?r=String(this.source):typeof this.source.src=="string"?r=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(r=this.source.toDataURL()),n={type:"pattern",source:r,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:f(this.offsetX,c),offsetY:f(this.offsetY,c),patternTransform:this.patternTransform?this.patternTransform.concat():null},t.util.populateWithProperties(this,n,i),n},toSVG:function(i){var c=typeof this.source=="function"?this.source():this.source,r=c.width/i.width,n=c.height/i.height,o=this.offsetX/i.width,a=this.offsetY/i.height,u="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(n=1,a&&(n+=Math.abs(a))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(r=1,o&&(r+=Math.abs(o))),c.src?u=c.src:c.toDataURL&&(u=c.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+o+'" y="'+a+'" width="'+r+'" height="'+n+`">
<image x="0" y="0" width="`+c.width+'" height="'+c.height+'" xlink:href="'+u+`"></image>
</pattern>
`},setOptions:function(i){for(var c in i)this[c]=i[c]},toLive:function(i){var c=typeof this.source=="function"?this.source():this.source;return!c||typeof c.src!="undefined"&&(!c.complete||c.naturalWidth===0||c.naturalHeight===0)?"":i.createPattern(c,this.repeat)}})}(),function(f){var i=f.fabric||(f.fabric={}),c=i.util.toFixed;if(i.Shadow){i.warn("fabric.Shadow is already defined.");return}i.Shadow=i.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(r){typeof r=="string"&&(r=this._parseShadow(r));for(var n in r)this[n]=r[n];this.id=i.Object.__uid++},_parseShadow:function(r){var n=r.trim(),o=i.Shadow.reOffsetsAndBlur.exec(n)||[],a=n.replace(i.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:a.trim(),offsetX:parseInt(o[1],10)||0,offsetY:parseInt(o[2],10)||0,blur:parseInt(o[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(r){var n=40,o=40,a=i.Object.NUM_FRACTION_DIGITS,u=i.util.rotateVector({x:this.offsetX,y:this.offsetY},i.util.degreesToRadians(-r.angle)),l=20,s=new i.Color(this.color);return r.width&&r.height&&(n=c((Math.abs(u.x)+this.blur)/r.width,a)*100+l,o=c((Math.abs(u.y)+this.blur)/r.height,a)*100+l),r.flipX&&(u.x*=-1),r.flipY&&(u.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+o+'%" height="'+(100+2*o)+'%" x="-'+n+'%" width="'+(100+2*n)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+c(this.blur?this.blur/2:0,a)+`"></feGaussianBlur>
	<feOffset dx="`+c(u.x,a)+'" dy="'+c(u.y,a)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+s.toRgb()+'" flood-opacity="'+s.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var r={},n=i.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(o){this[o]!==n[o]&&(r[o]=this[o])},this),r}}),i.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/}(e),function(){if(t.StaticCanvas){t.warn("fabric.StaticCanvas is already defined.");return}var f=t.util.object.extend,i=t.util.getElementOffset,c=t.util.removeFromArray,r=t.util.toFixed,n=t.util.transformPoint,o=t.util.invertTransform,a=t.util.getNodeCanvas,u=t.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");t.StaticCanvas=t.util.createClass(t.CommonMethods,{initialize:function(s,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(s,h)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:t.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,onBeforeScaleRotate:function(){},enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(s,h){var d=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(s),this._initOptions(h),this._setImageSmoothing(),this.interactive||this._initRetinaScaling(),h.overlayImage&&this.setOverlayImage(h.overlayImage,d),h.backgroundImage&&this.setBackgroundImage(h.backgroundImage,d),h.backgroundColor&&this.setBackgroundColor(h.backgroundColor,d),h.overlayColor&&this.setOverlayColor(h.overlayColor,d),this.calcOffset()},_isRetinaScaling:function(){return t.devicePixelRatio!==1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?t.devicePixelRatio:1},_initRetinaScaling:function(){if(!!this._isRetinaScaling()){var s=t.devicePixelRatio;this.__initRetinaScaling(s,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(s,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(s,h,d){h.setAttribute("width",this.width*s),h.setAttribute("height",this.height*s),d.scale(s,s)},calcOffset:function(){return this._offset=i(this.lowerCanvasEl),this},setOverlayImage:function(s,h,d){return this.__setBgOverlayImage("overlayImage",s,h,d)},setBackgroundImage:function(s,h,d){return this.__setBgOverlayImage("backgroundImage",s,h,d)},setOverlayColor:function(s,h){return this.__setBgOverlayColor("overlayColor",s,h)},setBackgroundColor:function(s,h){return this.__setBgOverlayColor("backgroundColor",s,h)},_setImageSmoothing:function(){var s=this.getContext();s.imageSmoothingEnabled=s.imageSmoothingEnabled||s.webkitImageSmoothingEnabled||s.mozImageSmoothingEnabled||s.msImageSmoothingEnabled||s.oImageSmoothingEnabled,s.imageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(s,h,d,p){return typeof h=="string"?t.util.loadImage(h,function(v){if(v){var b=new t.Image(v,p);this[s]=b,b.canvas=this}d&&d(v)},this,p&&p.crossOrigin):(p&&h.setOptions(p),this[s]=h,h&&(h.canvas=this),d&&d(h)),this},__setBgOverlayColor:function(s,h,d){return this[s]=h,this._initGradient(h,s),this._initPattern(h,s,d),this},_createCanvasElement:function(){var s=u();if(!s||(s.style||(s.style={}),typeof s.getContext=="undefined"))throw l;return s},_initOptions:function(s){var h=this.lowerCanvasEl;this._setOptions(s),this.width=this.width||parseInt(h.width,10)||0,this.height=this.height||parseInt(h.height,10)||0,this.lowerCanvasEl.style&&(h.width=this.width,h.height=this.height,h.style.width=this.width+"px",h.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(s){s&&s.getContext?this.lowerCanvasEl=s:this.lowerCanvasEl=t.util.getById(s)||this._createCanvasElement(),t.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(s,h){return this.setDimensions({width:s},h)},setHeight:function(s,h){return this.setDimensions({height:s},h)},setDimensions:function(s,h){var d;h=h||{};for(var p in s)d=s[p],h.cssOnly||(this._setBackstoreDimension(p,s[p]),d+="px",this.hasLostContext=!0),h.backstoreOnly||this._setCssDimension(p,d);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this._setImageSmoothing(),this.calcOffset(),h.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(s,h){return this.lowerCanvasEl[s]=h,this.upperCanvasEl&&(this.upperCanvasEl[s]=h),this.cacheCanvasEl&&(this.cacheCanvasEl[s]=h),this[s]=h,this},_setCssDimension:function(s,h){return this.lowerCanvasEl.style[s]=h,this.upperCanvasEl&&(this.upperCanvasEl.style[s]=h),this.wrapperEl&&(this.wrapperEl.style[s]=h),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(s){var h=this._activeObject,d,p=!1,v=!0,b,C;for(this.viewportTransform=s,b=0,C=this._objects.length;b<C;b++)d=this._objects[b],d.group||d.setCoords(p,v);return h&&h.type==="activeSelection"&&h.setCoords(p,v),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(s,h){var d=s,p=this.viewportTransform.slice(0);s=n(s,o(this.viewportTransform)),p[0]=h,p[3]=h;var v=n(s,p);return p[4]+=d.x-v.x,p[5]+=d.y-v.y,this.setViewportTransform(p)},setZoom:function(s){return this.zoomToPoint(new t.Point(0,0),s),this},absolutePan:function(s){var h=this.viewportTransform.slice(0);return h[4]=-s.x,h[5]=-s.y,this.setViewportTransform(h)},relativePan:function(s){return this.absolutePan(new t.Point(-s.x-this.viewportTransform[4],-s.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(s){this.stateful&&s.setupState(),s._set("canvas",this),s.setCoords(),this.fire("object:added",{target:s}),s.fire("added")},_onObjectRemoved:function(s){this.fire("object:removed",{target:s}),s.fire("removed"),delete s.canvas},clearContext:function(s){return s.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var s=this.contextContainer;return this.renderCanvas(s,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=t.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var s={},h=this.width,d=this.height,p=o(this.viewportTransform);return s.tl=n({x:0,y:0},p),s.br=n({x:h,y:d},p),s.tr=new t.Point(s.br.x,s.tl.y),s.bl=new t.Point(s.tl.x,s.br.y),this.vptCoords=s,s},cancelRequestedRender:function(){this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(s,h){var d=this.viewportTransform,p=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(s),this.fire("before:render",{ctx:s}),this.clipTo&&t.util.clipContext(this,s),this._renderBackground(s),s.save(),s.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._renderObjects(s,h),s.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.clipTo&&s.restore(),p&&(p.canvas=this,p.shouldCache(),p._transformDone=!0,p.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(s)),this._renderOverlay(s),this.controlsAboveOverlay&&this.interactive&&this.drawControls(s),this.fire("after:render",{ctx:s})},drawClipPathOnCanvas:function(s){var h=this.viewportTransform,d=this.clipPath;s.save(),s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),s.globalCompositeOperation="destination-in",d.transform(s),s.scale(1/d.zoomX,1/d.zoomY),s.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),s.restore()},_renderObjects:function(s,h){var d,p;for(d=0,p=h.length;d<p;++d)h[d]&&h[d].render(s)},_renderBackgroundOrOverlay:function(s,h){var d=this[h+"Color"],p=this[h+"Image"],v=this.viewportTransform,b=this[h+"Vpt"];if(!(!d&&!p)){if(d){s.save(),s.beginPath(),s.moveTo(0,0),s.lineTo(this.width,0),s.lineTo(this.width,this.height),s.lineTo(0,this.height),s.closePath(),s.fillStyle=d.toLive?d.toLive(s,this):d,b&&s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),s.transform(1,0,0,1,d.offsetX||0,d.offsetY||0);var C=d.gradientTransform||d.patternTransform;C&&s.transform(C[0],C[1],C[2],C[3],C[4],C[5]),s.fill(),s.restore()}p&&(s.save(),b&&s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),p.render(s),s.restore())}},_renderBackground:function(s){this._renderBackgroundOrOverlay(s,"background")},_renderOverlay:function(s){this._renderBackgroundOrOverlay(s,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(s){return this._centerObject(s,new t.Point(this.getCenter().left,s.getCenterPoint().y))},centerObjectV:function(s){return this._centerObject(s,new t.Point(s.getCenterPoint().x,this.getCenter().top))},centerObject:function(s){var h=this.getCenter();return this._centerObject(s,new t.Point(h.left,h.top))},viewportCenterObject:function(s){var h=this.getVpCenter();return this._centerObject(s,h)},viewportCenterObjectH:function(s){var h=this.getVpCenter();return this._centerObject(s,new t.Point(h.x,s.getCenterPoint().y)),this},viewportCenterObjectV:function(s){var h=this.getVpCenter();return this._centerObject(s,new t.Point(s.getCenterPoint().x,h.y))},getVpCenter:function(){var s=this.getCenter(),h=o(this.viewportTransform);return n({x:s.left,y:s.top},h)},_centerObject:function(s,h){return s.setPositionByOrigin(h,"center","center"),s.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(s){return this.toDatalessObject(s)},toObject:function(s){return this._toObjectMethod("toObject",s)},toDatalessObject:function(s){return this._toObjectMethod("toDatalessObject",s)},_toObjectMethod:function(s,h){var d=this.clipPath,p={version:t.version,objects:this._toObjects(s,h)};return d&&(p.clipPath=this._toObject(this.clipPath,s,h)),f(p,this.__serializeBgOverlay(s,h)),t.util.populateWithProperties(this,p,h),p},_toObjects:function(s,h){return this._objects.filter(function(d){return!d.excludeFromExport}).map(function(d){return this._toObject(d,s,h)},this)},_toObject:function(s,h,d){var p;this.includeDefaultValues||(p=s.includeDefaultValues,s.includeDefaultValues=!1);var v=s[h](d);return this.includeDefaultValues||(s.includeDefaultValues=p),v},__serializeBgOverlay:function(s,h){var d={},p=this.backgroundImage,v=this.overlayImage;return this.backgroundColor&&(d.background=this.backgroundColor.toObject?this.backgroundColor.toObject(h):this.backgroundColor),this.overlayColor&&(d.overlay=this.overlayColor.toObject?this.overlayColor.toObject(h):this.overlayColor),p&&!p.excludeFromExport&&(d.backgroundImage=this._toObject(p,s,h)),v&&!v.excludeFromExport&&(d.overlayImage=this._toObject(v,s,h)),d},svgViewportTransformation:!0,toSVG:function(s,h){s||(s={}),s.reviver=h;var d=[];return this._setSVGPreamble(d,s),this._setSVGHeader(d,s),this.clipPath&&d.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(d,"background"),this._setSVGBgOverlayImage(d,"backgroundImage",h),this._setSVGObjects(d,h),this.clipPath&&d.push(`</g>
`),this._setSVGBgOverlayColor(d,"overlay"),this._setSVGBgOverlayImage(d,"overlayImage",h),d.push("</svg>"),d.join("")},_setSVGPreamble:function(s,h){h.suppressPreamble||s.push('<?xml version="1.0" encoding="',h.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(s,h){var d=h.width||this.width,p=h.height||this.height,v,b='viewBox="0 0 '+this.width+" "+this.height+'" ',C=t.Object.NUM_FRACTION_DIGITS;h.viewBox?b='viewBox="'+h.viewBox.x+" "+h.viewBox.y+" "+h.viewBox.width+" "+h.viewBox.height+'" ':this.svgViewportTransformation&&(v=this.viewportTransform,b='viewBox="'+r(-v[4]/v[0],C)+" "+r(-v[5]/v[3],C)+" "+r(this.width/v[0],C)+" "+r(this.height/v[3],C)+'" '),s.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',d,'" ','height="',p,'" ',b,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",t.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(h),`</defs>
`)},createSVGClipPathMarkup:function(s){var h=this.clipPath;return h?(h.clipPathId="CLIPPATH_"+t.Object.__uid++,'<clipPath id="'+h.clipPathId+`" >
`+this.clipPath.toClipPathSVG(s.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var s=this,h=["background","overlay"].map(function(d){var p=s[d+"Color"];if(p&&p.toLive){var v=s[d+"Vpt"],b=s.viewportTransform,C={width:s.width/(v?b[0]:1),height:s.height/(v?b[3]:1)};return p.toSVG(C,{additionalTransform:v?t.util.matrixToSVG(b):""})}});return h.join("")},createSVGFontFacesMarkup:function(){var s="",h={},d,p,v,b,C,w,S,T,A,M=t.fontPaths,E=[];for(this._objects.forEach(function N(K){E.push(K),K._objects&&K._objects.forEach(N)}),T=0,A=E.length;T<A;T++)if(d=E[T],p=d.fontFamily,!(d.type.indexOf("text")===-1||h[p]||!M[p])&&(h[p]=!0,!!d.styles)){v=d.styles;for(C in v){b=v[C];for(S in b)w=b[S],p=w.fontFamily,!h[p]&&M[p]&&(h[p]=!0)}}for(var D in h)s+=[`		@font-face {
`,"			font-family: '",D,`';
`,"			src: url('",M[D],`');
`,`		}
`].join("");return s&&(s=['	<style type="text/css">',`<![CDATA[
`,s,"]]>",`</style>
`].join("")),s},_setSVGObjects:function(s,h){var d,p,v,b=this._objects;for(p=0,v=b.length;p<v;p++)d=b[p],!d.excludeFromExport&&this._setSVGObject(s,d,h)},_setSVGObject:function(s,h,d){s.push(h.toSVG(d))},_setSVGBgOverlayImage:function(s,h,d){this[h]&&!this[h].excludeFromExport&&this[h].toSVG&&s.push(this[h].toSVG(d))},_setSVGBgOverlayColor:function(s,h){var d=this[h+"Color"],p=this.viewportTransform,v=this.width,b=this.height;if(!!d)if(d.toLive){var C=d.repeat,w=t.util.invertTransform(p),S=this[h+"Vpt"],T=S?t.util.matrixToSVG(w):"";s.push('<rect transform="'+T+" translate(",v/2,",",b/2,')"',' x="',d.offsetX-v/2,'" y="',d.offsetY-b/2,'" ','width="',C==="repeat-y"||C==="no-repeat"?d.source.width:v,'" height="',C==="repeat-x"||C==="no-repeat"?d.source.height:b,'" fill="url(#SVGID_'+d.id+')"',`></rect>
`)}else s.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',d,'"',`></rect>
`)},sendToBack:function(s){if(!s)return this;var h=this._activeObject,d,p,v;if(s===h&&s.type==="activeSelection")for(v=h._objects,d=v.length;d--;)p=v[d],c(this._objects,p),this._objects.unshift(p);else c(this._objects,s),this._objects.unshift(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(s){if(!s)return this;var h=this._activeObject,d,p,v;if(s===h&&s.type==="activeSelection")for(v=h._objects,d=0;d<v.length;d++)p=v[d],c(this._objects,p),this._objects.push(p);else c(this._objects,s),this._objects.push(s);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(s,h){if(!s)return this;var d=this._activeObject,p,v,b,C,w,S=0;if(s===d&&s.type==="activeSelection")for(w=d._objects,p=0;p<w.length;p++)v=w[p],b=this._objects.indexOf(v),b>0+S&&(C=b-1,c(this._objects,v),this._objects.splice(C,0,v)),S++;else b=this._objects.indexOf(s),b!==0&&(C=this._findNewLowerIndex(s,b,h),c(this._objects,s),this._objects.splice(C,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(s,h,d){var p,v;if(d)for(p=h,v=h-1;v>=0;--v){var b=s.intersectsWithObject(this._objects[v])||s.isContainedWithinObject(this._objects[v])||this._objects[v].isContainedWithinObject(s);if(b){p=v;break}}else p=h-1;return p},bringForward:function(s,h){if(!s)return this;var d=this._activeObject,p,v,b,C,w,S=0;if(s===d&&s.type==="activeSelection")for(w=d._objects,p=w.length;p--;)v=w[p],b=this._objects.indexOf(v),b<this._objects.length-1-S&&(C=b+1,c(this._objects,v),this._objects.splice(C,0,v)),S++;else b=this._objects.indexOf(s),b!==this._objects.length-1&&(C=this._findNewUpperIndex(s,b,h),c(this._objects,s),this._objects.splice(C,0,s));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(s,h,d){var p,v,b;if(d)for(p=h,v=h+1,b=this._objects.length;v<b;++v){var C=s.intersectsWithObject(this._objects[v])||s.isContainedWithinObject(this._objects[v])||this._objects[v].isContainedWithinObject(s);if(C){p=v;break}}else p=h+1;return p},moveTo:function(s,h){return c(this._objects,s),this._objects.splice(h,0,s),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(t.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(s){s.dispose&&s.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,t.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),f(t.StaticCanvas.prototype,t.Observable),f(t.StaticCanvas.prototype,t.Collection),f(t.StaticCanvas.prototype,t.DataURLExporter),f(t.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(s){var h=u();if(!h||!h.getContext)return null;var d=h.getContext("2d");if(!d)return null;switch(s){case"setLineDash":return typeof d.setLineDash!="undefined";default:return null}}}),t.StaticCanvas.prototype.toJSON=t.StaticCanvas.prototype.toObject,t.isLikelyNode&&(t.StaticCanvas.prototype.createPNGStream=function(){var s=a(this.lowerCanvasEl);return s&&s.createPNGStream()},t.StaticCanvas.prototype.createJPEGStream=function(s){var h=a(this.lowerCanvasEl);return h&&h.createJPEGStream(s)})}(),t.BaseBrush=t.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,setShadow:function(f){return this.shadow=new t.Shadow(f),this},_setBrushStyles:function(){var f=this.canvas.contextTop;f.strokeStyle=this.color,f.lineWidth=this.width,f.lineCap=this.strokeLineCap,f.miterLimit=this.strokeMiterLimit,f.lineJoin=this.strokeLineJoin,t.StaticCanvas.supports("setLineDash")&&f.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(f){var i=this.canvas.viewportTransform;f.save(),f.transform(i[0],i[1],i[2],i[3],i[4],i[5])},_setShadow:function(){if(!!this.shadow){var f=this.canvas,i=this.shadow,c=f.contextTop,r=f.getZoom();f&&f._isRetinaScaling()&&(r*=t.devicePixelRatio),c.shadowColor=i.color,c.shadowBlur=i.blur*r,c.shadowOffsetX=i.offsetX*r,c.shadowOffsetY=i.offsetY*r}},needsFullRender:function(){var f=new t.Color(this.color);return f.getAlpha()<1||!!this.shadow},_resetShadow:function(){var f=this.canvas.contextTop;f.shadowColor="",f.shadowBlur=f.shadowOffsetX=f.shadowOffsetY=0}}),function(){t.PencilBrush=t.util.createClass(t.BaseBrush,{decimate:.4,initialize:function(f){this.canvas=f,this._points=[]},_drawSegment:function(f,i,c){var r=i.midPointFrom(c);return f.quadraticCurveTo(i.x,i.y,r.x,r.y),r},onMouseDown:function(f,i){!this.canvas._isMainEvent(i.e)||(this._prepareForDrawing(f),this._captureDrawingPath(f),this._render())},onMouseMove:function(f,i){if(!!this.canvas._isMainEvent(i.e)&&this._captureDrawingPath(f)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var c=this._points,r=c.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,c[r-2],c[r-1],!0),n.stroke(),n.restore()}},onMouseUp:function(f){return this.canvas._isMainEvent(f.e)?(this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(f){var i=new t.Point(f.x,f.y);this._reset(),this._addPoint(i),this.canvas.contextTop.moveTo(i.x,i.y)},_addPoint:function(f){return this._points.length>1&&f.eq(this._points[this._points.length-1])?!1:(this._points.push(f),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(f){var i=new t.Point(f.x,f.y);return this._addPoint(i)},_render:function(){var f=this.canvas.contextTop,i,c,r=this._points[0],n=this._points[1];if(this._saveAndTransform(f),f.beginPath(),this._points.length===2&&r.x===n.x&&r.y===n.y){var o=this.width/1e3;r=new t.Point(r.x,r.y),n=new t.Point(n.x,n.y),r.x-=o,n.x+=o}for(f.moveTo(r.x,r.y),i=1,c=this._points.length;i<c;i++)this._drawSegment(f,r,n),r=this._points[i],n=this._points[i+1];f.lineTo(r.x,r.y),f.stroke(),f.restore()},convertPointsToSVGPath:function(f){var i=[],c,r=this.width/1e3,n=new t.Point(f[0].x,f[0].y),o=new t.Point(f[1].x,f[1].y),a=f.length,u=1,l=0,s=a>2;for(s&&(u=f[2].x<o.x?-1:f[2].x===o.x?0:1,l=f[2].y<o.y?-1:f[2].y===o.y?0:1),i.push("M ",n.x-u*r," ",n.y-l*r," "),c=1;c<a;c++){if(!n.eq(o)){var h=n.midPointFrom(o);i.push("Q ",n.x," ",n.y," ",h.x," ",h.y," ")}n=f[c],c+1<f.length&&(o=f[c+1])}return s&&(u=n.x>f[c-2].x?1:n.x===f[c-2].x?0:-1,l=n.y>f[c-2].y?1:n.y===f[c-2].y?0:-1),i.push("L ",n.x+u*r," ",n.y+l*r),i},createPath:function(f){var i=new t.Path(f,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,i.setShadow(this.shadow)),i},decimatePoints:function(f,i){if(f.length<=2)return f;var c=this.canvas.getZoom(),r=Math.pow(i/c,2),n,o=f.length-1,a=f[0],u=[a],l;for(n=1;n<o;n++)l=Math.pow(a.x-f[n].x,2)+Math.pow(a.y-f[n].y,2),l>=r&&(a=f[n],u.push(a));return u.length===1&&u.push(new t.Point(u[0].x,u[0].y)),u},_finalizeAndAddPath:function(){var f=this.canvas.contextTop;f.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var i=this.convertPointsToSVGPath(this._points).join("");if(i==="M 0 0 Q 0 0 0 0 L 0 0"){this.canvas.requestRenderAll();return}var c=this.createPath(i);this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(c),this.canvas.requestRenderAll(),c.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:c})}})}(),t.CircleBrush=t.util.createClass(t.BaseBrush,{width:10,initialize:function(f){this.canvas=f,this.points=[]},drawDot:function(f){var i=this.addPoint(f),c=this.canvas.contextTop;this._saveAndTransform(c),this.dot(c,i),c.restore()},dot:function(f,i){f.fillStyle=i.fill,f.beginPath(),f.arc(i.x,i.y,i.radius,0,Math.PI*2,!1),f.closePath(),f.fill()},onMouseDown:function(f){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(f)},_render:function(){var f=this.canvas.contextTop,i,c,r=this.points;for(this._saveAndTransform(f),i=0,c=r.length;i<c;i++)this.dot(f,r[i]);f.restore()},onMouseMove:function(f){this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(f),this._render()):this.drawDot(f)},onMouseUp:function(){var f=this.canvas.renderOnAddRemove,i,c;this.canvas.renderOnAddRemove=!1;var r=[];for(i=0,c=this.points.length;i<c;i++){var n=this.points[i],o=new t.Circle({radius:n.radius,left:n.x,top:n.y,originX:"center",originY:"center",fill:n.fill});this.shadow&&o.setShadow(this.shadow),r.push(o)}var a=new t.Group(r);a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},addPoint:function(f){var i=new t.Point(f.x,f.y),c=t.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new t.Color(this.color).setAlpha(t.util.getRandomInt(0,100)/100).toRgba();return i.radius=c,i.fill=r,this.points.push(i),i}}),t.SprayBrush=t.util.createClass(t.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(f){this.canvas=f,this.sprayChunks=[]},onMouseDown:function(f){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseMove:function(f){this.addSprayChunk(f),this.render(this.sprayChunkPoints)},onMouseUp:function(){var f=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var i=[],c=0,r=this.sprayChunks.length;c<r;c++)for(var n=this.sprayChunks[c],o=0,a=n.length;o<a;o++){var u=new t.Rect({width:n[o].width,height:n[o].width,left:n[o].x+1,top:n[o].y+1,originX:"center",originY:"center",fill:this.color});i.push(u)}this.optimizeOverlapping&&(i=this._getOptimizedRects(i));var l=new t.Group(i);this.shadow&&l.setShadow(this.shadow),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=f,this.canvas.requestRenderAll()},_getOptimizedRects:function(f){var i={},c,r,n;for(r=0,n=f.length;r<n;r++)c=f[r].left+""+f[r].top,i[c]||(i[c]=f[r]);var o=[];for(c in i)o.push(i[c]);return o},render:function(f){var i=this.canvas.contextTop,c,r;for(i.fillStyle=this.color,this._saveAndTransform(i),c=0,r=f.length;c<r;c++){var n=f[c];typeof n.opacity!="undefined"&&(i.globalAlpha=n.opacity),i.fillRect(n.x,n.y,n.width,n.width)}i.restore()},_render:function(){var f=this.canvas.contextTop,i,c;for(f.fillStyle=this.color,this._saveAndTransform(f),i=0,c=this.sprayChunks.length;i<c;i++)this.render(this.sprayChunks[i]);f.restore()},addSprayChunk:function(f){this.sprayChunkPoints=[];var i,c,r,n=this.width/2,o;for(o=0;o<this.density;o++){i=t.util.getRandomInt(f.x-n,f.x+n),c=t.util.getRandomInt(f.y-n,f.y+n),this.dotWidthVariance?r=t.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):r=this.dotWidth;var a=new t.Point(i,c);a.width=r,this.randomOpacity&&(a.opacity=t.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),t.PatternBrush=t.util.createClass(t.PencilBrush,{getPatternSrc:function(){var f=20,i=5,c=t.util.createCanvasElement(),r=c.getContext("2d");return c.width=c.height=f+i,r.fillStyle=this.color,r.beginPath(),r.arc(f/2,f/2,f/2,0,Math.PI*2,!1),r.closePath(),r.fill(),c},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(f){var i=this.callSuper("createPath",f),c=i._getLeftTopCoords().scalarAdd(i.strokeWidth/2);return i.stroke=new t.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-c.x,offsetY:-c.y}),i}}),function(){var f=t.util.getPointer,i=t.util.degreesToRadians,c=t.util.radiansToDegrees,r=Math.atan2,n=Math.abs,o=t.StaticCanvas.supports("setLineDash"),a=.5;t.Canvas=t.util.createClass(t.StaticCanvas,{initialize:function(l,s){s||(s={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(l,s),this._initInteractive(),this._createCacheCanvas()},uniScaleTransform:!1,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=t.PencilBrush&&new t.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var l=this.getActiveObjects(),s,h,d;if(l.length>0&&!this.preserveObjectStacking){h=[],d=[];for(var p=0,v=this._objects.length;p<v;p++)s=this._objects[p],l.indexOf(s)===-1?h.push(s):d.push(s);l.length>1&&(this._activeObject._objects=d),h.push.apply(h,d)}else h=this._objects;return h},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var l=this.contextContainer;return this.renderCanvas(l,this._chooseObjectsToRender()),this},renderTopLayer:function(l){l.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(l),this.contextTopDirty=!0),l.restore()},renderTop:function(){var l=this.contextTop;return this.clearContext(l),this.renderTopLayer(l),this.fire("after:render"),this},_resetCurrentTransform:function(){var l=this._currentTransform;l.target.set({scaleX:l.original.scaleX,scaleY:l.original.scaleY,skewX:l.original.skewX,skewY:l.original.skewY,left:l.original.left,top:l.original.top}),this._shouldCenterTransform(l.target)?(l.originX!=="center"&&(l.originX==="right"?l.mouseXSign=-1:l.mouseXSign=1),l.originY!=="center"&&(l.originY==="bottom"?l.mouseYSign=-1:l.mouseYSign=1),l.originX="center",l.originY="center"):(l.originX=l.original.originX,l.originY=l.original.originY)},containsPoint:function(l,s,h){var d=!0,p=h||this.getPointer(l,d),v;return s.group&&s.group===this._activeObject&&s.group.type==="activeSelection"?v=this._normalizePointer(s.group,p):v={x:p.x,y:p.y},s.containsPoint(v)||s._findTargetCorner(p)},_normalizePointer:function(l,s){var h=l.calcTransformMatrix(),d=t.util.invertTransform(h),p=this.restorePointerVpt(s);return t.util.transformPoint(p,d)},isTargetTransparent:function(l,s,h){if(l.shouldCache()&&l._cacheCanvas&&l!==this._activeObject){var d=this._normalizePointer(l,{x:s,y:h}),p=Math.max(l.cacheTranslationX+d.x*l.zoomX,0),v=Math.max(l.cacheTranslationY+d.y*l.zoomY,0),S=t.util.isTransparent(l._cacheContext,Math.round(p),Math.round(v),this.targetFindTolerance);return S}var b=this.contextCache,C=l.selectionBackgroundColor,w=this.viewportTransform;l.selectionBackgroundColor="",this.clearContext(b),b.save(),b.transform(w[0],w[1],w[2],w[3],w[4],w[5]),l.render(b),b.restore(),l===this._activeObject&&l._renderControls(b,{hasBorders:!1,transparentCorners:!1},{hasBorders:!1}),l.selectionBackgroundColor=C;var S=t.util.isTransparent(b,s,h,this.targetFindTolerance);return S},_isSelectionKeyPressed:function(l){var s=!1;return Object.prototype.toString.call(this.selectionKey)==="[object Array]"?s=!!this.selectionKey.find(function(h){return l[h]===!0}):s=l[this.selectionKey],s},_shouldClearSelection:function(l,s){var h=this.getActiveObjects(),d=this._activeObject;return!s||s&&d&&h.length>1&&h.indexOf(s)===-1&&d!==s&&!this._isSelectionKeyPressed(l)||s&&!s.evented||s&&!s.selectable&&d&&d!==s},_shouldCenterTransform:function(l){if(!!l){var s=this._currentTransform,h;return s.action==="scale"||s.action==="scaleX"||s.action==="scaleY"?h=this.centeredScaling||l.centeredScaling:s.action==="rotate"&&(h=this.centeredRotation||l.centeredRotation),h?!s.altKey:s.altKey}},_getOriginFromCorner:function(l,s){var h={x:l.originX,y:l.originY};return s==="ml"||s==="tl"||s==="bl"?h.x="right":(s==="mr"||s==="tr"||s==="br")&&(h.x="left"),s==="tl"||s==="mt"||s==="tr"?h.y="bottom":(s==="bl"||s==="mb"||s==="br")&&(h.y="top"),h},_getActionFromCorner:function(l,s,h){if(!s||!l)return"drag";switch(s){case"mtr":return"rotate";case"ml":case"mr":return h[this.altActionKey]?"skewY":"scaleX";case"mt":case"mb":return h[this.altActionKey]?"skewX":"scaleY";default:return"scale"}},_setupCurrentTransform:function(l,s,h){if(!!s){var d=this.getPointer(l),p=s._findTargetCorner(this.getPointer(l,!0)),v=this._getActionFromCorner(h,p,l,s),b=this._getOriginFromCorner(s,p);this._currentTransform={target:s,action:v,corner:p,scaleX:s.scaleX,scaleY:s.scaleY,skewX:s.skewX,skewY:s.skewY,offsetX:d.x-s.left,offsetY:d.y-s.top,originX:b.x,originY:b.y,ex:d.x,ey:d.y,lastX:d.x,lastY:d.y,theta:i(s.angle),width:s.width*s.scaleX,mouseXSign:1,mouseYSign:1,shiftKey:l.shiftKey,altKey:l[this.centeredKey],original:t.util.saveObjectTransform(s)},this._currentTransform.original.originX=b.x,this._currentTransform.original.originY=b.y,this._resetCurrentTransform(),this._beforeTransform(l)}},_translateObject:function(l,s){var h=this._currentTransform,d=h.target,p=l-h.offsetX,v=s-h.offsetY,b=!d.get("lockMovementX")&&d.left!==p,C=!d.get("lockMovementY")&&d.top!==v;return b&&d.set("left",p),C&&d.set("top",v),b||C},_changeSkewTransformOrigin:function(l,s,h){var d="originX",p={0:"center"},v=s.target.skewX,b="left",C="right",w=s.corner==="mt"||s.corner==="ml"?1:-1,S=1;l=l>0?1:-1,h==="y"&&(v=s.target.skewY,b="top",C="bottom",d="originY"),p[-1]=b,p[1]=C,s.target.flipX&&(S*=-1),s.target.flipY&&(S*=-1),v===0?(s.skewSign=-w*l*S,s[d]=p[-l]):(v=v>0?1:-1,s.skewSign=v,s[d]=p[v*w*S])},_skewObject:function(l,s,h){var d=this._currentTransform,p=d.target,v=!1,b=p.get("lockSkewingX"),C=p.get("lockSkewingY");if(b&&h==="x"||C&&h==="y")return!1;var w=p.getCenterPoint(),S=p.toLocalPoint(new t.Point(l,s),"center","center")[h],T=p.toLocalPoint(new t.Point(d.lastX,d.lastY),"center","center")[h],A,M,E=p._getTransformedDimensions();return this._changeSkewTransformOrigin(S-T,d,h),A=p.toLocalPoint(new t.Point(l,s),d.originX,d.originY)[h],M=p.translateToOriginPoint(w,d.originX,d.originY),v=this._setObjectSkew(A,d,h,E),d.lastX=l,d.lastY=s,p.setPositionByOrigin(M,d.originX,d.originY),v},_setObjectSkew:function(l,s,h,d){var p=s.target,v,b=!1,C=s.skewSign,w,S,T,A,M,E,D,N;return h==="x"?(T="y",A="Y",M="X",D=0,N=p.skewY):(T="x",A="X",M="Y",D=p.skewX,N=0),S=p._getTransformedDimensions(D,N),E=2*Math.abs(l)-S[h],E<=2?v=0:(v=C*Math.atan(E/p["scale"+M]/(S[T]/p["scale"+A])),v=t.util.radiansToDegrees(v)),b=p["skew"+M]!==v,p.set("skew"+M,v),p["skew"+A]!==0&&(w=p._getTransformedDimensions(),v=d[T]/w[T]*p["scale"+A],p.set("scale"+A,v)),b},_scaleObject:function(l,s,h){var d=this._currentTransform,p=d.target,v=p.lockScalingX,b=p.lockScalingY,C=p.lockScalingFlip;if(v&&b)return!1;var w=p.translateToOriginPoint(p.getCenterPoint(),d.originX,d.originY),S=p.toLocalPoint(new t.Point(l,s),d.originX,d.originY),T=p._getTransformedDimensions(),A=!1;return this._setLocalMouse(S,d),A=this._setObjectScale(S,d,v,b,h,C,T),p.setPositionByOrigin(w,d.originX,d.originY),A},_setObjectScale:function(l,s,h,d,p,v,b){var C=s.target,w=!1,S=!1,T=!1,A=l.x*C.scaleX/b.x,M=l.y*C.scaleY/b.y,E=C.scaleX!==A,D=C.scaleY!==M;if(s.newScaleX=A,s.newScaleY=M,t.Textbox&&p==="x"&&C instanceof t.Textbox){var N=C.width*(l.x/b.x);return N>=C.getMinWidth()?(T=N!==C.width,C.set("width",N),T):!1}return v&&A<=0&&A<C.scaleX&&(w=!0,l.x=0),v&&M<=0&&M<C.scaleY&&(S=!0,l.y=0),p==="equally"&&!h&&!d?T=this._scaleObjectEqually(l,C,s,b):p?p==="x"&&!C.get("lockUniScaling")?w||h||C.set("scaleX",A)&&(T=E):p==="y"&&!C.get("lockUniScaling")&&(S||d||C.set("scaleY",M)&&(T=D)):(w||h||C.set("scaleX",A)&&(T=T||E),S||d||C.set("scaleY",M)&&(T=T||D)),w||S||this._flipObject(s,p),T},_scaleObjectEqually:function(l,s,h,d){var p=l.y+l.x,v=d.y*h.original.scaleY/s.scaleY+d.x*h.original.scaleX/s.scaleX,b,C=l.x<0?-1:1,w=l.y<0?-1:1,S,T;return S=C*Math.abs(h.original.scaleX*p/v),T=w*Math.abs(h.original.scaleY*p/v),b=S!==s.scaleX||T!==s.scaleY,s.set("scaleX",S),s.set("scaleY",T),b},_flipObject:function(l,s){l.newScaleX<0&&s!=="y"&&(l.originX==="left"?l.originX="right":l.originX==="right"&&(l.originX="left")),l.newScaleY<0&&s!=="x"&&(l.originY==="top"?l.originY="bottom":l.originY==="bottom"&&(l.originY="top"))},_setLocalMouse:function(l,s){var h=s.target,d=this.getZoom(),p=h.padding/d;s.originX==="right"?l.x*=-1:s.originX==="center"&&(l.x*=s.mouseXSign*2,l.x<0&&(s.mouseXSign=-s.mouseXSign)),s.originY==="bottom"?l.y*=-1:s.originY==="center"&&(l.y*=s.mouseYSign*2,l.y<0&&(s.mouseYSign=-s.mouseYSign)),n(l.x)>p?l.x<0?l.x+=p:l.x-=p:l.x=0,n(l.y)>p?l.y<0?l.y+=p:l.y-=p:l.y=0},_rotateObject:function(l,s){var h=this._currentTransform,d=h.target,p,p=d.translateToOriginPoint(d.getCenterPoint(),h.originX,h.originY);if(d.lockRotation)return!1;var v=r(h.ey-p.y,h.ex-p.x),b=r(s-p.y,l-p.x),C=c(b-v+h.theta),w=!0;if(d.snapAngle>0){var S=d.snapAngle,T=d.snapThreshold||S,A=Math.ceil(C/S)*S,M=Math.floor(C/S)*S;Math.abs(C-M)<T?C=M:Math.abs(C-A)<T&&(C=A)}return C<0&&(C=360+C),C%=360,d.angle===C?w=!1:(d.angle=C,d.setPositionByOrigin(p,h.originX,h.originY)),w},setCursor:function(l){this.upperCanvasEl.style.cursor=l},_drawSelection:function(l){var s=this._groupSelector,h=s.left,d=s.top,p=n(h),v=n(d);if(this.selectionColor&&(l.fillStyle=this.selectionColor,l.fillRect(s.ex-(h>0?0:-h),s.ey-(d>0?0:-d),p,v)),!(!this.selectionLineWidth||!this.selectionBorderColor))if(l.lineWidth=this.selectionLineWidth,l.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!o){var b=s.ex+a-(h>0?0:p),C=s.ey+a-(d>0?0:v);l.beginPath(),t.util.drawDashedLine(l,b,C,b+p,C,this.selectionDashArray),t.util.drawDashedLine(l,b,C+v-1,b+p,C+v-1,this.selectionDashArray),t.util.drawDashedLine(l,b,C,b,C+v,this.selectionDashArray),t.util.drawDashedLine(l,b+p-1,C,b+p-1,C+v,this.selectionDashArray),l.closePath(),l.stroke()}else t.Object.prototype._setLineDash.call(this,l,this.selectionDashArray),l.strokeRect(s.ex+a-(h>0?0:p),s.ey+a-(d>0?0:v),p,v)},findTarget:function(l,s){if(!this.skipTargetFind){var h=!0,d=this.getPointer(l,h),p=this._activeObject,v=this.getActiveObjects(),b,C;if(this.targets=[],v.length>1&&!s&&p===this._searchPossibleTargets([p],d)||v.length===1&&p._findTargetCorner(d))return p;if(v.length===1&&p===this._searchPossibleTargets([p],d))if(this.preserveObjectStacking)b=p,C=this.targets,this.targets=[];else return p;var w=this._searchPossibleTargets(this._objects,d);return l[this.altSelectionKey]&&w&&b&&w!==b&&(w=b,this.targets=C),w}},_checkTarget:function(l,s,h){if(s&&s.visible&&s.evented&&this.containsPoint(null,s,l))if((this.perPixelTargetFind||s.perPixelTargetFind)&&!s.isEditing){var d=this.isTargetTransparent(s,h.x,h.y);if(!d)return!0}else return!0},_searchPossibleTargets:function(l,s){for(var h,d=l.length,p;d--;){var v=l[d],b=v.group&&v.group.type!=="activeSelection"?this._normalizePointer(v.group,s):s;if(this._checkTarget(b,v,s)){h=l[d],h.subTargetCheck&&h instanceof t.Group&&(p=this._searchPossibleTargets(h._objects,s),p&&this.targets.push(p));break}}return h},restorePointerVpt:function(l){return t.util.transformPoint(l,t.util.invertTransform(this.viewportTransform))},getPointer:function(l,s){if(this._absolutePointer&&!s)return this._absolutePointer;if(this._pointer&&s)return this._pointer;var h=f(l),d=this.upperCanvasEl,p=d.getBoundingClientRect(),v=p.width||0,b=p.height||0,C;(!v||!b)&&("top"in p&&"bottom"in p&&(b=Math.abs(p.top-p.bottom)),"right"in p&&"left"in p&&(v=Math.abs(p.right-p.left))),this.calcOffset(),h.x=h.x-this._offset.left,h.y=h.y-this._offset.top,s||(h=this.restorePointerVpt(h));var w=this.getRetinaScaling();return w!==1&&(h.x/=w,h.y/=w),v===0||b===0?C={width:1,height:1}:C={width:d.width/v,height:d.height/b},{x:h.x*C.width,y:h.y*C.height}},_createUpperCanvas:function(){var l=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),s=this.lowerCanvasEl,h=this.upperCanvasEl;h?h.className="":(h=this._createCanvasElement(),this.upperCanvasEl=h),t.util.addClass(h,"upper-canvas "+l),this.wrapperEl.appendChild(h),this._copyCanvasStyle(s,h),this._applyCanvasStyle(h),this.contextTop=h.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=t.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),t.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),t.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(l){var s=this.width||l.width,h=this.height||l.height;t.util.setStyle(l,{position:"absolute",width:s+"px",height:h+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),l.width=s,l.height=h,t.util.makeElementUnselectable(l)},_copyCanvasStyle:function(l,s){s.style.cssText=l.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var l=this._activeObject;return l?l.type==="activeSelection"&&l._objects?l._objects.slice(0):[l]:[]},_onObjectRemoved:function(l){l===this._activeObject&&(this.fire("before:selection:cleared",{target:l}),this._discardActiveObject(),this.fire("selection:cleared",{target:l}),l.fire("deselected")),l===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",l)},_fireSelectionEvents:function(l,s){var h=!1,d=this.getActiveObjects(),p=[],v=[],b={e:s};l.forEach(function(C){d.indexOf(C)===-1&&(h=!0,C.fire("deselected",b),v.push(C))}),d.forEach(function(C){l.indexOf(C)===-1&&(h=!0,C.fire("selected",b),p.push(C))}),l.length>0&&d.length>0?(b.selected=p,b.deselected=v,b.updated=p[0]||v[0],b.target=this._activeObject,h&&this.fire("selection:updated",b)):d.length>0?(d.length===1&&(b.target=p[0],this.fire("object:selected",b)),b.selected=p,b.target=this._activeObject,this.fire("selection:created",b)):l.length>0&&(b.deselected=v,this.fire("selection:cleared",b))},setActiveObject:function(l,s){var h=this.getActiveObjects();return this._setActiveObject(l,s),this._fireSelectionEvents(h,s),this},_setActiveObject:function(l,s){return this._activeObject===l||!this._discardActiveObject(s,l)||l.onSelect({e:s})?!1:(this._activeObject=l,!0)},_discardActiveObject:function(l,s){var h=this._activeObject;if(h){if(h.onDeselect({e:l,object:s}))return!1;this._activeObject=null}return!0},discardActiveObject:function(l){var s=this.getActiveObjects(),h=this.getActiveObject();return s.length&&this.fire("before:selection:cleared",{target:h,e:l}),this._discardActiveObject(l),this._fireSelectionEvents(s,l),this},dispose:function(){var l=this.wrapperEl;return this.removeListeners(),l.removeChild(this.upperCanvasEl),l.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(s){t.util.cleanUpJsdomNode(this[s]),this[s]=void 0}.bind(this)),l.parentNode&&l.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,t.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(l){var s=this._activeObject;s&&s._renderControls(l)},_toObject:function(l,s,h){var d=this._realizeGroupTransformOnObject(l),p=this.callSuper("_toObject",l,s,h);return this._unwindGroupTransformOnObject(l,d),p},_realizeGroupTransformOnObject:function(l){if(l.group&&l.group.type==="activeSelection"&&this._activeObject===l.group){var s=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],h={};return s.forEach(function(d){h[d]=l[d]}),this._activeObject.realizeTransform(l),h}else return null},_unwindGroupTransformOnObject:function(l,s){s&&l.set(s)},_setSVGObject:function(l,s,h){var d=this._realizeGroupTransformOnObject(s);this.callSuper("_setSVGObject",l,s,h),this._unwindGroupTransformOnObject(s,d)},setViewportTransform:function(l){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),t.StaticCanvas.prototype.setViewportTransform.call(this,l)}});for(var u in t.StaticCanvas)u!=="prototype"&&(t.Canvas[u]=t.StaticCanvas[u])}(),function(){var f={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},i=t.util.addListener,c=t.util.removeListener,r=3,n=2,o=1,a={passive:!1};function u(l,s){return l.button&&l.button===s-1}t.util.object.extend(t.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(i,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(l,s){var h=this.upperCanvasEl,d=this._getEventPrefix();l(t.window,"resize",this._onResize),l(h,d+"down",this._onMouseDown),l(h,d+"move",this._onMouseMove,a),l(h,d+"out",this._onMouseOut),l(h,d+"enter",this._onMouseEnter),l(h,"wheel",this._onMouseWheel),l(h,"contextmenu",this._onContextMenu),l(h,"dblclick",this._onDoubleClick),l(h,"dragover",this._onDragOver),l(h,"dragenter",this._onDragEnter),l(h,"dragleave",this._onDragLeave),l(h,"drop",this._onDrop),this.enablePointerEvents||l(h,"touchstart",this._onTouchStart,a),typeof eventjs!="undefined"&&s in eventjs&&(eventjs[s](h,"gesture",this._onGesture),eventjs[s](h,"drag",this._onDrag),eventjs[s](h,"orientation",this._onOrientationChange),eventjs[s](h,"shake",this._onShake),eventjs[s](h,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(c,"remove");var l=this._getEventPrefix();c(t.document,l+"up",this._onMouseUp),c(t.document,"touchend",this._onTouchEnd,a),c(t.document,l+"move",this._onMouseMove,a),c(t.document,"touchmove",this._onMouseMove,a)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(l,s){this.__onTransformGesture&&this.__onTransformGesture(l,s)},_onDrag:function(l,s){this.__onDrag&&this.__onDrag(l,s)},_onMouseWheel:function(l){this.__onMouseWheel(l)},_onMouseOut:function(l){var s=this._hoveredTarget;this.fire("mouse:out",{target:s,e:l}),this._hoveredTarget=null,s&&s.fire("mouseout",{e:l});var h=this;this._hoveredTargets.forEach(function(d){h.fire("mouse:out",{target:s,e:l}),d&&s.fire("mouseout",{e:l})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(d){d.isEditing&&d.hiddenTextarea.focus()})},_onMouseEnter:function(l){!this.currentTransform&&!this.findTarget(l)&&(this.fire("mouse:over",{target:null,e:l}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(l,s){this.__onOrientationChange&&this.__onOrientationChange(l,s)},_onShake:function(l,s){this.__onShake&&this.__onShake(l,s)},_onLongPress:function(l,s){this.__onLongPress&&this.__onLongPress(l,s)},_onDragOver:function(l){l.preventDefault();var s=this._simpleEventHandler("dragover",l);this._fireEnterLeaveEvents(s,l)},_onContextMenu:function(l){return this.stopContextMenu&&(l.stopPropagation(),l.preventDefault()),!1},_onDoubleClick:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"dblclick"),this._resetTransformEventData(l)},getPointerId:function(l){var s=l.changedTouches;return s?s[0]&&s[0].identifier:this.enablePointerEvents?l.pointerId:-1},_isMainEvent:function(l){return l.isPrimary===!0?!0:l.isPrimary===!1?!1:l.type==="touchend"&&l.touches.length===0?!0:l.changedTouches?l.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(l){l.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(l)),this.__onMouseDown(l),this._resetTransformEventData();var s=this.upperCanvasEl,h=this._getEventPrefix();i(t.document,"touchend",this._onTouchEnd,a),i(t.document,"touchmove",this._onMouseMove,a),c(s,h+"down",this._onMouseDown)},_onMouseDown:function(l){this.__onMouseDown(l),this._resetTransformEventData();var s=this.upperCanvasEl,h=this._getEventPrefix();c(s,h+"move",this._onMouseMove,a),i(t.document,h+"up",this._onMouseUp),i(t.document,h+"move",this._onMouseMove,a)},_onTouchEnd:function(l){if(!(l.touches.length>0)){this.__onMouseUp(l),this._resetTransformEventData(),this.mainTouchId=null;var s=this._getEventPrefix();c(t.document,"touchend",this._onTouchEnd,a),c(t.document,"touchmove",this._onMouseMove,a);var h=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){i(h.upperCanvasEl,s+"down",h._onMouseDown),h._willAddMouseDown=0},400)}},_onMouseUp:function(l){this.__onMouseUp(l),this._resetTransformEventData();var s=this.upperCanvasEl,h=this._getEventPrefix();this._isMainEvent(l)&&(c(t.document,h+"up",this._onMouseUp),c(t.document,h+"move",this._onMouseMove,a),i(s,h+"move",this._onMouseMove,a))},_onMouseMove:function(l){!this.allowTouchScrolling&&l.preventDefault&&l.preventDefault(),this.__onMouseMove(l)},_onResize:function(){this.calcOffset()},_shouldRender:function(l){var s=this._activeObject;return!!s!=!!l||s&&l&&s!==l?!0:(s&&s.isEditing,!1)},__onMouseUp:function(l){var s,h=this._currentTransform,d=this._groupSelector,p=!1,v=!d||d.left===0&&d.top===0;if(this._cacheTransformEventData(l),s=this._target,this._handleEvent(l,"up:before"),u(l,r)){this.fireRightClick&&this._handleEvent(l,"up",r,v);return}if(u(l,n)){this.fireMiddleClick&&this._handleEvent(l,"up",n,v),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(l);return}!this._isMainEvent(l)||(h&&(this._finalizeCurrentTransform(l),p=h.actionPerformed),v||(this._maybeGroupObjects(l),p||(p=this._shouldRender(s))),s&&(s.isMoving=!1),this._setCursorFromEvent(l,s),this._handleEvent(l,"up",o,v),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=0),p?this.requestRenderAll():v||this.renderTop())},_simpleEventHandler:function(l,s){var h=this.findTarget(s),d=this.targets,p={e:s,target:h,subTargets:d};if(this.fire(l,p),h&&h.fire(l,p),!d)return h;for(var v=0;v<d.length;v++)d[v].fire(l,p);return h},_handleEvent:function(l,s,h,d){var p=this._target,v=this.targets||[],b={e:l,target:p,subTargets:v,button:h||o,isClick:d||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};this.fire("mouse:"+s,b),p&&p.fire("mouse"+s,b);for(var C=0;C<v.length;C++)v[C].fire("mouse"+s,b)},_finalizeCurrentTransform:function(l){var s=this._currentTransform,h=s.target,d,p={e:l,target:h,transform:s};h._scaling&&(h._scaling=!1),h.setCoords(),(s.actionPerformed||this.stateful&&h.hasStateChanged())&&(s.actionPerformed&&(d=this._addEventOptions(p,s),this._fire(d,p)),this._fire("modified",p))},_addEventOptions:function(l,s){var h,d;switch(s.action){case"scaleX":h="scaled",d="x";break;case"scaleY":h="scaled",d="y";break;case"skewX":h="skewed",d="x";break;case"skewY":h="skewed",d="y";break;case"scale":h="scaled",d="equally";break;case"rotate":h="rotated";break;case"drag":h="moved";break}return l.by=d,h},_onMouseDownInDrawingMode:function(l){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(l).requestRenderAll(),this.clipTo&&t.util.clipContext(this,this.contextTop);var s=this.getPointer(l);this.freeDrawingBrush.onMouseDown(s,{e:l,pointer:s}),this._handleEvent(l,"down")},_onMouseMoveInDrawingMode:function(l){if(this._isCurrentlyDrawing){var s=this.getPointer(l);this.freeDrawingBrush.onMouseMove(s,{e:l,pointer:s})}this.setCursor(this.freeDrawingCursor),this._handleEvent(l,"move")},_onMouseUpInDrawingMode:function(l){this.clipTo&&this.contextTop.restore();var s=this.getPointer(l);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:l,pointer:s}),this._handleEvent(l,"up")},__onMouseDown:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"down:before");var s=this._target;if(u(l,r)){this.fireRightClick&&this._handleEvent(l,"down",r);return}if(u(l,n)){this.fireMiddleClick&&this._handleEvent(l,"down",n);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(l);return}if(!!this._isMainEvent(l)&&!this._currentTransform){var h=this._pointer;this._previousPointer=h;var d=this._shouldRender(s),p=this._shouldGroup(l,s);if(this._shouldClearSelection(l,s)?this.discardActiveObject(l):p&&(this._handleGrouping(l,s),s=this._activeObject),this.selection&&(!s||!s.selectable&&!s.isEditing&&s!==this._activeObject)&&(this._groupSelector={ex:h.x,ey:h.y,top:0,left:0}),s){var v=s===this._activeObject;s.selectable&&this.setActiveObject(s,l),s===this._activeObject&&(s.__corner||!p)&&this._setupCurrentTransform(l,s,v)}this._handleEvent(l,"down"),(d||p)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(l){this._resetTransformEventData(),this._pointer=this.getPointer(l,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(l)||null},_beforeTransform:function(l){var s=this._currentTransform;this.stateful&&s.target.saveState(),this.fire("before:transform",{e:l,transform:s}),s.corner&&this.onBeforeScaleRotate(s.target)},__onMouseMove:function(l){this._handleEvent(l,"move:before"),this._cacheTransformEventData(l);var s,h;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(l);return}if(!!this._isMainEvent(l)){var d=this._groupSelector;d?(h=this._pointer,d.left=h.x-d.ex,d.top=h.y-d.ey,this.renderTop()):this._currentTransform?this._transformObject(l):(s=this.findTarget(l)||null,this._setCursorFromEvent(l,s),this._fireOverOutEvents(s,l)),this._handleEvent(l,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(l,s){var h=this._hoveredTarget,d=this._hoveredTargets,p=this.targets,v=Math.max(d.length,p.length);this.fireSyntheticInOutEvents(l,s,{oldTarget:h,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var b=0;b<v;b++)this.fireSyntheticInOutEvents(p[b],s,{oldTarget:d[b],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=l,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(l,s){var h=this._draggedoverTarget,d=this._hoveredTargets,p=this.targets,v=Math.max(d.length,p.length);this.fireSyntheticInOutEvents(l,s,{oldTarget:h,evtOut:"dragleave",evtIn:"dragenter"});for(var b=0;b<v;b++)this.fireSyntheticInOutEvents(p[b],s,{oldTarget:d[b],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=l},fireSyntheticInOutEvents:function(l,s,h){var d,p,v=h.oldTarget,b,C,w=v!==l,S=h.canvasEvtIn,T=h.canvasEvtOut;w&&(d={e:s,target:l,previousTarget:v},p={e:s,target:v,nextTarget:l}),C=l&&w,b=v&&w,b&&(T&&this.fire(T,p),v.fire(h.evtOut,p)),C&&(S&&this.fire(S,d),l.fire(h.evtIn,d))},__onMouseWheel:function(l){this._cacheTransformEventData(l),this._handleEvent(l,"wheel"),this._resetTransformEventData()},_transformObject:function(l){var s=this.getPointer(l),h=this._currentTransform;h.reset=!1,h.target.isMoving=!0,h.shiftKey=l.shiftKey,h.altKey=l[this.centeredKey],this._beforeScaleTransform(l,h),this._performTransformAction(l,h,s),h.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(l,s,h){var d=h.x,p=h.y,v=s.action,b=!1,C={target:s.target,e:l,transform:s,pointer:h};v==="rotate"?(b=this._rotateObject(d,p))&&this._fire("rotating",C):v==="scale"?(b=this._onScale(l,s,d,p))&&this._fire("scaling",C):v==="scaleX"?(b=this._scaleObject(d,p,"x"))&&this._fire("scaling",C):v==="scaleY"?(b=this._scaleObject(d,p,"y"))&&this._fire("scaling",C):v==="skewX"?(b=this._skewObject(d,p,"x"))&&this._fire("skewing",C):v==="skewY"?(b=this._skewObject(d,p,"y"))&&this._fire("skewing",C):(b=this._translateObject(d,p),b&&(this._fire("moving",C),this.setCursor(C.target.moveCursor||this.moveCursor))),s.actionPerformed=s.actionPerformed||b},_fire:function(l,s){this.fire("object:"+l,s),s.target.fire(l,s)},_beforeScaleTransform:function(l,s){if(s.action==="scale"||s.action==="scaleX"||s.action==="scaleY"){var h=this._shouldCenterTransform(s.target);(h&&(s.originX!=="center"||s.originY!=="center")||!h&&s.originX==="center"&&s.originY==="center")&&(this._resetCurrentTransform(),s.reset=!0)}},_onScale:function(l,s,h,d){return this._isUniscalePossible(l,s.target)?(s.currentAction="scale",this._scaleObject(h,d)):(!s.reset&&s.currentAction==="scale"&&this._resetCurrentTransform(),s.currentAction="scaleEqually",this._scaleObject(h,d,"equally"))},_isUniscalePossible:function(l,s){return(l[this.uniScaleKey]||this.uniScaleTransform)&&!s.get("lockUniScaling")},_setCursorFromEvent:function(l,s){if(!s)return this.setCursor(this.defaultCursor),!1;var h=s.hoverCursor||this.hoverCursor,d=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,p=(!d||!d.contains(s))&&s._findTargetCorner(this.getPointer(l,!0));p?this.setCursor(this.getCornerCursor(p,s,l)):(s.subTargetCheck&&this.targets.concat().reverse().map(function(v){h=v.hoverCursor||h}),this.setCursor(h))},getCornerCursor:function(l,s,h){return this.actionIsDisabled(l,s,h)?this.notAllowedCursor:l in f?this._getRotatedCornerCursor(l,s,h):l==="mtr"&&s.hasRotatingPoint?this.rotationCursor:this.defaultCursor},actionIsDisabled:function(l,s,h){return l==="mt"||l==="mb"?h[this.altActionKey]?s.lockSkewingX:s.lockScalingY:l==="ml"||l==="mr"?h[this.altActionKey]?s.lockSkewingY:s.lockScalingX:l==="mtr"?s.lockRotation:this._isUniscalePossible(h,s)?s.lockScalingX&&s.lockScalingY:s.lockScalingX||s.lockScalingY},_getRotatedCornerCursor:function(l,s,h){var d=Math.round(s.angle%360/45);return d<0&&(d+=8),d+=f[l],h[this.altActionKey]&&f[l]%2===0&&(d+=2),d%=8,this.cursorMap[d]}})}(),function(){var f=Math.min,i=Math.max;t.util.object.extend(t.Canvas.prototype,{_shouldGroup:function(c,r){var n=this._activeObject;return n&&this._isSelectionKeyPressed(c)&&r&&r.selectable&&this.selection&&(n!==r||n.type==="activeSelection")&&!r.onSelect({e:c})},_handleGrouping:function(c,r){var n=this._activeObject;n.__corner||r===n&&(r=this.findTarget(c,!0),!r||!r.selectable)||(n&&n.type==="activeSelection"?this._updateActiveSelection(r,c):this._createActiveSelection(r,c))},_updateActiveSelection:function(c,r){var n=this._activeObject,o=n._objects.slice(0);n.contains(c)?(n.removeWithUpdate(c),this._hoveredTarget=c,this._hoveredTargets=this.targets.concat(),n.size()===1&&this._setActiveObject(n.item(0),r)):(n.addWithUpdate(c),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(o,r)},_createActiveSelection:function(c,r){var n=this.getActiveObjects(),o=this._createGroup(c);this._hoveredTarget=o,this._setActiveObject(o,r),this._fireSelectionEvents(n,r)},_createGroup:function(c){var r=this._objects,n=r.indexOf(this._activeObject)<r.indexOf(c),o=n?[this._activeObject,c]:[c,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new t.ActiveSelection(o,{canvas:this})},_groupSelectedObjects:function(c){var r=this._collectObjects(c),n;r.length===1?this.setActiveObject(r[0],c):r.length>1&&(n=new t.ActiveSelection(r.reverse(),{canvas:this}),this.setActiveObject(n,c))},_collectObjects:function(c){for(var r=[],n,o=this._groupSelector.ex,a=this._groupSelector.ey,u=o+this._groupSelector.left,l=a+this._groupSelector.top,s=new t.Point(f(o,u),f(a,l)),h=new t.Point(i(o,u),i(a,l)),d=!this.selectionFullyContained,p=o===u&&a===l,v=this._objects.length;v--&&(n=this._objects[v],!(!(!n||!n.selectable||!n.visible)&&(d&&n.intersectsWithRect(s,h)||n.isContainedWithinRect(s,h)||d&&n.containsPoint(s)||d&&n.containsPoint(h))&&(r.push(n),p))););return r.length>1&&(r=r.filter(function(b){return!b.onSelect({e:c})})),r},_maybeGroupObjects:function(c){this.selection&&this._groupSelector&&this._groupSelectedObjects(c),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){t.util.object.extend(t.StaticCanvas.prototype,{toDataURL:function(f){f||(f={});var i=f.format||"png",c=f.quality||1,r=(f.multiplier||1)*(f.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(r,f);return t.util.toDataURL(n,i,c)},toCanvasElement:function(f,i){f=f||1,i=i||{};var c=(i.width||this.width)*f,r=(i.height||this.height)*f,n=this.getZoom(),o=this.width,a=this.height,u=n*f,l=this.viewportTransform,s=(l[4]-(i.left||0))*f,h=(l[5]-(i.top||0))*f,d=this.interactive,p=[u,0,0,u,s,h],v=this.enableRetinaScaling,b=t.util.createCanvasElement(),C=this.contextTop;return b.width=c,b.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=p,this.width=c,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),this._objects),this.viewportTransform=l,this.width=o,this.height=a,this.calcViewportBoundaries(),this.interactive=d,this.enableRetinaScaling=v,this.contextTop=C,b}})}(),t.util.object.extend(t.StaticCanvas.prototype,{loadFromDatalessJSON:function(f,i,c){return this.loadFromJSON(f,i,c)},loadFromJSON:function(f,i,c){if(!!f){var r=typeof f=="string"?JSON.parse(f):t.util.object.clone(f),n=this,o=r.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,function(u){n.clear(),n._setBgOverlay(r,function(){o?n._enlivenObjects([o],function(l){n.clipPath=l[0],n.__setupCanvas.call(n,r,u,a,i)}):n.__setupCanvas.call(n,r,u,a,i)})},c),this}},__setupCanvas:function(f,i,c,r){var n=this;i.forEach(function(o,a){n.insertAt(o,a)}),this.renderOnAddRemove=c,delete f.objects,delete f.backgroundImage,delete f.overlayImage,delete f.background,delete f.overlay,this._setOptions(f),this.renderAll(),r&&r()},_setBgOverlay:function(f,i){var c={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!f.backgroundImage&&!f.overlayImage&&!f.background&&!f.overlay){i&&i();return}var r=function(){c.backgroundImage&&c.overlayImage&&c.backgroundColor&&c.overlayColor&&i&&i()};this.__setBgOverlay("backgroundImage",f.backgroundImage,c,r),this.__setBgOverlay("overlayImage",f.overlayImage,c,r),this.__setBgOverlay("backgroundColor",f.background,c,r),this.__setBgOverlay("overlayColor",f.overlay,c,r)},__setBgOverlay:function(f,i,c,r){var n=this;if(!i){c[f]=!0,r&&r();return}f==="backgroundImage"||f==="overlayImage"?t.util.enlivenObjects([i],function(o){n[f]=o[0],c[f]=!0,r&&r()}):this["set"+t.util.string.capitalize(f,!0)](i,function(){c[f]=!0,r&&r()})},_enlivenObjects:function(f,i,c){if(!f||f.length===0){i&&i([]);return}t.util.enlivenObjects(f,function(r){i&&i(r)},null,c)},_toDataURL:function(f,i){this.clone(function(c){i(c.toDataURL(f))})},_toDataURLWithMultiplier:function(f,i,c){this.clone(function(r){c(r.toDataURLWithMultiplier(f,i))})},clone:function(f,i){var c=JSON.stringify(this.toJSON(i));this.cloneWithoutData(function(r){r.loadFromJSON(c,function(){f&&f(r)})})},cloneWithoutData:function(f){var i=t.util.createCanvasElement();i.width=this.width,i.height=this.height;var c=new t.Canvas(i);c.clipTo=this.clipTo,this.backgroundImage?(c.setBackgroundImage(this.backgroundImage.src,function(){c.renderAll(),f&&f(c)}),c.backgroundImageOpacity=this.backgroundImageOpacity,c.backgroundImageStretch=this.backgroundImageStretch):f&&f(c)}}),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.object.clone,n=i.util.toFixed,o=i.util.string.capitalize,a=i.util.degreesToRadians,u=i.StaticCanvas.supports("setLineDash"),l=!i.isLikelyNode,s=2;i.Object||(i.Object=i.util.createClass(i.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",borderDashArray:null,cornerColor:"rgba(102,153,255,0.5)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:l,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(h){h&&this.setOptions(h)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=i.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(h){var d=i.perfLimitSizeTotal,p=h.width,v=h.height,b=i.maxCacheSideLimit,C=i.minCacheSideLimit;if(p<=b&&v<=b&&p*v<=d)return p<C&&(h.width=C),v<C&&(h.height=C),h;var w=p/v,S=i.util.limitDimsByArea(w,d),T=i.util.capValue,A=T(C,S.x,b),M=T(C,S.y,b);return p>A&&(h.zoomX/=p/A,h.width=A,h.capped=!0),v>M&&(h.zoomY/=v/M,h.height=M,h.capped=!0),h},_getCacheCanvasDimensions:function(){var h=this.getTotalObjectScaling(),d=this._getTransformedDimensions(0,0),p=d.x*h.scaleX/this.scaleX,v=d.y*h.scaleY/this.scaleY;return{width:p+s,height:v+s,zoomX:h.scaleX,zoomY:h.scaleY,x:p,y:v}},_updateCacheCanvas:function(){var h=this.canvas;if(this.noScaleCache&&h&&h._currentTransform){var d=h._currentTransform.target,p=h._currentTransform.action;if(this===d&&p.slice&&p.slice(0,5)==="scale")return!1}var v=this._cacheCanvas,b=this._limitCacheSize(this._getCacheCanvasDimensions()),C=i.minCacheSideLimit,w=b.width,S=b.height,T,A,M=b.zoomX,E=b.zoomY,D=w!==this.cacheWidth||S!==this.cacheHeight,N=this.zoomX!==M||this.zoomY!==E,K=D||N,U=0,Q=0,re=!1;if(D){var k=this._cacheCanvas.width,z=this._cacheCanvas.height,W=w>k||S>z,G=(w<k*.9||S<z*.9)&&k>C&&z>C;re=W||G,W&&!b.capped&&(w>C||S>C)&&(U=w*.1,Q=S*.1)}return K?(re?(v.width=Math.ceil(w+U),v.height=Math.ceil(S+Q)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,v.width,v.height)),T=b.x/2,A=b.y/2,this.cacheTranslationX=Math.round(v.width/2-T)+T,this.cacheTranslationY=Math.round(v.height/2-A)+A,this.cacheWidth=w,this.cacheHeight=S,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(M,E),this.zoomX=M,this.zoomY=E,!0):!1},setOptions:function(h){this._setOptions(h),this._initGradient(h.fill,"fill"),this._initGradient(h.stroke,"stroke"),this._initClipping(h),this._initPattern(h.fill,"fill"),this._initPattern(h.stroke,"stroke")},transform:function(h){var d;this.group&&!this.group._transformDone?d=this.calcTransformMatrix():d=this.calcOwnMatrix(),h.transform(d[0],d[1],d[2],d[3],d[4],d[5])},toObject:function(h){var d=i.Object.NUM_FRACTION_DIGITS,p={type:this.type,version:i.version,originX:this.originX,originY:this.originY,left:n(this.left,d),top:n(this.top,d),width:n(this.width,d),height:n(this.height,d),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,d),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:n(this.strokeMiterLimit,d),scaleX:n(this.scaleX,d),scaleY:n(this.scaleY,d),angle:n(this.angle,d),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,d),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,transformMatrix:this.transformMatrix?this.transformMatrix.concat():null,skewX:n(this.skewX,d),skewY:n(this.skewY,d)};return this.clipPath&&(p.clipPath=this.clipPath.toObject(h),p.clipPath.inverted=this.clipPath.inverted,p.clipPath.absolutePositioned=this.clipPath.absolutePositioned),i.util.populateWithProperties(this,p,h),this.includeDefaultValues||(p=this._removeDefaultValues(p)),p},toDatalessObject:function(h){return this.toObject(h)},_removeDefaultValues:function(h){var d=i.util.getKlass(h.type).prototype,p=d.stateProperties;return p.forEach(function(v){if(!(v==="left"||v==="top")){h[v]===d[v]&&delete h[v];var b=Object.prototype.toString.call(h[v])==="[object Array]"&&Object.prototype.toString.call(d[v])==="[object Array]";b&&h[v].length===0&&d[v].length===0&&delete h[v]}}),h},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var h=i.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(h.scaleX),scaleY:Math.abs(h.scaleY)}},getTotalObjectScaling:function(){var h=this.getObjectScaling(),d=h.scaleX,p=h.scaleY;if(this.canvas){var v=this.canvas.getZoom(),b=this.canvas.getRetinaScaling();d*=v*b,p*=v*b}return{scaleX:d,scaleY:p}},getObjectOpacity:function(){var h=this.opacity;return this.group&&(h*=this.group.getObjectOpacity()),h},_set:function(h,d){var p=h==="scaleX"||h==="scaleY",v=this[h]!==d,b=!1;return p&&(d=this._constrainScale(d)),h==="scaleX"&&d<0?(this.flipX=!this.flipX,d*=-1):h==="scaleY"&&d<0?(this.flipY=!this.flipY,d*=-1):h==="shadow"&&d&&!(d instanceof i.Shadow)?d=new i.Shadow(d):h==="dirty"&&this.group&&this.group.set("dirty",d),this[h]=d,v&&(b=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(h)>-1?(this.dirty=!0,b&&this.group.set("dirty",!0)):b&&this.stateProperties.indexOf(h)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:i.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||this.width===0&&this.height===0&&this.strokeWidth===0||!this.visible},render:function(h){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(h.save(),this._setupCompositeOperation(h),this.drawSelectionBackground(h),this.transform(h),this._setOpacity(h),this._setShadow(h,this),this.transformMatrix&&h.transform.apply(h,this.transformMatrix),this.clipTo&&i.util.clipContext(this,h),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(h)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(h),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),this.clipTo&&h.restore(),h.restore())},renderCache:function(h){h=h||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,h.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(h){var d=this.clipPath;if(h.save(),d.inverted?h.globalCompositeOperation="destination-out":h.globalCompositeOperation="destination-in",d.absolutePositioned){var p=i.util.invertTransform(this.calcTransformMatrix());h.transform(p[0],p[1],p[2],p[3],p[4],p[5])}d.transform(h),h.scale(1/d.zoomX,1/d.zoomY),h.drawImage(d._cacheCanvas,-d.cacheTranslationX,-d.cacheTranslationY),h.restore()},drawObject:function(h,d){var p=this.fill,v=this.stroke;d?(this.fill="black",this.stroke="",this._setClippingProperties(h)):(this._renderBackground(h),this._setStrokeStyles(h,this),this._setFillStyles(h,this)),this._render(h),this._drawClipPath(h),this.fill=p,this.stroke=v},_drawClipPath:function(h){var d=this.clipPath;!d||(d.canvas=this.canvas,d.shouldCache(),d._transformDone=!0,d.renderCache({forClipping:!0}),this.drawClipPathOnCache(h))},drawCacheOnCanvas:function(h){h.scale(1/this.zoomX,1/this.zoomY),h.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(h){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!h&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!h){var d=this.cacheWidth/this.zoomX,p=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-d/2,-p/2,d,p)}return!0}return!1},_renderBackground:function(h){if(!!this.backgroundColor){var d=this._getNonTransformedDimensions();h.fillStyle=this.backgroundColor,h.fillRect(-d.x/2,-d.y/2,d.x,d.y),this._removeShadow(h)}},_setOpacity:function(h){this.group&&!this.group._transformDone?h.globalAlpha=this.getObjectOpacity():h.globalAlpha*=this.opacity},_setStrokeStyles:function(h,d){d.stroke&&(h.lineWidth=d.strokeWidth,h.lineCap=d.strokeLineCap,h.lineDashOffset=d.strokeDashOffset,h.lineJoin=d.strokeLineJoin,h.miterLimit=d.strokeMiterLimit,h.strokeStyle=d.stroke.toLive?d.stroke.toLive(h,this):d.stroke)},_setFillStyles:function(h,d){d.fill&&(h.fillStyle=d.fill.toLive?d.fill.toLive(h,this):d.fill)},_setClippingProperties:function(h){h.globalAlpha=1,h.strokeStyle="transparent",h.fillStyle="#000000"},_setLineDash:function(h,d,p){!d||d.length===0||(1&d.length&&d.push.apply(d,d),u?h.setLineDash(d):p&&p(h))},_renderControls:function(h,d){var p=this.getViewportTransform(),v=this.calcTransformMatrix(),b,C,w;d=d||{},C=typeof d.hasBorders!="undefined"?d.hasBorders:this.hasBorders,w=typeof d.hasControls!="undefined"?d.hasControls:this.hasControls,v=i.util.multiplyTransformMatrices(p,v),b=i.util.qrDecompose(v),h.save(),h.translate(b.translateX,b.translateY),h.lineWidth=1*this.borderScaleFactor,this.group||(h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),d.forActiveSelection?(h.rotate(a(b.angle)),C&&this.drawBordersInGroup(h,b,d)):(h.rotate(a(this.angle)),C&&this.drawBorders(h,d)),w&&this.drawControls(h,d),h.restore()},_setShadow:function(h){if(!!this.shadow){var d=this.shadow,p=this.canvas,v,b=p&&p.viewportTransform[0]||1,C=p&&p.viewportTransform[3]||1;d.nonScaling?v={scaleX:1,scaleY:1}:v=this.getObjectScaling(),p&&p._isRetinaScaling()&&(b*=i.devicePixelRatio,C*=i.devicePixelRatio),h.shadowColor=d.color,h.shadowBlur=d.blur*i.browserShadowBlurConstant*(b+C)*(v.scaleX+v.scaleY)/4,h.shadowOffsetX=d.offsetX*b*v.scaleX,h.shadowOffsetY=d.offsetY*C*v.scaleY}},_removeShadow:function(h){!this.shadow||(h.shadowColor="",h.shadowBlur=h.shadowOffsetX=h.shadowOffsetY=0)},_applyPatternGradientTransform:function(h,d){if(!d||!d.toLive)return{offsetX:0,offsetY:0};var p=d.gradientTransform||d.patternTransform,v=-this.width/2+d.offsetX||0,b=-this.height/2+d.offsetY||0;return d.gradientUnits==="percentage"?h.transform(this.width,0,0,this.height,v,b):h.transform(1,0,0,1,v,b),p&&h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),{offsetX:v,offsetY:b}},_renderPaintInOrder:function(h){this.paintFirst==="stroke"?(this._renderStroke(h),this._renderFill(h)):(this._renderFill(h),this._renderStroke(h))},_render:function(){},_renderFill:function(h){!this.fill||(h.save(),this._applyPatternGradientTransform(h,this.fill),this.fillRule==="evenodd"?h.fill("evenodd"):h.fill(),h.restore())},_renderStroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(h),h.save(),this.strokeUniform&&this.group){var d=this.getObjectScaling();h.scale(1/d.scaleX,1/d.scaleY)}else this.strokeUniform&&h.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(h,this.strokeDashArray,this._renderDashedStroke),this.stroke.toLive&&this.stroke.gradientUnits==="percentage"?this._applyPatternForTransformedGradient(h,this.stroke):this._applyPatternGradientTransform(h,this.stroke),h.stroke(),h.restore()}},_applyPatternForTransformedGradient:function(h,d){var p=this._limitCacheSize(this._getCacheCanvasDimensions()),v=i.util.createCanvasElement(),b,C=this.canvas.getRetinaScaling(),w=p.x/this.scaleX/C,S=p.y/this.scaleY/C;v.width=w,v.height=S,b=v.getContext("2d"),b.beginPath(),b.moveTo(0,0),b.lineTo(w,0),b.lineTo(w,S),b.lineTo(0,S),b.closePath(),b.translate(w/2,S/2),b.scale(p.zoomX/this.scaleX/C,p.zoomY/this.scaleY/C),this._applyPatternGradientTransform(b,d),b.fillStyle=d.toLive(h),b.fill(),h.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),h.scale(C*this.scaleX/p.zoomX,C*this.scaleY/p.zoomY),h.strokeStyle=b.createPattern(v,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var h=i.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",h.scaleX),this.set("scaleY",h.scaleY),this.angle=h.angle,this.skewX=h.skewX,this.skewY=0}},_removeTransformMatrix:function(h){var d=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),d=i.util.transformPoint(d,this.transformMatrix)),this.transformMatrix=null,h&&(this.scaleX*=h.scaleX,this.scaleY*=h.scaleY,this.cropX=h.cropX,this.cropY=h.cropY,d.x+=h.offsetLeft,d.y+=h.offsetTop,this.width=h.width,this.height=h.height),this.setPositionByOrigin(d,"center","center")},clone:function(h,d){var p=this.toObject(d);this.constructor.fromObject?this.constructor.fromObject(p,h):i.Object._fromObject("Object",p,h)},cloneAsImage:function(h,d){var p=this.toCanvasElement(d);return h&&h(new i.Image(p)),this},toCanvasElement:function(h){h||(h={});var d=i.util,p=d.saveObjectTransform(this),v=this.group,b=this.shadow,C=Math.abs,w=(h.multiplier||1)*(h.enableRetinaScaling?i.devicePixelRatio:1);delete this.group,h.withoutTransform&&d.resetObjectTransform(this),h.withoutShadow&&(this.shadow=null);var S=i.util.createCanvasElement(),T=this.getBoundingRect(!0,!0),A=this.shadow,M,E={x:0,y:0},D,N,K;A&&(D=A.blur,A.nonScaling?M={scaleX:1,scaleY:1}:M=this.getObjectScaling(),E.x=2*Math.round(C(A.offsetX)+D)*C(M.scaleX),E.y=2*Math.round(C(A.offsetY)+D)*C(M.scaleY)),N=T.width+E.x,K=T.height+E.y,S.width=Math.ceil(N),S.height=Math.ceil(K);var U=new i.StaticCanvas(S,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});h.format==="jpeg"&&(U.backgroundColor="#fff"),this.setPositionByOrigin(new i.Point(U.width/2,U.height/2),"center","center");var Q=this.canvas;U.add(this);var re=U.toCanvasElement(w||1,h);return this.shadow=b,this.set("canvas",Q),v&&(this.group=v),this.set(p).setCoords(),U._objects=[],U.dispose(),U=null,re},toDataURL:function(h){return h||(h={}),i.util.toDataURL(this.toCanvasElement(h),h.format||"png",h.quality||1)},isType:function(h){return this.type===h},complexity:function(){return 1},toJSON:function(h){return this.toObject(h)},setGradient:function(h,d){d||(d={});var p={colorStops:[]};return p.type=d.type||(d.r1||d.r2?"radial":"linear"),p.coords={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2},p.gradientUnits=d.gradientUnits||"pixels",(d.r1||d.r2)&&(p.coords.r1=d.r1,p.coords.r2=d.r2),p.gradientTransform=d.gradientTransform,i.Gradient.prototype.addColorStop.call(p,d.colorStops),this.set(h,i.Gradient.forObject(this,p))},setPatternFill:function(h,d){return this.set("fill",new i.Pattern(h,d))},setShadow:function(h){return this.set("shadow",h?new i.Shadow(h):null)},setColor:function(h){return this.set("fill",h),this},rotate:function(h){var d=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return d&&this._setOriginToCenter(),this.set("angle",h),d&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(h,d){d=d||this.canvas.getPointer(h);var p=new i.Point(d.x,d.y),v=this._getLeftTopCoords();return this.angle&&(p=i.util.rotatePoint(p,v,a(-this.angle))),{x:p.x-v.x,y:p.y-v.y}},_setupCompositeOperation:function(h){this.globalCompositeOperation&&(h.globalCompositeOperation=this.globalCompositeOperation)}}),i.util.createAccessors&&i.util.createAccessors(i.Object),c(i.Object.prototype,i.Observable),i.Object.NUM_FRACTION_DIGITS=2,i.Object._fromObject=function(h,d,p,v){var b=i[h];d=r(d,!0),i.util.enlivenPatterns([d.fill,d.stroke],function(C){typeof C[0]!="undefined"&&(d.fill=C[0]),typeof C[1]!="undefined"&&(d.stroke=C[1]),i.util.enlivenObjects([d.clipPath],function(w){d.clipPath=w[0];var S=v?new b(d[v],d):new b(d);p&&p(S)})})},i.Object.__uid=0)}(e),function(){var f=t.util.degreesToRadians,i={left:-.5,center:0,right:.5},c={top:-.5,center:0,bottom:.5};t.util.object.extend(t.Object.prototype,{translateToGivenOrigin:function(r,n,o,a,u){var l=r.x,s=r.y,h,d,p;return typeof n=="string"?n=i[n]:n-=.5,typeof a=="string"?a=i[a]:a-=.5,h=a-n,typeof o=="string"?o=c[o]:o-=.5,typeof u=="string"?u=c[u]:u-=.5,d=u-o,(h||d)&&(p=this._getTransformedDimensions(),l=r.x+h*p.x,s=r.y+d*p.y),new t.Point(l,s)},translateToCenterPoint:function(r,n,o){var a=this.translateToGivenOrigin(r,n,o,"center","center");return this.angle?t.util.rotatePoint(a,r,f(this.angle)):a},translateToOriginPoint:function(r,n,o){var a=this.translateToGivenOrigin(r,"center","center",n,o);return this.angle?t.util.rotatePoint(a,r,f(this.angle)):a},getCenterPoint:function(){var r=new t.Point(this.left,this.top);return this.translateToCenterPoint(r,this.originX,this.originY)},getPointByOrigin:function(r,n){var o=this.getCenterPoint();return this.translateToOriginPoint(o,r,n)},toLocalPoint:function(r,n,o){var a=this.getCenterPoint(),u,l;return typeof n!="undefined"&&typeof o!="undefined"?u=this.translateToGivenOrigin(a,"center","center",n,o):u=new t.Point(this.left,this.top),l=new t.Point(r.x,r.y),this.angle&&(l=t.util.rotatePoint(l,a,-f(this.angle))),l.subtractEquals(u)},setPositionByOrigin:function(r,n,o){var a=this.translateToCenterPoint(r,n,o),u=this.translateToOriginPoint(a,this.originX,this.originY);this.set("left",u.x),this.set("top",u.y)},adjustPosition:function(r){var n=f(this.angle),o=this.getScaledWidth(),a=t.util.cos(n)*o,u=t.util.sin(n)*o,l,s;typeof this.originX=="string"?l=i[this.originX]:l=this.originX-.5,typeof r=="string"?s=i[r]:s=r-.5,this.left+=a*(s-l),this.top+=u*(s-l),this.setCoords(),this.originX=r},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var r=this.getCenterPoint();this.originX="center",this.originY="center",this.left=r.x,this.top=r.y},_resetOrigin:function(){var r=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=r.x,this.top=r.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function f(n){return[new t.Point(n.tl.x,n.tl.y),new t.Point(n.tr.x,n.tr.y),new t.Point(n.br.x,n.br.y),new t.Point(n.bl.x,n.bl.y)]}var i=t.util.degreesToRadians,c=t.util.multiplyTransformMatrices,r=t.util.transformPoint;t.util.object.extend(t.Object.prototype,{oCoords:null,aCoords:null,ownMatrixCache:null,matrixCache:null,getCoords:function(n,o){this.oCoords||this.setCoords();var a=n?this.aCoords:this.oCoords;return f(o?this.calcCoords(n):a)},intersectsWithRect:function(n,o,a,u){var l=this.getCoords(a,u),s=t.Intersection.intersectPolygonRectangle(l,n,o);return s.status==="Intersection"},intersectsWithObject:function(n,o,a){var u=t.Intersection.intersectPolygonPolygon(this.getCoords(o,a),n.getCoords(o,a));return u.status==="Intersection"||n.isContainedWithinObject(this,o,a)||this.isContainedWithinObject(n,o,a)},isContainedWithinObject:function(n,o,a){for(var u=this.getCoords(o,a),l=0,s=n._getImageLines(a?n.calcCoords(o):o?n.aCoords:n.oCoords);l<4;l++)if(!n.containsPoint(u[l],s))return!1;return!0},isContainedWithinRect:function(n,o,a,u){var l=this.getBoundingRect(a,u);return l.left>=n.x&&l.left+l.width<=o.x&&l.top>=n.y&&l.top+l.height<=o.y},containsPoint:function(n,l,a,u){var l=l||this._getImageLines(u?this.calcCoords(a):a?this.aCoords:this.oCoords),s=this._findCrossPoints(n,l);return s!==0&&s%2===1},isOnScreen:function(n){if(!this.canvas)return!1;for(var o=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br,u=this.getCoords(!0,n),l,s=0;s<4;s++)if(l=u[s],l.x<=a.x&&l.x>=o.x&&l.y<=a.y&&l.y>=o.y)return!0;return this.intersectsWithRect(o,a,!0,n)?!0:this._containsCenterOfCanvas(o,a,n)},_containsCenterOfCanvas:function(n,o,a){var u={x:(n.x+o.x)/2,y:(n.y+o.y)/2};return!!this.containsPoint(u,null,!0,a)},isPartiallyOnScreen:function(n){if(!this.canvas)return!1;var o=this.canvas.vptCoords.tl,a=this.canvas.vptCoords.br;return this.intersectsWithRect(o,a,!0,n)?!0:this._containsCenterOfCanvas(o,a,n)},_getImageLines:function(n){return{topline:{o:n.tl,d:n.tr},rightline:{o:n.tr,d:n.br},bottomline:{o:n.br,d:n.bl},leftline:{o:n.bl,d:n.tl}}},_findCrossPoints:function(n,o){var a,u,l,s,h,d=0,p;for(var v in o)if(p=o[v],!(p.o.y<n.y&&p.d.y<n.y)&&!(p.o.y>=n.y&&p.d.y>=n.y)&&(p.o.x===p.d.x&&p.o.x>=n.x?h=p.o.x:(a=0,u=(p.d.y-p.o.y)/(p.d.x-p.o.x),l=n.y-a*n.x,s=p.o.y-u*p.o.x,h=-(l-s)/(a-u)),h>=n.x&&(d+=1),d===2))break;return d},getBoundingRect:function(n,o){var a=this.getCoords(n,o);return t.util.makeBoundingBoxFromPoints(a)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(n){return Math.abs(n)<this.minScaleLimit?n<0?-this.minScaleLimit:this.minScaleLimit:n===0?1e-4:n},scale:function(n){return this._set("scaleX",n),this._set("scaleY",n),this.setCoords()},scaleToWidth:function(n,o){var a=this.getBoundingRect(o).width/this.getScaledWidth();return this.scale(n/this.width/a)},scaleToHeight:function(n,o){var a=this.getBoundingRect(o).height/this.getScaledHeight();return this.scale(n/this.height/a)},calcCoords:function(n){var o=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),u=c(a,o),l=this.getViewportTransform(),s=n?u:c(l,u),h=this._getTransformedDimensions(),d=h.x/2,p=h.y/2,v=r({x:-d,y:-p},s),b=r({x:d,y:-p},s),C=r({x:-d,y:p},s),w=r({x:d,y:p},s);if(!n){var S=this.padding,T=i(this.angle),A=t.util.cos(T),M=t.util.sin(T),E=A*S,D=M*S,N=E+D,K=E-D;S&&(v.x-=K,v.y-=N,b.x+=N,b.y-=K,C.x-=N,C.y+=K,w.x+=K,w.y+=N);var U=new t.Point((v.x+C.x)/2,(v.y+C.y)/2),Q=new t.Point((b.x+v.x)/2,(b.y+v.y)/2),re=new t.Point((w.x+b.x)/2,(w.y+b.y)/2),k=new t.Point((w.x+C.x)/2,(w.y+C.y)/2),z=new t.Point(Q.x+M*this.rotatingPointOffset,Q.y-A*this.rotatingPointOffset)}var W={tl:v,tr:b,br:w,bl:C};return n||(W.ml=U,W.mt=Q,W.mr=re,W.mb=k,W.mtr=z),W},setCoords:function(n,o){return this.oCoords=this.calcCoords(n),o||(this.aCoords=this.calcCoords(!0)),n||this._setCornerCoords&&this._setCornerCoords(),this},_calcRotateMatrix:function(){return t.util.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var n=this.getCenterPoint();return[1,0,0,1,n.x,n.y]},transformMatrixKey:function(n){var o="_",a="";return!n&&this.group&&(a=this.group.transformMatrixKey(n)+o),a+this.top+o+this.left+o+this.scaleX+o+this.scaleY+o+this.skewX+o+this.skewY+o+this.angle+o+this.originX+o+this.originY+o+this.width+o+this.height+o+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(n){if(n)return this.calcOwnMatrix();var o=this.transformMatrixKey(),a=this.matrixCache||(this.matrixCache={});if(a.key===o)return a.value;var u=this.calcOwnMatrix();return this.group&&(u=c(this.group.calcTransformMatrix(),u)),a.key=o,a.value=u,u},calcOwnMatrix:function(){var n=this.transformMatrixKey(!0),o=this.ownMatrixCache||(this.ownMatrixCache={});if(o.key===n)return o.value;var a=this._calcTranslateMatrix();return this.translateX=a[4],this.translateY=a[5],o.key=n,o.value=t.util.composeMatrix(this),o.value},_calcDimensionsTransformMatrix:function(n,o,a){return t.util.calcDimensionsMatrix({skewX:n,skewY:o,scaleX:this.scaleX*(a&&this.flipX?-1:1),scaleY:this.scaleY*(a&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var n=this.strokeWidth,o=this.width+n,a=this.height+n;return{x:o,y:a}},_getTransformedDimensions:function(n,o){typeof n=="undefined"&&(n=this.skewX),typeof o=="undefined"&&(o=this.skewY);var a=this._getNonTransformedDimensions(),u,l,s=n===0&&o===0;if(this.strokeUniform?(u=this.width,l=this.height):(u=a.x,l=a.y),s)return this._finalizeDimensions(u*this.scaleX,l*this.scaleY);u/=2,l/=2;var h=[{x:-u,y:-l},{x:u,y:-l},{x:-u,y:l},{x:u,y:l}],d=t.util.calcDimensionsMatrix({scaleX:this.scaleX,scaleY:this.scaleY,skewX:n,skewY:o}),p=t.util.makeBoundingBoxFromPoints(h,d);return this._finalizeDimensions(p.width,p.height)},_finalizeDimensions:function(n,o){return this.strokeUniform?{x:n+this.strokeWidth,y:o+this.strokeWidth}:{x:n,y:o}},_calculateCurrentDimensions:function(){var n=this.getViewportTransform(),o=this._getTransformedDimensions(),a=t.util.transformPoint(o,n,!0);return a.scalarAdd(2*this.padding)}})}(),t.util.object.extend(t.Object.prototype,{sendToBack:function(){return this.group?t.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?t.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(f){return this.group?t.StaticCanvas.prototype.sendBackwards.call(this.group,this,f):this.canvas&&this.canvas.sendBackwards(this,f),this},bringForward:function(f){return this.group?t.StaticCanvas.prototype.bringForward.call(this.group,this,f):this.canvas&&this.canvas.bringForward(this,f),this},moveTo:function(f){return this.group&&this.group.type!=="activeSelection"?t.StaticCanvas.prototype.moveTo.call(this.group,this,f):this.canvas&&this.canvas.moveTo(this,f),this}}),function(){function f(c,r){if(r){if(r.toLive)return c+": url(#SVGID_"+r.id+"); ";var n=new t.Color(r),o=c+": "+n.toRgb()+"; ",a=n.getAlpha();return a!==1&&(o+=c+"-opacity: "+a.toString()+"; "),o}else return c+": none; "}var i=t.util.toFixed;t.util.object.extend(t.Object.prototype,{getSvgStyles:function(c){var r=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",o=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",u=this.strokeLineCap?this.strokeLineCap:"butt",l=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",h=typeof this.opacity!="undefined"?this.opacity:"1",d=this.visible?"":" visibility: hidden;",p=c?"":this.getSvgFilter(),v=f("fill",this.fill),b=f("stroke",this.stroke);return[b,"stroke-width: ",n,"; ","stroke-dasharray: ",o,"; ","stroke-linecap: ",u,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",l,"; ","stroke-miterlimit: ",s,"; ",v,"fill-rule: ",r,"; ","opacity: ",h,";",p,d].join("")},getSvgSpanStyles:function(c,r){var n="; ",a=c.fontFamily?"font-family: "+(c.fontFamily.indexOf("'")===-1&&c.fontFamily.indexOf('"')===-1?"'"+c.fontFamily+"'":c.fontFamily)+n:"",o=c.strokeWidth?"stroke-width: "+c.strokeWidth+n:"",a=a,u=c.fontSize?"font-size: "+c.fontSize+"px"+n:"",l=c.fontStyle?"font-style: "+c.fontStyle+n:"",s=c.fontWeight?"font-weight: "+c.fontWeight+n:"",h=c.fill?f("fill",c.fill):"",d=c.stroke?f("stroke",c.stroke):"",p=this.getSvgTextDecoration(c),v=c.deltaY?"baseline-shift: "+-c.deltaY+"; ":"";return p&&(p="text-decoration: "+p+n),[d,o,a,u,l,s,p,h,v,r?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(c){return["overline","underline","line-through"].filter(function(r){return c[r.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(c,r){var n=c?this.calcTransformMatrix():this.calcOwnMatrix(),o='transform="'+t.util.matrixToSVG(n);return o+(r||"")+this.getSvgTransformMatrix()+'" '},getSvgTransformMatrix:function(){return this.transformMatrix?" "+t.util.matrixToSVG(this.transformMatrix):""},_setSVGBg:function(c){if(this.backgroundColor){var r=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',i(-this.width/2,r),'" y="',i(-this.height/2,r),'" width="',i(this.width,r),'" height="',i(this.height,r),`"></rect>
`)}},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(c),{reviver:c})},toClipPathSVG:function(c){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(c),{reviver:c})},_createBaseClipPathSVGMarkup:function(c,r){r=r||{};var n=r.reviver,o=r.additionalTransform||"",a=[this.getSvgTransform(!0,o),this.getSvgCommons()].join(""),u=c.indexOf("COMMON_PARTS");return c[u]=a,n?n(c.join("")):c.join("")},_createBaseSVGMarkup:function(c,r){r=r||{};var n=r.noStyle,o=r.reviver,a=n?"":'style="'+this.getSvgStyles()+'" ',u=r.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,s=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,d=this.stroke,p=this.fill,v=this.shadow,b,C=[],w,S=c.indexOf("COMMON_PARTS"),T=r.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+t.Object.__uid++,w='<clipPath id="'+l.clipPathId+`" >
`+l.toClipPathSVG(o)+`</clipPath>
`),h&&C.push("<g ",u,this.getSvgCommons(),` >
`),C.push("<g ",this.getSvgTransform(!1),h?"":u+this.getSvgCommons(),` >
`),b=[a,s,n?"":this.addPaintOrder()," ",T?'transform="'+T+'" ':""].join(""),c[S]=b,p&&p.toLive&&C.push(p.toSVG(this)),d&&d.toLive&&C.push(d.toSVG(this)),v&&C.push(v.toSVG(this)),l&&C.push(w),C.push(c.join("")),C.push(`</g>
`),h&&C.push(`</g>
`),o?o(C.join("")):C.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var f=t.util.object.extend,i="stateProperties";function c(n,o,a){var u={},l=!0;a.forEach(function(s){u[s]=n[s]}),f(n[o],u,l)}function r(n,o,a){if(n===o)return!0;if(Array.isArray(n)){if(!Array.isArray(o)||n.length!==o.length)return!1;for(var u=0,l=n.length;u<l;u++)if(!r(n[u],o[u]))return!1;return!0}else if(n&&typeof n=="object"){var s=Object.keys(n),h;if(!o||typeof o!="object"||!a&&s.length!==Object.keys(o).length)return!1;for(var u=0,l=s.length;u<l;u++)if(h=s[u],h!=="canvas"&&!r(n[h],o[h]))return!1;return!0}}t.util.object.extend(t.Object.prototype,{hasStateChanged:function(n){n=n||i;var o="_"+n;return Object.keys(this[o]).length<this[n].length?!0:!r(this[o],this,!0)},saveState:function(n){var o=n&&n.propertySet||i,a="_"+o;return this[a]?(c(this,a,this[o]),n&&n.stateProperties&&c(this,a,n.stateProperties),this):this.setupState(n)},setupState:function(n){n=n||{};var o=n.propertySet||i;return n.propertySet=o,this["_"+o]={},this.saveState(n),this}})}(),function(){var f=t.util.degreesToRadians;t.util.object.extend(t.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(i){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var c=i.x,r=i.y,n,o;this.__corner=0;for(var a in this.oCoords)if(!!this.isControlVisible(a)&&!(a==="mtr"&&!this.hasRotatingPoint)&&!(this.get("lockUniScaling")&&(a==="mt"||a==="mr"||a==="mb"||a==="ml"))&&(o=this._getImageLines(this.oCoords[a].corner),n=this._findCrossPoints({x:c,y:r},o),n!==0&&n%2===1))return this.__corner=a,a;return!1},_setCornerCoords:function(){var i=this.oCoords,c=f(45-this.angle),r=this.cornerSize*.707106,n=r*t.util.cos(c),o=r*t.util.sin(c),a,u;for(var l in i)a=i[l].x,u=i[l].y,i[l].corner={tl:{x:a-o,y:u-n},tr:{x:a+n,y:u-o},bl:{x:a-n,y:u+o},br:{x:a+o,y:u+n}}},drawSelectionBackground:function(i){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;i.save();var c=this.getCenterPoint(),r=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return i.translate(c.x,c.y),i.scale(1/n[0],1/n[3]),i.rotate(f(this.angle)),i.fillStyle=this.selectionBackgroundColor,i.fillRect(-r.x/2,-r.y/2,r.x,r.y),i.restore(),this},drawBorders:function(i,c){c=c||{};var r=this._calculateCurrentDimensions(),n=this.borderScaleFactor,o=r.x+n,a=r.y+n,u=typeof c.hasRotatingPoint!="undefined"?c.hasRotatingPoint:this.hasRotatingPoint,l=typeof c.hasControls!="undefined"?c.hasControls:this.hasControls,s=typeof c.rotatingPointOffset!="undefined"?c.rotatingPointOffset:this.rotatingPointOffset;if(i.save(),i.strokeStyle=c.borderColor||this.borderColor,this._setLineDash(i,c.borderDashArray||this.borderDashArray,null),i.strokeRect(-o/2,-a/2,o,a),u&&this.isControlVisible("mtr")&&l){var h=-a/2;i.beginPath(),i.moveTo(0,h),i.lineTo(0,h-s),i.stroke()}return i.restore(),this},drawBordersInGroup:function(i,c,r){r=r||{};var n={x:this.width,y:this.height},o=t.util.composeMatrix({scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX}),a=t.util.transformPoint(n,o),u=this.strokeWidth,l=this.borderScaleFactor,s=a.x+u*(this.strokeUniform?this.canvas.getZoom():c.scaleX)+l,h=a.y+u*(this.strokeUniform?this.canvas.getZoom():c.scaleY)+l;return i.save(),this._setLineDash(i,r.borderDashArray||this.borderDashArray,null),i.strokeStyle=r.borderColor||this.borderColor,i.strokeRect(-s/2,-h/2,s,h),i.restore(),this},drawControls:function(i,c){c=c||{};var r=this._calculateCurrentDimensions(),n=r.x,o=r.y,a=c.cornerSize||this.cornerSize,u=-(n+a)/2,l=-(o+a)/2,s=typeof c.transparentCorners!="undefined"?c.transparentCorners:this.transparentCorners,h=typeof c.hasRotatingPoint!="undefined"?c.hasRotatingPoint:this.hasRotatingPoint,d=s?"stroke":"fill";return i.save(),i.strokeStyle=i.fillStyle=c.cornerColor||this.cornerColor,this.transparentCorners||(i.strokeStyle=c.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(i,c.cornerDashArray||this.cornerDashArray,null),this._drawControl("tl",i,d,u,l,c),this._drawControl("tr",i,d,u+n,l,c),this._drawControl("bl",i,d,u,l+o,c),this._drawControl("br",i,d,u+n,l+o,c),this.get("lockUniScaling")||(this._drawControl("mt",i,d,u+n/2,l,c),this._drawControl("mb",i,d,u+n/2,l+o,c),this._drawControl("mr",i,d,u+n,l+o/2,c),this._drawControl("ml",i,d,u,l+o/2,c)),h&&this._drawControl("mtr",i,d,u+n/2,l-this.rotatingPointOffset,c),i.restore(),this},_drawControl:function(i,c,r,n,o,a){if(a=a||{},!!this.isControlVisible(i)){var u=this.cornerSize,l=!this.transparentCorners&&this.cornerStrokeColor;switch(a.cornerStyle||this.cornerStyle){case"circle":c.beginPath(),c.arc(n+u/2,o+u/2,u/2,0,2*Math.PI,!1),c[r](),l&&c.stroke();break;default:this.transparentCorners||c.clearRect(n,o,u,u),c[r+"Rect"](n,o,u,u),l&&c.strokeRect(n,o,u,u)}}},isControlVisible:function(i){return this._getControlsVisibility()[i]},setControlVisible:function(i,c){return this._getControlsVisibility()[i]=c,this},setControlsVisibility:function(i){i||(i={});for(var c in i)this.setControlVisible(c,i[c]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility},onDeselect:function(){},onSelect:function(){}})}(),t.util.object.extend(t.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(f,i){i=i||{};var c=function(){},r=i.onComplete||c,n=i.onChange||c,o=this;return t.util.animate({startValue:f.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(a){f.set("left",a),o.requestRenderAll(),n()},onComplete:function(){f.setCoords(),r()}}),this},fxCenterObjectV:function(f,i){i=i||{};var c=function(){},r=i.onComplete||c,n=i.onChange||c,o=this;return t.util.animate({startValue:f.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(a){f.set("top",a),o.requestRenderAll(),n()},onComplete:function(){f.setCoords(),r()}}),this},fxRemove:function(f,i){i=i||{};var c=function(){},r=i.onComplete||c,n=i.onChange||c,o=this;return t.util.animate({startValue:f.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(a){f.set("opacity",a),o.requestRenderAll(),n()},onComplete:function(){o.remove(f),r()}}),this}}),t.util.object.extend(t.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var f=[],i,c;for(i in arguments[0])f.push(i);for(var r=0,n=f.length;r<n;r++)i=f[r],c=r!==n-1,this._animate(i,arguments[0][i],arguments[1],c)}else this._animate.apply(this,arguments);return this},_animate:function(f,i,c,r){var n=this,o;i=i.toString(),c?c=t.util.object.clone(c):c={},~f.indexOf(".")&&(o=f.split("."));var a=o?this.get(o[0])[o[1]]:this.get(f);"from"in c||(c.from=a),~i.indexOf("=")?i=a+parseFloat(i.replace("=","")):i=parseFloat(i),t.util.animate({startValue:c.from,endValue:i,byValue:c.by,easing:c.easing,duration:c.duration,abort:c.abort&&function(){return c.abort.call(n)},onChange:function(u,l,s){o?n[o[0]][o[1]]=u:n.set(f,u),!r&&c.onChange&&c.onChange(u,l,s)},onComplete:function(u,l,s){r||(n.setCoords(),c.onComplete&&c.onComplete(u,l,s))}})}}),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.object.clone,n={x1:1,x2:1,y1:1,y2:1},o=i.StaticCanvas.supports("setLineDash");if(i.Line){i.warn("fabric.Line is already defined");return}i.Line=i.util.createClass(i.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:i.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(u,l){u||(u=[0,0,0,0]),this.callSuper("initialize",l),this.set("x1",u[0]),this.set("y1",u[1]),this.set("x2",u[2]),this.set("y2",u[3]),this._setWidthHeight(l)},_setWidthHeight:function(u){u||(u={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in u?u.left:this._getLeftToOriginX(),this.top="top"in u?u.top:this._getTopToOriginY()},_set:function(u,l){return this.callSuper("_set",u,l),typeof n[u]!="undefined"&&this._setWidthHeight(),this},_getLeftToOriginX:a({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:a({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(u){if(u.beginPath(),!this.strokeDashArray||this.strokeDashArray&&o){var l=this.calcLinePoints();u.moveTo(l.x1,l.y1),u.lineTo(l.x2,l.y2)}u.lineWidth=this.strokeWidth;var s=u.strokeStyle;u.strokeStyle=this.stroke||u.fillStyle,this.stroke&&this._renderStroke(u),u.strokeStyle=s},_renderDashedStroke:function(u){var l=this.calcLinePoints();u.beginPath(),i.util.drawDashedLine(u,l.x1,l.y1,l.x2,l.y2,this.strokeDashArray),u.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(u){return c(this.callSuper("toObject",u),this.calcLinePoints())},_getNonTransformedDimensions:function(){var u=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(u.y-=this.strokeWidth),this.height===0&&(u.x-=this.strokeWidth)),u},calcLinePoints:function(){var u=this.x1<=this.x2?-1:1,l=this.y1<=this.y2?-1:1,s=u*this.width*.5,h=l*this.height*.5,d=u*this.width*-.5,p=l*this.height*-.5;return{x1:s,x2:d,y1:h,y2:p}},_toSVG:function(){var u=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',u.x1,'" y1="',u.y1,'" x2="',u.x2,'" y2="',u.y2,`" />
`]}}),i.Line.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),i.Line.fromElement=function(u,l,s){s=s||{};var h=i.parseAttributes(u,i.Line.ATTRIBUTE_NAMES),d=[h.x1||0,h.y1||0,h.x2||0,h.y2||0];l(new i.Line(d,c(h,s)))},i.Line.fromObject=function(u,l){function s(d){delete d.points,l&&l(d)}var h=r(u,!0);h.points=[u.x1,u.y1,u.x2,u.y2],i.Object._fromObject("Line",h,s,"points")};function a(u,l){var s=u.origin,h=u.axis1,d=u.axis2,p=u.dimension,v=l.nearest,b=l.center,C=l.farthest;return function(){switch(this.get(s)){case v:return Math.min(this.get(h),this.get(d));case b:return Math.min(this.get(h),this.get(d))+.5*this.get(p);case C:return Math.max(this.get(h),this.get(d))}}}}(e),function(f){var i=f.fabric||(f.fabric={}),c=Math.PI;if(i.Circle){i.warn("fabric.Circle is already defined.");return}i.Circle=i.util.createClass(i.Object,{type:"circle",radius:0,startAngle:0,endAngle:c*2,cacheProperties:i.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(n,o){return this.callSuper("_set",n,o),n==="radius"&&this.setRadius(o),this},toObject:function(n){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(n))},_toSVG:function(){var n,o=0,a=0,u=(this.endAngle-this.startAngle)%(2*c);if(u===0)n=["<circle ","COMMON_PARTS",'cx="'+o+'" cy="'+a+'" ','r="',this.radius,`" />
`];else{var l=i.util.cos(this.startAngle)*this.radius,s=i.util.sin(this.startAngle)*this.radius,h=i.util.cos(this.endAngle)*this.radius,d=i.util.sin(this.endAngle)*this.radius,p=u>c?"1":"0";n=['<path d="M '+l+" "+s," A "+this.radius+" "+this.radius," 0 ",+p+" 1"," "+h+" "+d,'" ',"COMMON_PARTS",` />
`]}return n},_render:function(n){n.beginPath(),n.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(n)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(n){return this.radius=n,this.set("width",n*2).set("height",n*2)}}),i.Circle.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),i.Circle.fromElement=function(n,o){var a=i.parseAttributes(n,i.Circle.ATTRIBUTE_NAMES);if(!r(a))throw new Error("value of `r` attribute is required and can not be negative");a.left=(a.left||0)-a.radius,a.top=(a.top||0)-a.radius,o(new i.Circle(a))};function r(n){return"radius"in n&&n.radius>=0}i.Circle.fromObject=function(n,o){return i.Object._fromObject("Circle",n,o)}}(e),function(f){var i=f.fabric||(f.fabric={});if(i.Triangle){i.warn("fabric.Triangle is already defined");return}i.Triangle=i.util.createClass(i.Object,{type:"triangle",width:100,height:100,_render:function(c){var r=this.width/2,n=this.height/2;c.beginPath(),c.moveTo(-r,n),c.lineTo(0,-n),c.lineTo(r,n),c.closePath(),this._renderPaintInOrder(c)},_renderDashedStroke:function(c){var r=this.width/2,n=this.height/2;c.beginPath(),i.util.drawDashedLine(c,-r,n,0,-n,this.strokeDashArray),i.util.drawDashedLine(c,0,-n,r,n,this.strokeDashArray),i.util.drawDashedLine(c,r,n,-r,n,this.strokeDashArray),c.closePath()},_toSVG:function(){var c=this.width/2,r=this.height/2,n=[-c+" "+r,"0 "+-r,c+" "+r].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),i.Triangle.fromObject=function(c,r){return i.Object._fromObject("Triangle",c,r)}}(e),function(f){var i=f.fabric||(f.fabric={}),c=Math.PI*2;if(i.Ellipse){i.warn("fabric.Ellipse is already defined.");return}i.Ellipse=i.util.createClass(i.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(r){this.callSuper("initialize",r),this.set("rx",r&&r.rx||0),this.set("ry",r&&r.ry||0)},_set:function(r,n){switch(this.callSuper("_set",r,n),r){case"rx":this.rx=n,this.set("width",n*2);break;case"ry":this.ry=n,this.set("height",n*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(r){return this.callSuper("toObject",["rx","ry"].concat(r))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(r){r.beginPath(),r.save(),r.transform(1,0,0,this.ry/this.rx,0,0),r.arc(0,0,this.rx,0,c,!1),r.restore(),this._renderPaintInOrder(r)}}),i.Ellipse.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),i.Ellipse.fromElement=function(r,n){var o=i.parseAttributes(r,i.Ellipse.ATTRIBUTE_NAMES);o.left=(o.left||0)-o.rx,o.top=(o.top||0)-o.ry,n(new i.Ellipse(o))},i.Ellipse.fromObject=function(r,n){return i.Object._fromObject("Ellipse",r,n)}}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend;if(i.Rect){i.warn("fabric.Rect is already defined");return}i.Rect=i.util.createClass(i.Object,{stateProperties:i.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:i.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(r){this.callSuper("initialize",r),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(r){var n=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,u=this.height,l=-this.width/2,s=-this.height/2,h=n!==0||o!==0,d=1-.5522847498;r.beginPath(),r.moveTo(l+n,s),r.lineTo(l+a-n,s),h&&r.bezierCurveTo(l+a-d*n,s,l+a,s+d*o,l+a,s+o),r.lineTo(l+a,s+u-o),h&&r.bezierCurveTo(l+a,s+u-d*o,l+a-d*n,s+u,l+a-n,s+u),r.lineTo(l+n,s+u),h&&r.bezierCurveTo(l+d*n,s+u,l,s+u-d*o,l,s+u-o),r.lineTo(l,s+o),h&&r.bezierCurveTo(l,s+d*o,l+d*n,s,l+n,s),r.closePath(),this._renderPaintInOrder(r)},_renderDashedStroke:function(r){var n=-this.width/2,o=-this.height/2,a=this.width,u=this.height;r.beginPath(),i.util.drawDashedLine(r,n,o,n+a,o,this.strokeDashArray),i.util.drawDashedLine(r,n+a,o,n+a,o+u,this.strokeDashArray),i.util.drawDashedLine(r,n+a,o+u,n,o+u,this.strokeDashArray),i.util.drawDashedLine(r,n,o+u,n,o,this.strokeDashArray),r.closePath()},toObject:function(r){return this.callSuper("toObject",["rx","ry"].concat(r))},_toSVG:function(){var r=-this.width/2,n=-this.height/2;return["<rect ","COMMON_PARTS",'x="',r,'" y="',n,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),i.Rect.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),i.Rect.fromElement=function(r,n,o){if(!r)return n(null);o=o||{};var a=i.parseAttributes(r,i.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var u=new i.Rect(c(o?i.util.object.clone(o):{},a));u.visible=u.visible&&u.width>0&&u.height>0,n(u)},i.Rect.fromObject=function(r,n){return i.Object._fromObject("Rect",r,n)}}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.util.array.min,n=i.util.array.max,o=i.util.toFixed;if(i.Polyline){i.warn("fabric.Polyline is already defined");return}i.Polyline=i.util.createClass(i.Object,{type:"polyline",points:null,cacheProperties:i.Object.prototype.cacheProperties.concat("points"),initialize:function(a,u){u=u||{},this.points=a||[],this.callSuper("initialize",u),this._setPositionDimensions(u)},_setPositionDimensions:function(a){var u=this._calcDimensions(a),l;this.width=u.width,this.height=u.height,a.fromSVG||(l=this.translateToGivenOrigin({x:u.left-this.strokeWidth/2,y:u.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),typeof a.left=="undefined"&&(this.left=a.fromSVG?u.left:l.x),typeof a.top=="undefined"&&(this.top=a.fromSVG?u.top:l.y),this.pathOffset={x:u.left+this.width/2,y:u.top+this.height/2}},_calcDimensions:function(){var a=this.points,u=r(a,"x")||0,l=r(a,"y")||0,s=n(a,"x")||0,h=n(a,"y")||0,d=s-u,p=h-l;return{left:u,top:l,width:d,height:p}},toObject:function(a){return c(this.callSuper("toObject",a),{points:this.points.concat()})},_toSVG:function(){for(var a=[],u=this.pathOffset.x,l=this.pathOffset.y,s=i.Object.NUM_FRACTION_DIGITS,h=0,d=this.points.length;h<d;h++)a.push(o(this.points[h].x-u,s),",",o(this.points[h].y-l,s)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',a.join(""),`" />
`]},commonRender:function(a){var u,l=this.points.length,s=this.pathOffset.x,h=this.pathOffset.y;if(!l||isNaN(this.points[l-1].y))return!1;a.beginPath(),a.moveTo(this.points[0].x-s,this.points[0].y-h);for(var d=0;d<l;d++)u=this.points[d],a.lineTo(u.x-s,u.y-h);return!0},_render:function(a){!this.commonRender(a)||this._renderPaintInOrder(a)},_renderDashedStroke:function(a){var u,l;a.beginPath();for(var s=0,h=this.points.length;s<h;s++)u=this.points[s],l=this.points[s+1]||u,i.util.drawDashedLine(a,u.x,u.y,l.x,l.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),i.Polyline.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polyline.fromElementGenerator=function(a){return function(u,l,s){if(!u)return l(null);s||(s={});var h=i.parsePointsAttribute(u.getAttribute("points")),d=i.parseAttributes(u,i[a].ATTRIBUTE_NAMES);d.fromSVG=!0,l(new i[a](h,c(d,s)))}},i.Polyline.fromElement=i.Polyline.fromElementGenerator("Polyline"),i.Polyline.fromObject=function(a,u){return i.Object._fromObject("Polyline",a,u,"points")}}(e),function(f){var i=f.fabric||(f.fabric={});if(i.Polygon){i.warn("fabric.Polygon is already defined");return}i.Polygon=i.util.createClass(i.Polyline,{type:"polygon",_render:function(c){!this.commonRender(c)||(c.closePath(),this._renderPaintInOrder(c))},_renderDashedStroke:function(c){this.callSuper("_renderDashedStroke",c),c.closePath()}}),i.Polygon.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(),i.Polygon.fromElement=i.Polyline.fromElementGenerator("Polygon"),i.Polygon.fromObject=function(c,r){return i.Object._fromObject("Polygon",c,r,"points")}}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.array.min,r=i.util.array.max,n=i.util.object.extend,o=Object.prototype.toString,a=i.util.drawArc,u=i.util.toFixed,l={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},s={m:"l",M:"L"};if(i.Path){i.warn("fabric.Path is already defined");return}i.Path=i.util.createClass(i.Object,{type:"path",path:null,cacheProperties:i.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:i.Object.prototype.stateProperties.concat("path"),initialize:function(h,d){d=d||{},this.callSuper("initialize",d),h||(h=[]);var p=o.call(h)==="[object Array]";this.path=p?h:h.match&&h.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(p||(this.path=this._parsePath()),i.Polyline.prototype._setPositionDimensions.call(this,d))},_renderPathCommands:function(h){var d,p=null,v=0,b=0,C=0,w=0,S=0,T=0,A,M,E=-this.pathOffset.x,D=-this.pathOffset.y;h.beginPath();for(var N=0,K=this.path.length;N<K;++N){switch(d=this.path[N],d[0]){case"l":C+=d[1],w+=d[2],h.lineTo(C+E,w+D);break;case"L":C=d[1],w=d[2],h.lineTo(C+E,w+D);break;case"h":C+=d[1],h.lineTo(C+E,w+D);break;case"H":C=d[1],h.lineTo(C+E,w+D);break;case"v":w+=d[1],h.lineTo(C+E,w+D);break;case"V":w=d[1],h.lineTo(C+E,w+D);break;case"m":C+=d[1],w+=d[2],v=C,b=w,h.moveTo(C+E,w+D);break;case"M":C=d[1],w=d[2],v=C,b=w,h.moveTo(C+E,w+D);break;case"c":A=C+d[5],M=w+d[6],S=C+d[3],T=w+d[4],h.bezierCurveTo(C+d[1]+E,w+d[2]+D,S+E,T+D,A+E,M+D),C=A,w=M;break;case"C":C=d[5],w=d[6],S=d[3],T=d[4],h.bezierCurveTo(d[1]+E,d[2]+D,S+E,T+D,C+E,w+D);break;case"s":A=C+d[3],M=w+d[4],p[0].match(/[CcSs]/)===null?(S=C,T=w):(S=2*C-S,T=2*w-T),h.bezierCurveTo(S+E,T+D,C+d[1]+E,w+d[2]+D,A+E,M+D),S=C+d[1],T=w+d[2],C=A,w=M;break;case"S":A=d[3],M=d[4],p[0].match(/[CcSs]/)===null?(S=C,T=w):(S=2*C-S,T=2*w-T),h.bezierCurveTo(S+E,T+D,d[1]+E,d[2]+D,A+E,M+D),C=A,w=M,S=d[1],T=d[2];break;case"q":A=C+d[3],M=w+d[4],S=C+d[1],T=w+d[2],h.quadraticCurveTo(S+E,T+D,A+E,M+D),C=A,w=M;break;case"Q":A=d[3],M=d[4],h.quadraticCurveTo(d[1]+E,d[2]+D,A+E,M+D),C=A,w=M,S=d[1],T=d[2];break;case"t":A=C+d[1],M=w+d[2],p[0].match(/[QqTt]/)===null?(S=C,T=w):(S=2*C-S,T=2*w-T),h.quadraticCurveTo(S+E,T+D,A+E,M+D),C=A,w=M;break;case"T":A=d[1],M=d[2],p[0].match(/[QqTt]/)===null?(S=C,T=w):(S=2*C-S,T=2*w-T),h.quadraticCurveTo(S+E,T+D,A+E,M+D),C=A,w=M;break;case"a":a(h,C+E,w+D,[d[1],d[2],d[3],d[4],d[5],d[6]+C+E,d[7]+w+D]),C+=d[6],w+=d[7];break;case"A":a(h,C+E,w+D,[d[1],d[2],d[3],d[4],d[5],d[6]+E,d[7]+D]),C=d[6],w=d[7];break;case"z":case"Z":C=v,w=b,h.closePath();break}p=d}},_render:function(h){this._renderPathCommands(h),this._renderPaintInOrder(h)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(h){return n(this.callSuper("toObject",h),{path:this.path.map(function(d){return d.slice()})})},toDatalessObject:function(h){var d=this.toObject(["sourcePath"].concat(h));return d.sourcePath&&delete d.path,d},_toSVG:function(){var h=this.path.map(function(d){return d.join(" ")}).join(" ");return["<path ","COMMON_PARTS",'d="',h,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var h=i.Object.NUM_FRACTION_DIGITS;return" translate("+u(-this.pathOffset.x,h)+", "+u(-this.pathOffset.y,h)+")"},toClipPathSVG:function(h){var d=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:d})},toSVG:function(h){var d=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,additionalTransform:d})},complexity:function(){return this.path.length},_parsePath:function(){for(var h=[],d=[],p,v,b=i.rePathCommand,C,w,S=0,T,A=this.path.length;S<A;S++){for(p=this.path[S],w=p.slice(1).trim(),d.length=0;C=b.exec(w);)d.push(C[0]);T=[p.charAt(0)];for(var M=0,E=d.length;M<E;M++)v=parseFloat(d[M]),isNaN(v)||T.push(v);var D=T[0],N=l[D.toLowerCase()],K=s[D]||D;if(T.length-1>N)for(var U=1,Q=T.length;U<Q;U+=N)h.push([D].concat(T.slice(U,U+N))),D=K;else h.push(T)}return h},_calcDimensions:function(){for(var h=[],d=[],p,v=null,b=0,C=0,w=0,S=0,T=0,A=0,M,E,D,N=0,K=this.path.length;N<K;++N){switch(p=this.path[N],p[0]){case"l":w+=p[1],S+=p[2],D=[];break;case"L":w=p[1],S=p[2],D=[];break;case"h":w+=p[1],D=[];break;case"H":w=p[1],D=[];break;case"v":S+=p[1],D=[];break;case"V":S=p[1],D=[];break;case"m":w+=p[1],S+=p[2],b=w,C=S,D=[];break;case"M":w=p[1],S=p[2],b=w,C=S,D=[];break;case"c":M=w+p[5],E=S+p[6],T=w+p[3],A=S+p[4],D=i.util.getBoundsOfCurve(w,S,w+p[1],S+p[2],T,A,M,E),w=M,S=E;break;case"C":T=p[3],A=p[4],D=i.util.getBoundsOfCurve(w,S,p[1],p[2],T,A,p[5],p[6]),w=p[5],S=p[6];break;case"s":M=w+p[3],E=S+p[4],v[0].match(/[CcSs]/)===null?(T=w,A=S):(T=2*w-T,A=2*S-A),D=i.util.getBoundsOfCurve(w,S,T,A,w+p[1],S+p[2],M,E),T=w+p[1],A=S+p[2],w=M,S=E;break;case"S":M=p[3],E=p[4],v[0].match(/[CcSs]/)===null?(T=w,A=S):(T=2*w-T,A=2*S-A),D=i.util.getBoundsOfCurve(w,S,T,A,p[1],p[2],M,E),w=M,S=E,T=p[1],A=p[2];break;case"q":M=w+p[3],E=S+p[4],T=w+p[1],A=S+p[2],D=i.util.getBoundsOfCurve(w,S,T,A,T,A,M,E),w=M,S=E;break;case"Q":T=p[1],A=p[2],D=i.util.getBoundsOfCurve(w,S,T,A,T,A,p[3],p[4]),w=p[3],S=p[4];break;case"t":M=w+p[1],E=S+p[2],v[0].match(/[QqTt]/)===null?(T=w,A=S):(T=2*w-T,A=2*S-A),D=i.util.getBoundsOfCurve(w,S,T,A,T,A,M,E),w=M,S=E;break;case"T":M=p[1],E=p[2],v[0].match(/[QqTt]/)===null?(T=w,A=S):(T=2*w-T,A=2*S-A),D=i.util.getBoundsOfCurve(w,S,T,A,T,A,M,E),w=M,S=E;break;case"a":D=i.util.getBoundsOfArc(w,S,p[1],p[2],p[3],p[4],p[5],p[6]+w,p[7]+S),w+=p[6],S+=p[7];break;case"A":D=i.util.getBoundsOfArc(w,S,p[1],p[2],p[3],p[4],p[5],p[6],p[7]),w=p[6],S=p[7];break;case"z":case"Z":w=b,S=C;break}v=p,D.forEach(function(G){h.push(G.x),d.push(G.y)}),h.push(w),d.push(S)}var U=c(h)||0,Q=c(d)||0,re=r(h)||0,k=r(d)||0,z=re-U,W=k-Q;return{left:U,top:Q,width:z,height:W}}}),i.Path.fromObject=function(h,d){if(typeof h.sourcePath=="string"){var p=h.sourcePath;i.loadSVGFromURL(p,function(v){var b=v[0];b.setOptions(h),d&&d(b)})}else i.Object._fromObject("Path",h,d,"path")},i.Path.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat(["d"]),i.Path.fromElement=function(h,d,p){var v=i.parseAttributes(h,i.Path.ATTRIBUTE_NAMES);v.fromSVG=!0,d(new i.Path(v.d,n(v,p)))}}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.array.min,r=i.util.array.max;i.Group||(i.Group=i.util.createClass(i.Object,i.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(n,o,a){o=o||{},this._objects=[],a&&this.callSuper("initialize",o),this._objects=n||[];for(var u=this._objects.length;u--;)this._objects[u].group=this;if(a)this._updateObjectsACoords();else{var l=o&&o.centerPoint;o.originX!==void 0&&(this.originX=o.originX),o.originY!==void 0&&(this.originY=o.originY),l||this._calcBounds(),this._updateObjectsCoords(l),delete o.centerPoint,this.callSuper("initialize",o)}this.setCoords()},_updateObjectsACoords:function(){for(var n=!0,o=!0,a=this._objects.length;a--;)this._objects[a].setCoords(n,o)},_updateObjectsCoords:function(o){for(var o=o||this.getCenterPoint(),a=this._objects.length;a--;)this._updateObjectCoords(this._objects[a],o)},_updateObjectCoords:function(n,o){var a=n.left,u=n.top,l=!0,s=!0;n.set({left:a-o.x,top:u-o.y}),n.group=this,n.setCoords(l,s)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(n){return this._restoreObjectsState(),i.util.resetObjectTransform(this),n&&(this._objects.push(n),n.group=this,n._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},removeWithUpdate:function(n){return this._restoreObjectsState(),i.util.resetObjectTransform(this),this.remove(n),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(n){this.dirty=!0,n.group=this,n._set("canvas",this.canvas)},_onObjectRemoved:function(n){this.dirty=!0,delete n.group},_set:function(n,o){var a=this._objects.length;if(this.useSetOnGroup)for(;a--;)this._objects[a].setOnGroup(n,o);if(n==="canvas")for(;a--;)this._objects[a]._set(n,o);i.Object.prototype._set.call(this,n,o)},toObject:function(n){var o=this.includeDefaultValues,a=this._objects.map(function(l){var s=l.includeDefaultValues;l.includeDefaultValues=o;var h=l.toObject(n);return l.includeDefaultValues=s,h}),u=i.Object.prototype.toObject.call(this,n);return u.objects=a,u},toDatalessObject:function(n){var o,a=this.sourcePath;if(a)o=a;else{var u=this.includeDefaultValues;o=this._objects.map(function(s){var h=s.includeDefaultValues;s.includeDefaultValues=u;var d=s.toDatalessObject(n);return s.includeDefaultValues=h,d})}var l=i.Object.prototype.toDatalessObject.call(this,n);return l.objects=o,l},render:function(n){this._transformDone=!0,this.callSuper("render",n),this._transformDone=!1},shouldCache:function(){var n=i.Object.prototype.shouldCache.call(this);if(n){for(var o=0,a=this._objects.length;o<a;o++)if(this._objects[o].willDrawShadow())return this.ownCaching=!1,!1}return n},willDrawShadow:function(){if(i.Object.prototype.willDrawShadow.call(this))return!0;for(var n=0,o=this._objects.length;n<o;n++)if(this._objects[n].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(n){for(var o=0,a=this._objects.length;o<a;o++)this._objects[o].render(n);this._drawClipPath(n)},isCacheDirty:function(n){if(this.callSuper("isCacheDirty",n))return!0;if(!this.statefullCache)return!1;for(var o=0,a=this._objects.length;o<a;o++)if(this._objects[o].isCacheDirty(!0)){if(this._cacheCanvas){var u=this.cacheWidth/this.zoomX,l=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-u/2,-l/2,u,l)}return!0}return!1},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(n){var o=n.calcTransformMatrix(),a=i.util.qrDecompose(o),u=new i.Point(a.translateX,a.translateY);return n.flipX=!1,n.flipY=!1,n.set("scaleX",a.scaleX),n.set("scaleY",a.scaleY),n.skewX=a.skewX,n.skewY=a.skewY,n.angle=a.angle,n.setPositionByOrigin(u,"center","center"),n},_restoreObjectState:function(n){return this.realizeTransform(n),n.setCoords(),delete n.group,this},destroy:function(){return this._objects.forEach(function(n){n.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(!!this.canvas){var n=this._objects,o=this.canvas;this._objects=[];var a=this.toObject();delete a.objects;var u=new i.ActiveSelection([]);return u.set(a),u.type="activeSelection",o.remove(this),n.forEach(function(l){l.group=u,l.dirty=!0,o.add(l)}),u.canvas=o,u._objects=n,o._activeObject=u,u.setCoords(),u}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var n=!0,o=!0;return this.forEachObject(function(a){a.setCoords(n,o)}),this},_calcBounds:function(n){for(var o=[],a=[],u,l,s=["tr","br","bl","tl"],h=0,d=this._objects.length,p,v=s.length,b=!0;h<d;++h)for(u=this._objects[h],u.setCoords(b),p=0;p<v;p++)l=s[p],o.push(u.oCoords[l].x),a.push(u.oCoords[l].y);this._getBounds(o,a,n)},_getBounds:function(n,o,a){var u=new i.Point(c(n),c(o)),l=new i.Point(r(n),r(o)),s=u.y||0,h=u.x||0,d=l.x-u.x||0,p=l.y-u.y||0;this.width=d,this.height=p,a||this.setPositionByOrigin({x:h,y:s},"left","top")},_toSVG:function(n){for(var o=["<g ","COMMON_PARTS",` >
`],a=0,u=this._objects.length;a<u;a++)o.push("		",this._objects[a].toSVG(n));return o.push(`</g>
`),o},getSvgStyles:function(){var n=typeof this.opacity!="undefined"&&this.opacity!==1?"opacity: "+this.opacity+";":"",o=this.visible?"":" visibility: hidden;";return[n,this.getSvgFilter(),o].join("")},toClipPathSVG:function(n){for(var o=[],a=0,u=this._objects.length;a<u;a++)o.push("	",this._objects[a].toClipPathSVG(n));return this._createBaseClipPathSVGMarkup(o,{reviver:n})}}),i.Group.fromObject=function(n,o){var a=n.objects,u=i.util.object.clone(n,!0);if(delete u.objects,typeof a=="string"){i.loadSVGFromURL(a,function(l){var s=i.util.groupSVGElements(l,n,a);s.set(u),o&&o(s)});return}i.util.enlivenObjects(a,function(l){i.util.enlivenObjects([n.clipPath],function(s){var h=i.util.object.clone(n,!0);h.clipPath=s[0],delete h.objects,o&&o(new i.Group(l,h,!0))})})})}(e),function(f){var i=f.fabric||(f.fabric={});i.ActiveSelection||(i.ActiveSelection=i.util.createClass(i.Group,{type:"activeSelection",initialize:function(c,r){r=r||{},this._objects=c||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;r.originX&&(this.originX=r.originX),r.originY&&(this.originY=r.originY),this._calcBounds(),this._updateObjectsCoords(),i.Object.prototype.initialize.call(this,r),this.setCoords()},toGroup:function(){var c=this._objects.concat();this._objects=[];var r=i.Object.prototype.toObject.call(this),n=new i.Group([]);if(delete r.type,n.set(r),c.forEach(function(a){a.canvas.remove(a),a.group=n}),n._objects=c,!this.canvas)return n;var o=this.canvas;return o.add(n),o._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(c,r,n){c.save(),c.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",c,r),n=n||{},typeof n.hasControls=="undefined"&&(n.hasControls=!1),typeof n.hasRotatingPoint=="undefined"&&(n.hasRotatingPoint=!1),n.forActiveSelection=!0;for(var o=0,a=this._objects.length;o<a;o++)this._objects[o]._renderControls(c,n);c.restore()}}),i.ActiveSelection.fromObject=function(c,r){i.util.enlivenObjects(c.objects,function(n){delete c.objects,r&&r(new i.ActiveSelection(n,c,!0))})})}(e),function(f){var i=t.util.object.extend;if(f.fabric||(f.fabric={}),f.fabric.Image){t.warn("fabric.Image is already defined.");return}t.Image=t.util.createClass(t.Object,{type:"image",crossOrigin:"",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:t.Object.prototype.stateProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,initialize:function(c,r){r||(r={}),this.filters=[],this.cacheKey="texture"+t.Object.__uid++,this.callSuper("initialize",r),this._initElement(c,r)},getElement:function(){return this._element||{}},setElement:function(c,r){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=c,this._originalElement=c,this._initConfig(r),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(c){var r=t.filterBackend;r&&r.evictCachesForKey&&r.evictCachesForKey(c)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(c){t.util.cleanUpJsdomNode(this[c]),this[c]=void 0}.bind(this))},setCrossOrigin:function(c){return this.crossOrigin=c,this._element.crossOrigin=c,this},getOriginalSize:function(){var c=this.getElement();return{width:c.naturalWidth||c.width,height:c.naturalHeight||c.height}},_stroke:function(c){if(!(!this.stroke||this.strokeWidth===0)){var r=this.width/2,n=this.height/2;c.beginPath(),c.moveTo(-r,-n),c.lineTo(r,-n),c.lineTo(r,n),c.lineTo(-r,n),c.lineTo(-r,-n),c.closePath()}},_renderDashedStroke:function(c){var r=-this.width/2,n=-this.height/2,o=this.width,a=this.height;c.save(),this._setStrokeStyles(c,this),c.beginPath(),t.util.drawDashedLine(c,r,n,r+o,n,this.strokeDashArray),t.util.drawDashedLine(c,r+o,n,r+o,n+a,this.strokeDashArray),t.util.drawDashedLine(c,r+o,n+a,r,n+a,this.strokeDashArray),t.util.drawDashedLine(c,r,n+a,r,n,this.strokeDashArray),c.closePath(),c.restore()},toObject:function(c){var r=[];this.filters.forEach(function(o){o&&r.push(o.toObject())});var n=i(this.callSuper("toObject",["crossOrigin","cropX","cropY"].concat(c)),{src:this.getSrc(),filters:r});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var c=[],r=[],n,o=-this.width/2,a=-this.height/2,u="";if(this.hasCrop()){var l=t.Object.__uid++;c.push('<clipPath id="imageCrop_'+l+`">
`,'	<rect x="'+o+'" y="'+a+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),u=' clip-path="url(#imageCrop_'+l+')" '}if(r.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',a-this.cropY,'" width="',this._element.width||this._element.naturalWidth,'" height="',this._element.height||this._element.height,'"',u,`></image>
`),this.stroke||this.strokeDashArray){var s=this.fill;this.fill=null,n=["	<rect ",'x="',o,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=s}return this.paintFirst!=="fill"?c=c.concat(n,r):c=c.concat(r,n),c},getSrc:function(c){var r=c?this._element:this._originalElement;return r?r.toDataURL?r.toDataURL():this.srcFromAttribute?r.getAttribute("src"):r.src:this.src||""},setSrc:function(c,r,n){return t.util.loadImage(c,function(o){this.setElement(o,n),this._setWidthHeight(),r&&r(this)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var c=this.resizeFilter,r=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),o=n.scaleX,a=n.scaleY,u=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!c||o>r&&a>r){this._element=u,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=o,this._lastScaleY=a;return}t.filterBackend||(t.filterBackend=t.initFilterBackend());var l=t.util.createCanvasElement(),s=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,h=u.width,d=u.height;l.width=h,l.height=d,this._element=l,this._lastScaleX=c.scaleX=o,this._lastScaleY=c.scaleY=a,t.filterBackend.applyFilters([c],u,h,d,this._element,s),this._filterScalingX=l.width/this._originalElement.width,this._filterScalingY=l.height/this._originalElement.height},applyFilters:function(c){if(c=c||this.filters||[],c=c.filter(function(u){return u&&!u.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),c.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var r=this._originalElement,n=r.naturalWidth||r.width,o=r.naturalHeight||r.height;if(this._element===this._originalElement){var a=t.util.createCanvasElement();a.width=n,a.height=o,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,o),this._lastScaleX=1,this._lastScaleY=1;return t.filterBackend||(t.filterBackend=t.initFilterBackend()),t.filterBackend.applyFilters(c,this._originalElement,n,o,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(c){this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(c),this._renderPaintInOrder(c)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(c){var r=this._element,n=this.width,o=this.height,a=Math.min(r.naturalWidth||r.width,n*this._filterScalingX),u=Math.min(r.naturalHeight||r.height,o*this._filterScalingY),l=-n/2,s=-o/2,h=Math.max(0,this.cropX*this._filterScalingX),d=Math.max(0,this.cropY*this._filterScalingY);r&&c.drawImage(r,h,d,a,u,l,s,n,o)},_needsResize:function(){var c=this.getTotalObjectScaling();return c.scaleX!==this._lastScaleX||c.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(c,r){this.setElement(t.util.getById(c),r),t.util.addClass(this.getElement(),t.Image.CSS_CANVAS)},_initConfig:function(c){c||(c={}),this.setOptions(c),this._setWidthHeight(c),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(c,r){c&&c.length?t.util.enlivenObjects(c,function(n){r&&r(n)},"fabric.Image.filters"):r&&r()},_setWidthHeight:function(c){c||(c={});var r=this.getElement();this.width=c.width||r.naturalWidth||r.width||0,this.height=c.height||r.naturalHeight||r.height||0},parsePreserveAspectRatioAttribute:function(){var c=t.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),r=this._element.width,n=this._element.height,o=1,a=1,u=0,l=0,s=0,h=0,d,p=this.width,v=this.height,b={width:p,height:v};return c&&(c.alignX!=="none"||c.alignY!=="none")?(c.meetOrSlice==="meet"&&(o=a=t.util.findScaleToFit(this._element,b),d=(p-r*o)/2,c.alignX==="Min"&&(u=-d),c.alignX==="Max"&&(u=d),d=(v-n*a)/2,c.alignY==="Min"&&(l=-d),c.alignY==="Max"&&(l=d)),c.meetOrSlice==="slice"&&(o=a=t.util.findScaleToCover(this._element,b),d=r-p/o,c.alignX==="Mid"&&(s=d/2),c.alignX==="Max"&&(s=d),d=n-v/a,c.alignY==="Mid"&&(h=d/2),c.alignY==="Max"&&(h=d),r=p/o,n=v/a)):(o=p/r,a=v/n),{width:r,height:n,scaleX:o,scaleY:a,offsetLeft:u,offsetTop:l,cropX:s,cropY:h}}}),t.Image.CSS_CANVAS="canvas-img",t.Image.prototype.getSvgSrc=t.Image.prototype.getSrc,t.Image.fromObject=function(c,r){var n=t.util.object.clone(c);t.util.loadImage(n.src,function(o,a){if(a){r&&r(null,a);return}t.Image.prototype._initFilters.call(n,n.filters,function(u){n.filters=u||[],t.Image.prototype._initFilters.call(n,[n.resizeFilter],function(l){n.resizeFilter=l[0],t.util.enlivenObjects([n.clipPath],function(s){n.clipPath=s[0];var h=new t.Image(o,n);r(h)})})})},null,n.crossOrigin)},t.Image.fromURL=function(c,r,n){t.util.loadImage(c,function(o){r&&r(new t.Image(o,n))},null,n&&n.crossOrigin)},t.Image.ATTRIBUTE_NAMES=t.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin".split(" ")),t.Image.fromElement=function(c,r,n){var o=t.parseAttributes(c,t.Image.ATTRIBUTE_NAMES);t.Image.fromURL(o["xlink:href"],r,i(n?t.util.object.clone(n):{},o))}}(e),t.util.object.extend(t.Object.prototype,{_getAngleValueForStraighten:function(){var f=this.angle%360;return f>0?Math.round((f-1)/90)*90:Math.round(f/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(f){f=f||{};var i=function(){},c=f.onComplete||i,r=f.onChange||i,n=this;return t.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(o){n.rotate(o),r()},onComplete:function(){n.setCoords(),c()}}),this}}),t.util.object.extend(t.StaticCanvas.prototype,{straightenObject:function(f){return f.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(f){return f.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){function f(c,r){var n="precision "+r+` float;
void main(){}`,o=c.createShader(c.FRAGMENT_SHADER);return c.shaderSource(o,n),c.compileShader(o),!!c.getShaderParameter(o,c.COMPILE_STATUS)}t.isWebglSupported=function(c){if(t.isLikelyNode)return!1;c=c||t.WebglFilterBackend.prototype.tileSize;var r=document.createElement("canvas"),n=r.getContext("webgl")||r.getContext("experimental-webgl"),o=!1;if(n){t.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),o=t.maxTextureSize>=c;for(var a=["highp","mediump","lowp"],u=0;u<3;u++)if(f(n,a[u])){t.webGlPrecision=a[u];break}}return this.isSupported=o,o},t.WebglFilterBackend=i;function i(c){c&&c.tileSize&&(this.tileSize=c.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.prototype={tileSize:2048,resources:{},setupGLContext:function(c,r){this.dispose(),this.createWebGLCanvas(c,r),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(c,r)},chooseFastestCopyGLTo2DMethod:function(c,r){var n=typeof window.performance!="undefined",o;try{new ImageData(1,1),o=!0}catch{o=!1}var a=typeof ArrayBuffer!="undefined",u=typeof Uint8ClampedArray!="undefined";if(!!(n&&o&&a&&u)){var l=t.util.createCanvasElement(),s=new ArrayBuffer(c*r*4);if(t.forceGLPutImageData){this.imageBuffer=s,this.copyGLTo2D=x;return}var h={imageBuffer:s,destinationWidth:c,destinationHeight:r,targetCanvas:l},d,p,v;l.width=c,l.height=r,d=window.performance.now(),y.call(h,this.gl,h),p=window.performance.now()-d,d=window.performance.now(),x.call(h,this.gl,h),v=window.performance.now()-d,p>v?(this.imageBuffer=s,this.copyGLTo2D=x):this.copyGLTo2D=y}},createWebGLCanvas:function(c,r){var n=t.util.createCanvasElement();n.width=c,n.height=r;var o={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=n.getContext("webgl",o);a||(a=n.getContext("experimental-webgl",o)),a&&(a.clearColor(0,0,0,0),this.canvas=n,this.gl=a)},applyFilters:function(c,r,n,o,a,u){var l=this.gl,s;u&&(s=this.getCachedTexture(u,r));var h={originalWidth:r.width||r.originalWidth,originalHeight:r.height||r.originalHeight,sourceWidth:n,sourceHeight:o,destinationWidth:n,destinationHeight:o,context:l,sourceTexture:this.createTexture(l,n,o,!s&&r),targetTexture:this.createTexture(l,n,o),originalTexture:s||this.createTexture(l,n,o,!s&&r),passes:c.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},d=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,d),c.forEach(function(p){p&&p.applyTo(h)}),_(h),this.copyGLTo2D(l,h),l.bindTexture(l.TEXTURE_2D,null),l.deleteTexture(h.sourceTexture),l.deleteTexture(h.targetTexture),l.deleteFramebuffer(d),a.getContext("2d").setTransform(1,0,0,1,0,0),h},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(c,r,n,o){var a=c.createTexture();return c.bindTexture(c.TEXTURE_2D,a),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),o?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,o):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,r,n,0,c.RGBA,c.UNSIGNED_BYTE,null),a},getCachedTexture:function(c,r){if(this.textureCache[c])return this.textureCache[c];var n=this.createTexture(this.gl,r.width,r.height,r);return this.textureCache[c]=n,n},evictCachesForKey:function(c){this.textureCache[c]&&(this.gl.deleteTexture(this.textureCache[c]),delete this.textureCache[c])},copyGLTo2D:y,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var c=this.gl,r={renderer:"",vendor:""};if(!c)return r;var n=c.getExtension("WEBGL_debug_renderer_info");if(n){var o=c.getParameter(n.UNMASKED_RENDERER_WEBGL),a=c.getParameter(n.UNMASKED_VENDOR_WEBGL);o&&(r.renderer=o.toLowerCase()),a&&(r.vendor=a.toLowerCase())}return this.gpuInfo=r,r}}}();function _(f){var i=f.targetCanvas,c=i.width,r=i.height,n=f.destinationWidth,o=f.destinationHeight;(c!==n||r!==o)&&(i.width=n,i.height=o)}function y(f,i){var c=f.canvas,r=i.targetCanvas,n=r.getContext("2d");n.translate(0,r.height),n.scale(1,-1);var o=c.height-r.height;n.drawImage(c,0,o,r.width,r.height,0,0,r.width,r.height)}function x(f,i){var c=i.targetCanvas,r=c.getContext("2d"),n=i.destinationWidth,o=i.destinationHeight,a=n*o*4,u=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);f.readPixels(0,0,n,o,f.RGBA,f.UNSIGNED_BYTE,u);var s=new ImageData(l,n,o);r.putImageData(s,0,0)}(function(){var f=function(){};t.Canvas2dFilterBackend=i;function i(){}i.prototype={evictCachesForKey:f,dispose:f,clearWebGLCaches:f,resources:{},applyFilters:function(c,r,n,o,a){var u=a.getContext("2d");u.drawImage(r,0,0,n,o);var l=u.getImageData(0,0,n,o),s=u.getImageData(0,0,n,o),h={sourceWidth:n,sourceHeight:o,imageData:l,originalEl:r,originalImageData:s,canvasEl:a,ctx:u,filterBackend:this};return c.forEach(function(d){d.applyTo(h)}),(h.imageData.width!==n||h.imageData.height!==o)&&(a.width=h.imageData.width,a.height=h.imageData.height),u.putImageData(h.imageData,0,0),h}}})(),t.Image=t.Image||{},t.Image.filters=t.Image.filters||{},t.Image.filters.BaseFilter=t.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(f){f&&this.setOptions(f)},setOptions:function(f){for(var i in f)this[i]=f[i]},createProgram:function(f,i,c){i=i||this.fragmentSource,c=c||this.vertexSource,t.webGlPrecision!=="highp"&&(i=i.replace(/precision highp float/g,"precision "+t.webGlPrecision+" float"));var r=f.createShader(f.VERTEX_SHADER);if(f.shaderSource(r,c),f.compileShader(r),!f.getShaderParameter(r,f.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+f.getShaderInfoLog(r));var n=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(n,i),f.compileShader(n),!f.getShaderParameter(n,f.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+f.getShaderInfoLog(n));var o=f.createProgram();if(f.attachShader(o,r),f.attachShader(o,n),f.linkProgram(o),!f.getProgramParameter(o,f.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+f.getProgramInfoLog(o));var a=this.getAttributeLocations(f,o),u=this.getUniformLocations(f,o)||{};return u.uStepW=f.getUniformLocation(o,"uStepW"),u.uStepH=f.getUniformLocation(o,"uStepH"),{program:o,attributeLocations:a,uniformLocations:u}},getAttributeLocations:function(f,i){return{aPosition:f.getAttribLocation(i,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(f,i,c){var r=i.aPosition,n=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,n),f.enableVertexAttribArray(r),f.vertexAttribPointer(r,2,f.FLOAT,!1,0,0),f.bufferData(f.ARRAY_BUFFER,c,f.STATIC_DRAW)},_setupFrameBuffer:function(f){var i=f.context,c,r;f.passes>1?(c=f.destinationWidth,r=f.destinationHeight,(f.sourceWidth!==c||f.sourceHeight!==r)&&(i.deleteTexture(f.targetTexture),f.targetTexture=f.filterBackend.createTexture(i,c,r)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,f.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(f){f.passes--,f.pass++;var i=f.targetTexture;f.targetTexture=f.sourceTexture,f.sourceTexture=i},isNeutralState:function(){var f=this.mainParameter,i=t.Image.filters[this.type].prototype;if(f)if(Array.isArray(i[f])){for(var c=i[f].length;c--;)if(this[f][c]!==i[f][c])return!1;return!0}else return i[f]===this[f];else return!1},applyTo:function(f){f.webgl?(this._setupFrameBuffer(f),this.applyToWebGL(f),this._swapTextures(f)):this.applyTo2d(f)},retrieveShader:function(f){return f.programCache.hasOwnProperty(this.type)||(f.programCache[this.type]=this.createProgram(f.context)),f.programCache[this.type]},applyToWebGL:function(f){var i=f.context,c=this.retrieveShader(f);f.pass===0&&f.originalTexture?i.bindTexture(i.TEXTURE_2D,f.originalTexture):i.bindTexture(i.TEXTURE_2D,f.sourceTexture),i.useProgram(c.program),this.sendAttributeData(i,c.attributeLocations,f.aPosition),i.uniform1f(c.uniformLocations.uStepW,1/f.sourceWidth),i.uniform1f(c.uniformLocations.uStepH,1/f.sourceHeight),this.sendUniformData(i,c.uniformLocations),i.viewport(0,0,f.destinationWidth,f.destinationHeight),i.drawArrays(i.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(f,i,c){f.activeTexture(c),f.bindTexture(f.TEXTURE_2D,i),f.activeTexture(f.TEXTURE0)},unbindAdditionalTexture:function(f,i){f.activeTexture(i),f.bindTexture(f.TEXTURE_2D,null),f.activeTexture(f.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(f){this[this.mainParameter]=f},sendUniformData:function(){},createHelpLayer:function(f){if(!f.helpLayer){var i=document.createElement("canvas");i.width=f.sourceWidth,i.height=f.sourceHeight,f.helpLayer=i}},toObject:function(){var f={type:this.type},i=this.mainParameter;return i&&(f[i]=this[i]),f},toJSON:function(){return this.toObject()}}),t.Image.filters.BaseFilter.fromObject=function(f,i){var c=new t.Image.filters[f.type](f);return i&&i(c),c},function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.ColorMatrix=r(c.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(n){this.callSuper("initialize",n),this.matrix=this.matrix.slice(0)},applyTo2d:function(n){var o=n.imageData,a=o.data,u=a.length,l=this.matrix,s,h,d,p,v,b=this.colorsOnly;for(v=0;v<u;v+=4)s=a[v],h=a[v+1],d=a[v+2],b?(a[v]=s*l[0]+h*l[1]+d*l[2]+l[4]*255,a[v+1]=s*l[5]+h*l[6]+d*l[7]+l[9]*255,a[v+2]=s*l[10]+h*l[11]+d*l[12]+l[14]*255):(p=a[v+3],a[v]=s*l[0]+h*l[1]+d*l[2]+p*l[3]+l[4]*255,a[v+1]=s*l[5]+h*l[6]+d*l[7]+p*l[8]+l[9]*255,a[v+2]=s*l[10]+h*l[11]+d*l[12]+p*l[13]+l[14]*255,a[v+3]=s*l[15]+h*l[16]+d*l[17]+p*l[18]+l[19]*255)},getUniformLocations:function(n,o){return{uColorMatrix:n.getUniformLocation(o,"uColorMatrix"),uConstants:n.getUniformLocation(o,"uConstants")}},sendUniformData:function(n,o){var a=this.matrix,u=[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]],l=[a[4],a[9],a[14],a[19]];n.uniformMatrix4fv(o.uColorMatrix,!1,u),n.uniform4fv(o.uConstants,l)}}),i.Image.filters.ColorMatrix.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Brightness=r(c.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(n){if(this.brightness!==0){var o=n.imageData,a=o.data,u,l=a.length,s=Math.round(this.brightness*255);for(u=0;u<l;u+=4)a[u]=a[u]+s,a[u+1]=a[u+1]+s,a[u+2]=a[u+2]+s}},getUniformLocations:function(n,o){return{uBrightness:n.getUniformLocation(o,"uBrightness")}},sendUniformData:function(n,o){n.uniform1f(o.uBrightness,this.brightness)}}),i.Image.filters.Brightness.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.Image.filters,n=i.util.createClass;r.Convolute=n(r.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(o){var a=Math.sqrt(this.matrix.length),u=this.type+"_"+a+"_"+(this.opaque?1:0),l=this.fragmentSource[u];return o.programCache.hasOwnProperty(u)||(o.programCache[u]=this.createProgram(o.context,l)),o.programCache[u]},applyTo2d:function(o){var a=o.imageData,u=a.data,l=this.matrix,s=Math.round(Math.sqrt(l.length)),h=Math.floor(s/2),d=a.width,p=a.height,v=o.ctx.createImageData(d,p),b=v.data,C=this.opaque?1:0,w,S,T,A,M,E,D,N,K,U,Q,re,k;for(Q=0;Q<p;Q++)for(U=0;U<d;U++){for(M=(Q*d+U)*4,w=0,S=0,T=0,A=0,k=0;k<s;k++)for(re=0;re<s;re++)D=Q+k-h,E=U+re-h,!(D<0||D>=p||E<0||E>=d)&&(N=(D*d+E)*4,K=l[k*s+re],w+=u[N]*K,S+=u[N+1]*K,T+=u[N+2]*K,C||(A+=u[N+3]*K));b[M]=w,b[M+1]=S,b[M+2]=T,C?b[M+3]=u[M+3]:b[M+3]=A}o.imageData=v},getUniformLocations:function(o,a){return{uMatrix:o.getUniformLocation(a,"uMatrix"),uOpaque:o.getUniformLocation(a,"uOpaque"),uHalfSize:o.getUniformLocation(a,"uHalfSize"),uSize:o.getUniformLocation(a,"uSize")}},sendUniformData:function(o,a){o.uniform1fv(a.uMatrix,this.matrix)},toObject:function(){return c(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),i.Image.filters.Convolute.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Grayscale=r(c.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(n){var o=n.imageData,a=o.data,u,l=a.length,s,h=this.mode;for(u=0;u<l;u+=4)h==="average"?s=(a[u]+a[u+1]+a[u+2])/3:h==="lightness"?s=(Math.min(a[u],a[u+1],a[u+2])+Math.max(a[u],a[u+1],a[u+2]))/2:h==="luminosity"&&(s=.21*a[u]+.72*a[u+1]+.07*a[u+2]),a[u]=s,a[u+1]=s,a[u+2]=s},retrieveShader:function(n){var o=this.type+"_"+this.mode;if(!n.programCache.hasOwnProperty(o)){var a=this.fragmentSource[this.mode];n.programCache[o]=this.createProgram(n.context,a)}return n.programCache[o]},getUniformLocations:function(n,o){return{uMode:n.getUniformLocation(o,"uMode")}},sendUniformData:function(n,o){var a=1;n.uniform1i(o.uMode,a)},isNeutralState:function(){return!1}}),i.Image.filters.Grayscale.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Invert=r(c.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(n){var o=n.imageData,a=o.data,u,l=a.length;for(u=0;u<l;u+=4)a[u]=255-a[u],a[u+1]=255-a[u+1],a[u+2]=255-a[u+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(n,o){return{uInvert:n.getUniformLocation(o,"uInvert")}},sendUniformData:function(n,o){n.uniform1i(o.uInvert,this.invert)}}),i.Image.filters.Invert.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.Image.filters,n=i.util.createClass;r.Noise=n(r.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(o){if(this.noise!==0){var a=o.imageData,u=a.data,l,s=u.length,h=this.noise,d;for(l=0,s=u.length;l<s;l+=4)d=(.5-Math.random())*h,u[l]+=d,u[l+1]+=d,u[l+2]+=d}},getUniformLocations:function(o,a){return{uNoise:o.getUniformLocation(a,"uNoise"),uSeed:o.getUniformLocation(a,"uSeed")}},sendUniformData:function(o,a){o.uniform1f(a.uNoise,this.noise/255),o.uniform1f(a.uSeed,Math.random())},toObject:function(){return c(this.callSuper("toObject"),{noise:this.noise})}}),i.Image.filters.Noise.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Pixelate=r(c.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(n){var o=n.imageData,a=o.data,u=o.height,l=o.width,s,h,d,p,v,b,C,w,S,T,A;for(h=0;h<u;h+=this.blocksize)for(d=0;d<l;d+=this.blocksize)for(s=h*4*l+d*4,p=a[s],v=a[s+1],b=a[s+2],C=a[s+3],T=Math.min(h+this.blocksize,u),A=Math.min(d+this.blocksize,l),w=h;w<T;w++)for(S=d;S<A;S++)s=w*4*l+S*4,a[s]=p,a[s+1]=v,a[s+2]=b,a[s+3]=C},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(n,o){return{uBlocksize:n.getUniformLocation(o,"uBlocksize"),uStepW:n.getUniformLocation(o,"uStepW"),uStepH:n.getUniformLocation(o,"uStepH")}},sendUniformData:function(n,o){n.uniform1f(o.uBlocksize,this.blocksize)}}),i.Image.filters.Pixelate.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.extend,r=i.Image.filters,n=i.util.createClass;r.RemoveColor=n(r.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(o){var a=o.imageData,u=a.data,l,s=this.distance*255,h,d,p,v=new i.Color(this.color).getSource(),b=[v[0]-s,v[1]-s,v[2]-s],C=[v[0]+s,v[1]+s,v[2]+s];for(l=0;l<u.length;l+=4)h=u[l],d=u[l+1],p=u[l+2],h>b[0]&&d>b[1]&&p>b[2]&&h<C[0]&&d<C[1]&&p<C[2]&&(u[l+3]=0)},getUniformLocations:function(o,a){return{uLow:o.getUniformLocation(a,"uLow"),uHigh:o.getUniformLocation(a,"uHigh")}},sendUniformData:function(o,a){var u=new i.Color(this.color).getSource(),l=parseFloat(this.distance),s=[0+u[0]/255-l,0+u[1]/255-l,0+u[2]/255-l,1],h=[u[0]/255+l,u[1]/255+l,u[2]/255+l,1];o.uniform4fv(a.uLow,s),o.uniform4fv(a.uHigh,h)},toObject:function(){return c(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),i.Image.filters.RemoveColor.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in n)c[o]=r(c.ColorMatrix,{type:o,matrix:n[o],mainParameter:!1,colorsOnly:!0}),i.Image.filters[o].fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric,c=i.Image.filters,r=i.util.createClass;c.BlendColor=r(c.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(n){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[n]+`}
}`},retrieveShader:function(n){var o=this.type+"_"+this.mode,a;return n.programCache.hasOwnProperty(o)||(a=this.buildSource(this.mode),n.programCache[o]=this.createProgram(n.context,a)),n.programCache[o]},applyTo2d:function(n){var o=n.imageData,a=o.data,u=a.length,l,s,h,d,p,v,b,C=1-this.alpha;b=new i.Color(this.color).getSource(),l=b[0]*this.alpha,s=b[1]*this.alpha,h=b[2]*this.alpha;for(var w=0;w<u;w+=4)switch(d=a[w],p=a[w+1],v=a[w+2],this.mode){case"multiply":a[w]=d*l/255,a[w+1]=p*s/255,a[w+2]=v*h/255;break;case"screen":a[w]=255-(255-d)*(255-l)/255,a[w+1]=255-(255-p)*(255-s)/255,a[w+2]=255-(255-v)*(255-h)/255;break;case"add":a[w]=d+l,a[w+1]=p+s,a[w+2]=v+h;break;case"diff":case"difference":a[w]=Math.abs(d-l),a[w+1]=Math.abs(p-s),a[w+2]=Math.abs(v-h);break;case"subtract":a[w]=d-l,a[w+1]=p-s,a[w+2]=v-h;break;case"darken":a[w]=Math.min(d,l),a[w+1]=Math.min(p,s),a[w+2]=Math.min(v,h);break;case"lighten":a[w]=Math.max(d,l),a[w+1]=Math.max(p,s),a[w+2]=Math.max(v,h);break;case"overlay":a[w]=l<128?2*d*l/255:255-2*(255-d)*(255-l)/255,a[w+1]=s<128?2*p*s/255:255-2*(255-p)*(255-s)/255,a[w+2]=h<128?2*v*h/255:255-2*(255-v)*(255-h)/255;break;case"exclusion":a[w]=l+d-2*l*d/255,a[w+1]=s+p-2*s*p/255,a[w+2]=h+v-2*h*v/255;break;case"tint":a[w]=l+d*C,a[w+1]=s+p*C,a[w+2]=h+v*C}},getUniformLocations:function(n,o){return{uColor:n.getUniformLocation(o,"uColor")}},sendUniformData:function(n,o){var a=new i.Color(this.color).getSource();a[0]=this.alpha*a[0]/255,a[1]=this.alpha*a[1]/255,a[2]=this.alpha*a[2]/255,a[3]=this.alpha,n.uniform4fv(o.uColor,a)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendColor.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric,c=i.Image.filters,r=i.util.createClass;c.BlendImage=r(c.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(n){var o=this.type+"_"+this.mode,a=this.fragmentSource[this.mode];return n.programCache.hasOwnProperty(o)||(n.programCache[o]=this.createProgram(n.context,a)),n.programCache[o]},applyToWebGL:function(n){var o=n.context,a=this.createTexture(n.filterBackend,this.image);this.bindAdditionalTexture(o,a,o.TEXTURE1),this.callSuper("applyToWebGL",n),this.unbindAdditionalTexture(o,o.TEXTURE1)},createTexture:function(n,o){return n.getCachedTexture(o.cacheKey,o._element)},calculateMatrix:function(){var n=this.image,o=n._element.width,a=n._element.height;return[1/n.scaleX,0,0,0,1/n.scaleY,0,-n.left/o,-n.top/a,1]},applyTo2d:function(n){var o=n.imageData,a=n.filterBackend.resources,u=o.data,l=u.length,s=o.width,h=o.height,d,p,v,b,C,w,S,T,A,M,E=this.image,D;a.blendImage||(a.blendImage=i.util.createCanvasElement()),A=a.blendImage,M=A.getContext("2d"),A.width!==s||A.height!==h?(A.width=s,A.height=h):M.clearRect(0,0,s,h),M.setTransform(E.scaleX,0,0,E.scaleY,E.left,E.top),M.drawImage(E._element,0,0,s,h),D=M.getImageData(0,0,s,h).data;for(var N=0;N<l;N+=4)switch(C=u[N],w=u[N+1],S=u[N+2],T=u[N+3],d=D[N],p=D[N+1],v=D[N+2],b=D[N+3],this.mode){case"multiply":u[N]=C*d/255,u[N+1]=w*p/255,u[N+2]=S*v/255,u[N+3]=T*b/255;break;case"mask":u[N+3]=b;break}},getUniformLocations:function(n,o){return{uTransformMatrix:n.getUniformLocation(o,"uTransformMatrix"),uImage:n.getUniformLocation(o,"uImage")}},sendUniformData:function(n,o){var a=this.calculateMatrix();n.uniform1i(o.uImage,1),n.uniformMatrix3fv(o.uTransformMatrix,!1,a)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),i.Image.filters.BlendImage.fromObject=function(n,o){i.Image.fromObject(n.image,function(a){var u=i.util.object.clone(n);u.image=a,o(new i.Image.filters.BlendImage(u))})}}(e),function(f){var i=f.fabric||(f.fabric={}),c=Math.pow,r=Math.floor,n=Math.sqrt,o=Math.abs,a=Math.round,u=Math.sin,l=Math.ceil,s=i.Image.filters,h=i.util.createClass;s.Resize=h(s.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(d,p){return{uDelta:d.getUniformLocation(p,"uDelta"),uTaps:d.getUniformLocation(p,"uTaps")}},sendUniformData:function(d,p){d.uniform2fv(p.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),d.uniform1fv(p.uTaps,this.taps)},retrieveShader:function(d){var p=this.getFilterWindow(),v=this.type+"_"+p;if(!d.programCache.hasOwnProperty(v)){var b=this.generateShader(p);d.programCache[v]=this.createProgram(d.context,b)}return d.programCache[v]},getFilterWindow:function(){var d=this.tempScale;return Math.ceil(this.lanczosLobes/d)},getTaps:function(){for(var d=this.lanczosCreate(this.lanczosLobes),p=this.tempScale,v=this.getFilterWindow(),b=new Array(v),C=1;C<=v;C++)b[C-1]=d(C*p);return b},generateShader:function(b){for(var p=new Array(b),v=this.fragmentSourceTOP,b,C=1;C<=b;C++)p[C-1]=C+".0 * uDelta";return v+="uniform float uTaps["+b+`];
`,v+=`void main() {
`,v+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,v+=`  float sum = 1.0;
`,p.forEach(function(w,S){v+="  color += texture2D(uTexture, vTexCoord + "+w+") * uTaps["+S+`];
`,v+="  color += texture2D(uTexture, vTexCoord - "+w+") * uTaps["+S+`];
`,v+="  sum += 2.0 * uTaps["+S+`];
`}),v+=`  gl_FragColor = color / sum;
`,v+="}",v},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(d){d.webgl?(d.passes++,this.width=d.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=d.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),d.destinationWidth=this.dW,this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d),d.sourceWidth=d.destinationWidth,this.height=d.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),d.destinationHeight=this.dH,this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d),d.sourceHeight=d.destinationHeight):this.applyTo2d(d)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(d){return function(p){if(p>=d||p<=-d)return 0;if(p<11920929e-14&&p>-11920929e-14)return 1;p*=Math.PI;var v=p/d;return u(p)/p*u(v)/v}},applyTo2d:function(d){var p=d.imageData,v=this.scaleX,b=this.scaleY;this.rcpScaleX=1/v,this.rcpScaleY=1/b;var C=p.width,w=p.height,S=a(C*v),T=a(w*b),A;this.resizeType==="sliceHack"?A=this.sliceByTwo(d,C,w,S,T):this.resizeType==="hermite"?A=this.hermiteFastResize(d,C,w,S,T):this.resizeType==="bilinear"?A=this.bilinearFiltering(d,C,w,S,T):this.resizeType==="lanczos"&&(A=this.lanczosResize(d,C,w,S,T)),d.imageData=A},sliceByTwo:function(d,p,v,b,C){var w=d.imageData,S=.5,T=!1,A=!1,M=p*S,E=v*S,D=i.filterBackend.resources,N,K,U=0,Q=0,re=p,k=0;for(D.sliceByTwo||(D.sliceByTwo=document.createElement("canvas")),N=D.sliceByTwo,(N.width<p*1.5||N.height<v)&&(N.width=p*1.5,N.height=v),K=N.getContext("2d"),K.clearRect(0,0,p*1.5,v),K.putImageData(w,0,0),b=r(b),C=r(C);!T||!A;)p=M,v=E,b<r(M*S)?M=r(M*S):(M=b,T=!0),C<r(E*S)?E=r(E*S):(E=C,A=!0),K.drawImage(N,U,Q,p,v,re,k,M,E),U=re,Q=k,k+=E;return K.getImageData(U,Q,b,C)},lanczosResize:function(d,p,v,b,C){function w(W){var G,le,F,O,R,I,X,V,ee,$,se;for(k.x=(W+.5)*E,z.x=r(k.x),G=0;G<C;G++){for(k.y=(G+.5)*D,z.y=r(k.y),R=0,I=0,X=0,V=0,ee=0,le=z.x-U;le<=z.x+U;le++)if(!(le<0||le>=p)){$=r(1e3*o(le-k.x)),re[$]||(re[$]={});for(var P=z.y-Q;P<=z.y+Q;P++)P<0||P>=v||(se=r(1e3*o(P-k.y)),re[$][se]||(re[$][se]=M(n(c($*N,2)+c(se*K,2))/1e3)),F=re[$][se],F>0&&(O=(P*p+le)*4,R+=F,I+=F*S[O],X+=F*S[O+1],V+=F*S[O+2],ee+=F*S[O+3]))}O=(G*b+W)*4,A[O]=I/R,A[O+1]=X/R,A[O+2]=V/R,A[O+3]=ee/R}return++W<b?w(W):T}var S=d.imageData.data,T=d.ctx.createImageData(b,C),A=T.data,M=this.lanczosCreate(this.lanczosLobes),E=this.rcpScaleX,D=this.rcpScaleY,N=2/this.rcpScaleX,K=2/this.rcpScaleY,U=l(E*this.lanczosLobes/2),Q=l(D*this.lanczosLobes/2),re={},k={},z={};return w(0)},bilinearFiltering:function(d,p,v,b,C){var w,S,T,A,M,E,D,N,K,U,Q,re,k=0,z,W=this.rcpScaleX,G=this.rcpScaleY,le=4*(p-1),F=d.imageData,O=F.data,R=d.ctx.createImageData(b,C),I=R.data;for(D=0;D<C;D++)for(N=0;N<b;N++)for(M=r(W*N),E=r(G*D),K=W*N-M,U=G*D-E,z=4*(E*p+M),Q=0;Q<4;Q++)w=O[z+Q],S=O[z+4+Q],T=O[z+le+Q],A=O[z+le+4+Q],re=w*(1-K)*(1-U)+S*K*(1-U)+T*U*(1-K)+A*K*U,I[k++]=re;return R},hermiteFastResize:function(d,p,v,b,C){for(var w=this.rcpScaleX,S=this.rcpScaleY,T=l(w/2),A=l(S/2),M=d.imageData,E=M.data,D=d.ctx.createImageData(b,C),N=D.data,K=0;K<C;K++)for(var U=0;U<b;U++){for(var Q=(U+K*b)*4,re=0,k=0,z=0,W=0,G=0,le=0,F=0,O=(K+.5)*S,R=r(K*S);R<(K+1)*S;R++)for(var I=o(O-(R+.5))/A,X=(U+.5)*w,V=I*I,ee=r(U*w);ee<(U+1)*w;ee++){var $=o(X-(ee+.5))/T,se=n(V+$*$);se>1&&se<-1||(re=2*se*se*se-3*se*se+1,re>0&&($=4*(ee+R*p),F+=re*E[$+3],z+=re,E[$+3]<255&&(re=re*E[$+3]/250),W+=re*E[$],G+=re*E[$+1],le+=re*E[$+2],k+=re))}N[Q]=W/k,N[Q+1]=G/k,N[Q+2]=le/k,N[Q+3]=F/z}return D},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),i.Image.filters.Resize.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Contrast=r(c.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(n){if(this.contrast!==0){var o=n.imageData,a,l,u=o.data,l=u.length,s=Math.floor(this.contrast*255),h=259*(s+255)/(255*(259-s));for(a=0;a<l;a+=4)u[a]=h*(u[a]-128)+128,u[a+1]=h*(u[a+1]-128)+128,u[a+2]=h*(u[a+2]-128)+128}},getUniformLocations:function(n,o){return{uContrast:n.getUniformLocation(o,"uContrast")}},sendUniformData:function(n,o){n.uniform1f(o.uContrast,this.contrast)}}),i.Image.filters.Contrast.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Saturation=r(c.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(n){if(this.saturation!==0){var o=n.imageData,a=o.data,u=a.length,l=-this.saturation,s,h;for(s=0;s<u;s+=4)h=Math.max(a[s],a[s+1],a[s+2]),a[s]+=h!==a[s]?(h-a[s])*l:0,a[s+1]+=h!==a[s+1]?(h-a[s+1])*l:0,a[s+2]+=h!==a[s+2]?(h-a[s+2])*l:0}},getUniformLocations:function(n,o){return{uSaturation:n.getUniformLocation(o,"uSaturation")}},sendUniformData:function(n,o){n.uniform1f(o.uSaturation,-this.saturation)}}),i.Image.filters.Saturation.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Blur=r(c.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(n){n.webgl?(this.aspectRatio=n.sourceWidth/n.sourceHeight,n.passes++,this._setupFrameBuffer(n),this.horizontal=!0,this.applyToWebGL(n),this._swapTextures(n),this._setupFrameBuffer(n),this.horizontal=!1,this.applyToWebGL(n),this._swapTextures(n)):this.applyTo2d(n)},applyTo2d:function(n){n.imageData=this.simpleBlur(n)},simpleBlur:function(n){var o=n.filterBackend.resources,a,u,l=n.imageData.width,s=n.imageData.height;o.blurLayer1||(o.blurLayer1=i.util.createCanvasElement(),o.blurLayer2=i.util.createCanvasElement()),a=o.blurLayer1,u=o.blurLayer2,(a.width!==l||a.height!==s)&&(u.width=a.width=l,u.height=a.height=s);var h=a.getContext("2d"),d=u.getContext("2d"),p=15,v,b,C,w,S=this.blur*.06*.5;for(h.putImageData(n.imageData,0,0),d.clearRect(0,0,l,s),w=-p;w<=p;w++)v=(Math.random()-.5)/4,b=w/p,C=S*b*l+v,d.globalAlpha=1-Math.abs(b),d.drawImage(a,C,v),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);for(w=-p;w<=p;w++)v=(Math.random()-.5)/4,b=w/p,C=S*b*s+v,d.globalAlpha=1-Math.abs(b),d.drawImage(a,v,C),h.drawImage(u,0,0),d.globalAlpha=1,d.clearRect(0,0,u.width,u.height);n.ctx.drawImage(a,0,0);var T=n.ctx.getImageData(0,0,a.width,a.height);return h.globalAlpha=1,h.clearRect(0,0,a.width,a.height),T},getUniformLocations:function(n,o){return{delta:n.getUniformLocation(o,"uDelta")}},sendUniformData:function(n,o){var a=this.chooseRightDelta();n.uniform2fv(o.delta,a)},chooseRightDelta:function(){var n=1,o=[0,0],a;return this.horizontal?this.aspectRatio>1&&(n=1/this.aspectRatio):this.aspectRatio<1&&(n=this.aspectRatio),a=n*this.blur*.12,this.horizontal?o[0]=a:o[1]=a,o}}),c.Blur.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Gamma=r(c.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(n){this.gamma=[1,1,1],c.BaseFilter.prototype.initialize.call(this,n)},applyTo2d:function(n){var o=n.imageData,a=o.data,u=this.gamma,l=a.length,s=1/u[0],h=1/u[1],d=1/u[2],p;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),p=0,l=256;p<l;p++)this.rVals[p]=Math.pow(p/255,s)*255,this.gVals[p]=Math.pow(p/255,h)*255,this.bVals[p]=Math.pow(p/255,d)*255;for(p=0,l=a.length;p<l;p+=4)a[p]=this.rVals[a[p]],a[p+1]=this.gVals[a[p+1]],a[p+2]=this.bVals[a[p+2]]},getUniformLocations:function(n,o){return{uGamma:n.getUniformLocation(o,"uGamma")}},sendUniformData:function(n,o){n.uniform3fv(o.uGamma,this.gamma)}}),i.Image.filters.Gamma.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.Composed=r(c.BaseFilter,{type:"Composed",subFilters:[],initialize:function(n){this.callSuper("initialize",n),this.subFilters=this.subFilters.slice(0)},applyTo:function(n){n.passes+=this.subFilters.length-1,this.subFilters.forEach(function(o){o.applyTo(n)})},toObject:function(){return i.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(n){return n.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(n){return!n.isNeutralState()})}}),i.Image.filters.Composed.fromObject=function(n,o){var a=n.subFilters||[],u=a.map(function(s){return new i.Image.filters[s.type](s)}),l=new i.Image.filters.Composed({subFilters:u});return o&&o(l),l}}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.Image.filters,r=i.util.createClass;c.HueRotation=r(c.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var n=this.rotation*Math.PI,o=i.util.cos(n),a=i.util.sin(n),u=1/3,l=Math.sqrt(u)*a,s=1-o;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=o+s/3,this.matrix[1]=u*s-l,this.matrix[2]=u*s+l,this.matrix[5]=u*s+l,this.matrix[6]=o+u*s,this.matrix[7]=u*s-l,this.matrix[10]=u*s-l,this.matrix[11]=u*s+l,this.matrix[12]=o+u*s},isNeutralState:function(n){return this.calculateMatrix(),c.BaseFilter.prototype.isNeutralState.call(this,n)},applyTo:function(n){this.calculateMatrix(),c.BaseFilter.prototype.applyTo.call(this,n)}}),i.Image.filters.HueRotation.fromObject=i.Image.filters.BaseFilter.fromObject}(e),function(f){var i=f.fabric||(f.fabric={}),c=i.util.object.clone;if(i.Text){i.warn("fabric.Text is already defined");return}i.Text=i.util.createClass(i.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:i.Object.prototype.stateProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),cacheProperties:i.Object.prototype.cacheProperties.concat("fontFamily","fontWeight","fontSize","text","underline","overline","linethrough","textAlign","fontStyle","lineHeight","textBackgroundColor","charSpacing","styles"),stroke:null,shadow:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(r,n){this.styles=n?n.styles||{}:{},this.text=r,this.__skipDimension=!0,this.callSuper("initialize",n),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},getMeasuringContext:function(){return i._measuringContext||(i._measuringContext=this.canvas&&this.canvas.contextCache||i.util.createCanvasElement().getContext("2d")),i._measuringContext},_splitText:function(){var r=this._splitTextIntoLines(this.text);return this.textLines=r.lines,this._textLines=r.graphemeLines,this._unwrappedTextLines=r._unwrappedLines,this._text=r.graphemeText,r},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var r,n,o,a,u,l,s,h=0,d=this._textLines.length;h<d;h++)if(!(this.textAlign!=="justify"&&(h===d-1||this.isEndOfWrapping(h)))&&(a=0,u=this._textLines[h],n=this.getLineWidth(h),n<this.width&&(s=this.textLines[h].match(this._reSpacesAndTabs)))){o=s.length,r=(this.width-n)/o;for(var p=0,v=u.length;p<=v;p++)l=this.__charBounds[h][p],this._reSpaceAndTab.test(u[p])?(l.width+=r,l.kernedWidth+=r,l.left+=a,a+=r):l.left+=a}},isEndOfWrapping:function(r){return r===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var r=this.callSuper("_getCacheCanvasDimensions"),n=this.fontSize;return r.width+=n*r.zoomX,r.height+=n*r.zoomY,r},_render:function(r){this._setTextStyles(r),this._renderTextLinesBackground(r),this._renderTextDecoration(r,"underline"),this._renderText(r),this._renderTextDecoration(r,"overline"),this._renderTextDecoration(r,"linethrough")},_renderText:function(r){this.paintFirst==="stroke"?(this._renderTextStroke(r),this._renderTextFill(r)):(this._renderTextFill(r),this._renderTextStroke(r))},_setTextStyles:function(r,n,o){r.textBaseline="alphabetic",r.font=this._getFontDeclaration(n,o)},calcTextWidth:function(){for(var r=this.getLineWidth(0),n=1,o=this._textLines.length;n<o;n++){var a=this.getLineWidth(n);a>r&&(r=a)}return r},_renderTextLine:function(r,n,o,a,u,l){this._renderChars(r,n,o,a,u,l)},_renderTextLinesBackground:function(r){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var n=0,o,a,u=r.fillStyle,l,s,h=this._getLeftOffset(),d=this._getTopOffset(),p=0,v=0,b,C,w=0,S=this._textLines.length;w<S;w++){if(o=this.getHeightOfLine(w),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",w)){n+=o;continue}l=this._textLines[w],a=this._getLineLeftOffset(w),v=0,p=0,s=this.getValueOfPropertyAt(w,0,"textBackgroundColor");for(var T=0,A=l.length;T<A;T++)b=this.__charBounds[w][T],C=this.getValueOfPropertyAt(w,T,"textBackgroundColor"),C!==s?(r.fillStyle=s,s&&r.fillRect(h+a+p,d+n,v,o/this.lineHeight),p=b.left,v=b.width,s=C):v+=b.kernedWidth;C&&(r.fillStyle=C,r.fillRect(h+a+p,d+n,v,o/this.lineHeight)),n+=o}r.fillStyle=u,this._removeShadow(r)}},getFontCache:function(r){var n=r.fontFamily.toLowerCase();i.charWidthsCache[n]||(i.charWidthsCache[n]={});var o=i.charWidthsCache[n],a=r.fontStyle.toLowerCase()+"_"+(r.fontWeight+"").toLowerCase();return o[a]||(o[a]={}),o[a]},_applyCharStyles:function(r,n,o,a,u){this._setFillStyles(n,u),this._setStrokeStyles(n,u),n.font=this._getFontDeclaration(u)},_measureChar:function(r,n,o,a){var u=this.getFontCache(n),l=this._getFontDeclaration(n),s=this._getFontDeclaration(a),h=o+r,d=l===s,p,v,b,C=n.fontSize/this.CACHE_FONT_SIZE,w;if(o&&u[o]!==void 0&&(b=u[o]),u[r]!==void 0&&(w=p=u[r]),d&&u[h]!==void 0&&(v=u[h],w=v-b),p===void 0||b===void 0||v===void 0){var S=this.getMeasuringContext();this._setTextStyles(S,n,!0)}return p===void 0&&(w=p=S.measureText(r).width,u[r]=p),b===void 0&&d&&o&&(b=S.measureText(o).width,u[o]=b),d&&v===void 0&&(v=S.measureText(h).width,u[h]=v,w=v-b),{width:p*C,kernedWidth:w*C}},getHeightOfChar:function(r,n){return this.getValueOfPropertyAt(r,n,"fontSize")},measureLine:function(r){var n=this._measureLine(r);return this.charSpacing!==0&&(n.width-=this._getWidthOfCharSpacing()),n.width<0&&(n.width=0),n},_measureLine:function(r){var n=0,o,a,u=this._textLines[r],l,s,h=0,d=new Array(u.length);for(this.__charBounds[r]=d,o=0;o<u.length;o++)a=u[o],s=this._getGraphemeBox(a,r,o,l),d[o]=s,n+=s.kernedWidth,l=a;return d[o]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:n,numOfSpaces:h}},_getGraphemeBox:function(r,n,o,a,u){var l=this.getCompleteStyleDeclaration(n,o),s=a?this.getCompleteStyleDeclaration(n,o-1):{},h=this._measureChar(r,l,a,s),d=h.kernedWidth,p=h.width,v;this.charSpacing!==0&&(v=this._getWidthOfCharSpacing(),p+=v,d+=v);var b={width:p,left:0,height:l.fontSize,kernedWidth:d,deltaY:l.deltaY};if(o>0&&!u){var C=this.__charBounds[n][o-1];b.left=C.left+C.width+h.kernedWidth-h.width}return b},getHeightOfLine:function(r){if(this.__lineHeights[r])return this.__lineHeights[r];for(var n=this._textLines[r],o=this.getHeightOfChar(r,0),a=1,u=n.length;a<u;a++)o=Math.max(this.getHeightOfChar(r,a),o);return this.__lineHeights[r]=o*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var r,n=0,o=0,a=this._textLines.length;o<a;o++)r=this.getHeightOfLine(o),n+=o===a-1?r/this.lineHeight:r;return n},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_applyPatternGradientTransform:function(r,n){if(!n||!n.toLive)return{offsetX:0,offsetY:0};var o=-this.width/2+n.offsetX||0,a=-this.height/2+n.offsetY||0;return r.transform(1,0,0,1,o,a),{offsetX:o,offsetY:a}},_renderTextCommon:function(r,n){r.save();for(var o=0,a=this._getLeftOffset(),u=this._getTopOffset(),l=this._applyPatternGradientTransform(r,n==="fillText"?this.fill:this.stroke),s=0,h=this._textLines.length;s<h;s++){var d=this.getHeightOfLine(s),p=d/this.lineHeight,v=this._getLineLeftOffset(s);this._renderTextLine(n,r,this._textLines[s],a+v-l.offsetX,u+o+p-l.offsetY,s),o+=d}r.restore()},_renderTextFill:function(r){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(r,"fillText")},_renderTextStroke:function(r){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(r),r.save(),this._setLineDash(r,this.strokeDashArray),r.beginPath(),this._renderTextCommon(r,"strokeText"),r.closePath(),r.restore())},_renderChars:function(r,n,o,a,u,l){var s=this.getHeightOfLine(l),h=this.textAlign.indexOf("justify")!==-1,d,p,v="",b,C=0,w,S=!h&&this.charSpacing===0&&this.isEmptyStyles(l);if(n.save(),u-=s*this._fontSizeFraction/this.lineHeight,S){this._renderChar(r,n,l,0,this.textLines[l],a,u,s),n.restore();return}for(var T=0,A=o.length-1;T<=A;T++)w=T===A||this.charSpacing,v+=o[T],b=this.__charBounds[l][T],C===0?(a+=b.kernedWidth-b.width,C+=b.width):C+=b.kernedWidth,h&&!w&&this._reSpaceAndTab.test(o[T])&&(w=!0),w||(d=d||this.getCompleteStyleDeclaration(l,T),p=this.getCompleteStyleDeclaration(l,T+1),w=this._hasStyleChanged(d,p)),w&&(this._renderChar(r,n,l,T,v,a,u,s),v="",d=p,a+=C,C=0);n.restore()},_renderChar:function(r,n,o,a,u,l,s){var h=this._getStyleDeclaration(o,a),d=this.getCompleteStyleDeclaration(o,a),p=r==="fillText"&&d.fill,v=r==="strokeText"&&d.stroke&&d.strokeWidth;!v&&!p||(h&&n.save(),this._applyCharStyles(r,n,o,a,d),h&&h.textBackgroundColor&&this._removeShadow(n),h&&h.deltaY&&(s+=h.deltaY),p&&n.fillText(u,l,s),v&&n.strokeText(u,l,s),h&&n.restore())},setSuperscript:function(r,n){return this._setScript(r,n,this.superscript)},setSubscript:function(r,n){return this._setScript(r,n,this.subscript)},_setScript:function(r,n,o){var a=this.get2DCursorLocation(r,!0),u=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"fontSize"),l=this.getValueOfPropertyAt(a.lineIndex,a.charIndex,"deltaY"),s={fontSize:u*o.size,deltaY:l+u*o.baseline};return this.setSelectionStyles(s,r,n),this},_hasStyleChanged:function(r,n){return r.fill!==n.fill||r.stroke!==n.stroke||r.strokeWidth!==n.strokeWidth||r.fontSize!==n.fontSize||r.fontFamily!==n.fontFamily||r.fontWeight!==n.fontWeight||r.fontStyle!==n.fontStyle||r.deltaY!==n.deltaY},_hasStyleChangedForSvg:function(r,n){return this._hasStyleChanged(r,n)||r.overline!==n.overline||r.underline!==n.underline||r.linethrough!==n.linethrough},_getLineLeftOffset:function(r){var n=this.getLineWidth(r);return this.textAlign==="center"?(this.width-n)/2:this.textAlign==="right"?this.width-n:this.textAlign==="justify-center"&&this.isEndOfWrapping(r)?(this.width-n)/2:this.textAlign==="justify-right"&&this.isEndOfWrapping(r)?this.width-n:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var r=this._forceClearCache;return r||(r=this.hasStateChanged("_dimensionAffectingProps")),r&&(this.dirty=!0,this._forceClearCache=!1),r},getLineWidth:function(r){if(this.__lineWidths[r])return this.__lineWidths[r];var n,o=this._textLines[r],a;return o===""?n=0:(a=this.measureLine(r),n=a.width),this.__lineWidths[r]=n,n},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(r,n,o){var a=this._getStyleDeclaration(r,n);return a&&typeof a[o]!="undefined"?a[o]:this[o]},_renderTextDecoration:function(r,n){if(!(!this[n]&&!this.styleHas(n))){for(var o,a,u,l,s,h,d,p,v=this._getLeftOffset(),b=this._getTopOffset(),C,w,S,T,A,M,E,D,N=this._getWidthOfCharSpacing(),K=0,U=this._textLines.length;K<U;K++){if(o=this.getHeightOfLine(K),!this[n]&&!this.styleHas(n,K)){b+=o;continue}d=this._textLines[K],M=o/this.lineHeight,l=this._getLineLeftOffset(K),w=0,S=0,p=this.getValueOfPropertyAt(K,0,n),D=this.getValueOfPropertyAt(K,0,"fill"),C=b+M*(1-this._fontSizeFraction),a=this.getHeightOfChar(K,0),s=this.getValueOfPropertyAt(K,0,"deltaY");for(var Q=0,re=d.length;Q<re;Q++)T=this.__charBounds[K][Q],A=this.getValueOfPropertyAt(K,Q,n),E=this.getValueOfPropertyAt(K,Q,"fill"),u=this.getHeightOfChar(K,Q),h=this.getValueOfPropertyAt(K,Q,"deltaY"),(A!==p||E!==D||u!==a||h!==s)&&S>0?(r.fillStyle=D,p&&D&&r.fillRect(v+l+w,C+this.offsets[n]*a+s,S,this.fontSize/15),w=T.left,S=T.width,p=A,D=E,a=u,s=h):S+=T.kernedWidth;r.fillStyle=E,A&&E&&r.fillRect(v+l+w,C+this.offsets[n]*a+s,S-N,this.fontSize/15),b+=o}this._removeShadow(r)}},_getFontDeclaration:function(r,n){var o=r||this,a=this.fontFamily,u=i.Text.genericFonts.indexOf(a.toLowerCase())>-1,l=a===void 0||a.indexOf("'")>-1||a.indexOf(",")>-1||a.indexOf('"')>-1||u?o.fontFamily:'"'+o.fontFamily+'"';return[i.isLikelyNode?o.fontWeight:o.fontStyle,i.isLikelyNode?o.fontStyle:o.fontWeight,n?this.CACHE_FONT_SIZE+"px":o.fontSize+"px",l].join(" ")},render:function(r){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",r))},_splitTextIntoLines:function(r){for(var n=r.split(this._reNewline),o=new Array(n.length),a=[`
`],u=[],l=0;l<n.length;l++)o[l]=i.util.string.graphemeSplit(n[l]),u=u.concat(o[l],a);return u.pop(),{_unwrappedLines:o,lines:n,graphemeText:u,graphemeLines:o}},toObject:function(r){var n=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing"].concat(r),o=this.callSuper("toObject",n);return o.styles=c(this.styles,!0),o},set:function(r,n){this.callSuper("set",r,n);var o=!1;if(typeof r=="object")for(var a in r)o=o||this._dimensionAffectingProps.indexOf(a)!==-1;else o=this._dimensionAffectingProps.indexOf(r)!==-1;return o&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),i.Text.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),i.Text.DEFAULT_SVG_FONT_SIZE=16,i.Text.fromElement=function(r,n,o){if(!r)return n(null);var a=i.parseAttributes(r,i.Text.ATTRIBUTE_NAMES),u=a.textAnchor||"left";if(o=i.util.object.extend(o?c(o):{},a),o.top=o.top||0,o.left=o.left||0,a.textDecoration){var l=a.textDecoration;l.indexOf("underline")!==-1&&(o.underline=!0),l.indexOf("overline")!==-1&&(o.overline=!0),l.indexOf("line-through")!==-1&&(o.linethrough=!0),delete o.textDecoration}"dx"in a&&(o.left+=a.dx),"dy"in a&&(o.top+=a.dy),"fontSize"in o||(o.fontSize=i.Text.DEFAULT_SVG_FONT_SIZE);var s="";"textContent"in r?s=r.textContent:"firstChild"in r&&r.firstChild!==null&&"data"in r.firstChild&&r.firstChild.data!==null&&(s=r.firstChild.data),s=s.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var h=o.strokeWidth;o.strokeWidth=0;var d=new i.Text(s,o),p=d.getScaledHeight()/d.height,v=(d.height+d.strokeWidth)*d.lineHeight-d.height,b=v*p,C=d.getScaledHeight()+b,w=0;u==="center"&&(w=d.getScaledWidth()/2),u==="right"&&(w=d.getScaledWidth()),d.set({left:d.left-w,top:d.top-(C-d.fontSize*(.07+d._fontSizeFraction))/d.lineHeight,strokeWidth:typeof h!="undefined"?h:1}),n(d)},i.Text.fromObject=function(r,n){return i.Object._fromObject("Text",r,n,"text")},i.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],i.util.createAccessors&&i.util.createAccessors(i.Text)}(e),function(){t.util.object.extend(t.Text.prototype,{isEmptyStyles:function(f){if(!this.styles||typeof f!="undefined"&&!this.styles[f])return!0;var i=typeof f=="undefined"?this.styles:{line:this.styles[f]};for(var c in i)for(var r in i[c])for(var n in i[c][r])return!1;return!0},styleHas:function(f,i){if(!this.styles||!f||f===""||typeof i!="undefined"&&!this.styles[i])return!1;var c=typeof i=="undefined"?this.styles:{0:this.styles[i]};for(var r in c)for(var n in c[r])if(typeof c[r][n][f]!="undefined")return!0;return!1},cleanStyle:function(f){if(!this.styles||!f||f==="")return!1;var i=this.styles,c=0,r,n,o=!0,a=0,u;for(var l in i){r=0;for(var s in i[l]){var u=i[l][s],h=u.hasOwnProperty(f);c++,h?(n?u[f]!==n&&(o=!1):n=u[f],u[f]===this[f]&&delete u[f]):o=!1,Object.keys(u).length!==0?r++:delete i[l][s]}r===0&&delete i[l]}for(var d=0;d<this._textLines.length;d++)a+=this._textLines[d].length;o&&c===a&&(this[f]=n,this.removeStyle(f))},removeStyle:function(f){if(!(!this.styles||!f||f==="")){var i=this.styles,c,r,n;for(r in i){c=i[r];for(n in c)delete c[n][f],Object.keys(c[n]).length===0&&delete c[n];Object.keys(c).length===0&&delete i[r]}}},_extendStyles:function(f,i){var c=this.get2DCursorLocation(f);this._getLineStyle(c.lineIndex)||this._setLineStyle(c.lineIndex),this._getStyleDeclaration(c.lineIndex,c.charIndex)||this._setStyleDeclaration(c.lineIndex,c.charIndex,{}),t.util.object.extend(this._getStyleDeclaration(c.lineIndex,c.charIndex),i)},get2DCursorLocation:function(f,i){typeof f=="undefined"&&(f=this.selectionStart);for(var c=i?this._unwrappedTextLines:this._textLines,r=c.length,n=0;n<r;n++){if(f<=c[n].length)return{lineIndex:n,charIndex:f};f-=c[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:c[n-1].length<f?c[n-1].length:f}},getSelectionStyles:function(f,i,c){typeof f=="undefined"&&(f=this.selectionStart||0),typeof i=="undefined"&&(i=this.selectionEnd||f);for(var r=[],n=f;n<i;n++)r.push(this.getStyleAtPosition(n,c));return r},getStyleAtPosition:function(f,i){var c=this.get2DCursorLocation(f),r=i?this.getCompleteStyleDeclaration(c.lineIndex,c.charIndex):this._getStyleDeclaration(c.lineIndex,c.charIndex);return r||{}},setSelectionStyles:function(f,i,c){typeof i=="undefined"&&(i=this.selectionStart||0),typeof c=="undefined"&&(c=this.selectionEnd||i);for(var r=i;r<c;r++)this._extendStyles(r,f);return this._forceClearCache=!0,this},_getStyleDeclaration:function(f,i){var c=this.styles&&this.styles[f];return c?c[i]:null},getCompleteStyleDeclaration:function(f,i){for(var c=this._getStyleDeclaration(f,i)||{},r={},n,o=0;o<this._styleProperties.length;o++)n=this._styleProperties[o],r[n]=typeof c[n]=="undefined"?this[n]:c[n];return r},_setStyleDeclaration:function(f,i,c){this.styles[f][i]=c},_deleteStyleDeclaration:function(f,i){delete this.styles[f][i]},_getLineStyle:function(f){return!!this.styles[f]},_setLineStyle:function(f){this.styles[f]={}},_deleteLineStyle:function(f){delete this.styles[f]}})}(),function(){function f(i){i.textDecoration&&(i.textDecoration.indexOf("underline")>-1&&(i.underline=!0),i.textDecoration.indexOf("line-through")>-1&&(i.linethrough=!0),i.textDecoration.indexOf("overline")>-1&&(i.overline=!0),delete i.textDecoration)}t.IText=t.util.createClass(t.Text,t.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(i,c){this.callSuper("initialize",i,c),this.initBehavior()},setSelectionStart:function(i){i=Math.max(i,0),this._updateAndFire("selectionStart",i)},setSelectionEnd:function(i){i=Math.min(i,this.text.length),this._updateAndFire("selectionEnd",i)},_updateAndFire:function(i,c){this[i]!==c&&(this._fireSelectionChanged(),this[i]=c),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(i){this.clearContextTop(),this.callSuper("render",i),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(i){this.callSuper("_render",i)},clearContextTop:function(i){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var c=this.canvas.contextTop,r=this.canvas.viewportTransform;c.save(),c.transform(r[0],r[1],r[2],r[3],r[4],r[5]),this.transform(c),this.transformMatrix&&c.transform.apply(c,this.transformMatrix),this._clearTextArea(c),i||c.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var i=this._getCursorBoundaries(),c=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(i,c):this.renderSelection(i,c),c.restore()}},_clearTextArea:function(i){var c=this.width+4,r=this.height+4;i.clearRect(-c/2,-r/2,c,r)},_getCursorBoundaries:function(i){typeof i=="undefined"&&(i=this.selectionStart);var c=this._getLeftOffset(),r=this._getTopOffset(),n=this._getCursorBoundariesOffsets(i);return{left:c,top:r,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(i){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var c,r,n,o=0,a=0,u,l=this.get2DCursorLocation(i);n=l.charIndex,r=l.lineIndex;for(var s=0;s<r;s++)o+=this.getHeightOfLine(s);c=this._getLineLeftOffset(r);var h=this.__charBounds[r][n];return h&&(a=h.left),this.charSpacing!==0&&n===this._textLines[r].length&&(a-=this._getWidthOfCharSpacing()),u={top:o,left:c+(a>0?a:0)},this.cursorOffsetCache=u,this.cursorOffsetCache},renderCursor:function(i,c){var r=this.get2DCursorLocation(),n=r.lineIndex,o=r.charIndex>0?r.charIndex-1:0,a=this.getValueOfPropertyAt(n,o,"fontSize"),u=this.scaleX*this.canvas.getZoom(),l=this.cursorWidth/u,s=i.topOffset,h=this.getValueOfPropertyAt(n,o,"deltaY");s+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(i,c),c.fillStyle=this.getValueOfPropertyAt(n,o,"fill"),c.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,c.fillRect(i.left+i.leftOffset-l/2,s+i.top+h,l,a)},renderSelection:function(i,c){for(var r=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,o=this.textAlign.indexOf("justify")!==-1,a=this.get2DCursorLocation(r),u=this.get2DCursorLocation(n),l=a.lineIndex,s=u.lineIndex,h=a.charIndex<0?0:a.charIndex,d=u.charIndex<0?0:u.charIndex,p=l;p<=s;p++){var v=this._getLineLeftOffset(p)||0,b=this.getHeightOfLine(p),C=0,w=0,S=0;if(p===l&&(w=this.__charBounds[l][h].left),p>=l&&p<s)S=o&&!this.isEndOfWrapping(p)?this.width:this.getLineWidth(p)||5;else if(p===s)if(d===0)S=this.__charBounds[s][d].left;else{var T=this._getWidthOfCharSpacing();S=this.__charBounds[s][d-1].left+this.__charBounds[s][d-1].width-T}C=b,(this.lineHeight<1||p===s&&this.lineHeight>1)&&(b/=this.lineHeight),this.inCompositionMode?(c.fillStyle=this.compositionColor||"black",c.fillRect(i.left+v+w,i.top+i.topOffset+b,S-w,1)):(c.fillStyle=this.selectionColor,c.fillRect(i.left+v+w,i.top+i.topOffset,S-w,b)),i.topOffset+=C}},getCurrentCharFontSize:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fontSize")},getCurrentCharColor:function(){var i=this._getCurrentCharIndex();return this.getValueOfPropertyAt(i.l,i.c,"fill")},_getCurrentCharIndex:function(){var i=this.get2DCursorLocation(this.selectionStart,!0),c=i.charIndex>0?i.charIndex-1:0;return{l:i.lineIndex,c}}}),t.IText.fromObject=function(i,c){if(f(i),i.styles)for(var r in i.styles)for(var n in i.styles[r])f(i.styles[r][n]);t.Object._fromObject("IText",i,c,"text")}}(),function(){var f=t.util.object.clone;t.util.object.extend(t.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var i=this;this.on("added",function(){var c=i.canvas;c&&(c._hasITextHandlers||(c._hasITextHandlers=!0,i._initCanvasHandlers(c)),c._iTextInstances=c._iTextInstances||[],c._iTextInstances.push(i))})},initRemovedHandler:function(){var i=this;this.on("removed",function(){var c=i.canvas;c&&(c._iTextInstances=c._iTextInstances||[],t.util.removeFromArray(c._iTextInstances,i),c._iTextInstances.length===0&&(c._hasITextHandlers=!1,i._removeCanvasHandlers(c)))})},_initCanvasHandlers:function(i){i._mouseUpITextHandler=function(){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.__isMousedown=!1})},i.on("mouse:up",i._mouseUpITextHandler)},_removeCanvasHandlers:function(i){i.off("mouse:up",i._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(i,c,r,n){var o;return o={isAborted:!1,abort:function(){this.isAborted=!0}},i.animate("_currentCursorOpacity",c,{duration:r,onComplete:function(){o.isAborted||i[n]()},onChange:function(){i.canvas&&i.selectionStart===i.selectionEnd&&i.renderCursorOrSelection()},abort:function(){return o.isAborted}}),o},_onTickComplete:function(){var i=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){i._currentTickCompleteState=i._animateCursor(i,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(i){var c=this,r=i?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){c._tick()},r)},abortCursorAnimation:function(){var i=this._currentTickState||this._currentTickCompleteState,c=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,i&&c&&c.clearContext(c.contextTop||c.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(i){var c=0,r=i-1;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)c++,r--;for(;/\S/.test(this._text[r])&&r>-1;)c++,r--;return i-c},findWordBoundaryRight:function(i){var c=0,r=i;if(this._reSpace.test(this._text[r]))for(;this._reSpace.test(this._text[r]);)c++,r++;for(;/\S/.test(this._text[r])&&r<this._text.length;)c++,r++;return i+c},findLineBoundaryLeft:function(i){for(var c=0,r=i-1;!/\n/.test(this._text[r])&&r>-1;)c++,r--;return i-c},findLineBoundaryRight:function(i){for(var c=0,r=i;!/\n/.test(this._text[r])&&r<this._text.length;)c++,r++;return i+c},searchWordBoundary:function(i,c){for(var r=this._text,n=this._reSpace.test(r[i])?i-1:i,o=r[n],a=t.reNonWord;!a.test(o)&&n>0&&n<r.length;)n+=c,o=r[n];return a.test(o)&&(n+=c===1?0:1),n},selectWord:function(i){i=i||this.selectionStart;var c=this.searchWordBoundary(i,-1),r=this.searchWordBoundary(i,1);this.selectionStart=c,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(i){i=i||this.selectionStart;var c=this.findLineBoundaryLeft(i),r=this.findLineBoundaryRight(i);return this.selectionStart=c,this.selectionEnd=r,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(i){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(i),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(i){i._iTextInstances&&i._iTextInstances.forEach(function(c){c.selected=!1,c.isEditing&&c.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(i){if(!(!this.__isMousedown||!this.isEditing)){var c=this.getSelectionStartFromPointer(i.e),r=this.selectionStart,n=this.selectionEnd;(c!==this.__selectionStartOnMouseDown||r===n)&&(r===c||n===c)||(c>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=c):(this.selectionStart=c,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==r||this.selectionEnd!==n)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(i,c,r){var n=r.slice(0,i),o=t.util.string.graphemeSplit(n).length;if(i===c)return{selectionStart:o,selectionEnd:o};var a=r.slice(i,c),u=t.util.string.graphemeSplit(a).length;return{selectionStart:o,selectionEnd:o+u}},fromGraphemeToStringSelection:function(i,c,r){var n=r.slice(0,i),o=n.join("").length;if(i===c)return{selectionStart:o,selectionEnd:o};var a=r.slice(i,c),u=a.join("").length;return{selectionStart:o,selectionEnd:o+u}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var i=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=i.selectionStart,this.hiddenTextarea.selectionEnd=i.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(!!this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var i=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=i.selectionEnd,this.inCompositionMode||(this.selectionStart=i.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var i=this._calcTextareaPosition();this.hiddenTextarea.style.left=i.left,this.hiddenTextarea.style.top=i.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var i=this.inCompositionMode?this.compositionStart:this.selectionStart,c=this._getCursorBoundaries(i),r=this.get2DCursorLocation(i),n=r.lineIndex,o=r.charIndex,a=this.getValueOfPropertyAt(n,o,"fontSize")*this.lineHeight,u=c.leftOffset,l=this.calcTransformMatrix(),s={x:c.left+u,y:c.top+c.topOffset+a},h=this.canvas.getRetinaScaling(),d=this.canvas.upperCanvasEl,p=d.width/h,v=d.height/h,b=p-a,C=v-a,w=d.clientWidth/p,S=d.clientHeight/v;return s=t.util.transformPoint(s,l),s=t.util.transformPoint(s,this.canvas.viewportTransform),s.x*=w,s.y*=S,s.x<0&&(s.x=0),s.x>b&&(s.x=b),s.y<0&&(s.y=0),s.y>C&&(s.y=C),s.x+=this.canvas._offset.left,s.y+=this.canvas._offset.top,{left:s.x+"px",top:s.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var i=this._textBeforeEdit!==this.text,c=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,c&&(c.blur&&c.blur(),c.parentNode&&c.parentNode.removeChild(c)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),i&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),i&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var i in this.styles)this._textLines[i]||delete this.styles[i]},removeStyleFromTo:function(i,c){var r=this.get2DCursorLocation(i,!0),n=this.get2DCursorLocation(c,!0),o=r.lineIndex,a=r.charIndex,u=n.lineIndex,l=n.charIndex,s,h;if(o!==u){if(this.styles[o])for(s=a;s<this._unwrappedTextLines[o].length;s++)delete this.styles[o][s];if(this.styles[u])for(s=l;s<this._unwrappedTextLines[u].length;s++)h=this.styles[u][s],h&&(this.styles[o]||(this.styles[o]={}),this.styles[o][a+s-l]=h);for(s=o+1;s<=u;s++)delete this.styles[s];this.shiftLineStyles(u,o-u)}else if(this.styles[o]){h=this.styles[o];var d=l-a,p,v;for(s=a;s<l;s++)delete h[s];for(v in this.styles[o])p=parseInt(v,10),p>=l&&(h[p-d]=h[v],delete h[v])}},shiftLineStyles:function(i,c){var r=f(this.styles);for(var n in this.styles){var o=parseInt(n,10);o>i&&(this.styles[o+c]=r[o],r[o-c]||delete this.styles[o])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(i,c,r,n){var o,a={},u=!1;r||(r=1),this.shiftLineStyles(i,r),this.styles[i]&&(o=this.styles[i][c===0?c:c-1]);for(var l in this.styles[i]){var s=parseInt(l,10);s>=c&&(u=!0,a[s-c]=this.styles[i][l],delete this.styles[i][l])}for(u?this.styles[i+r]=a:delete this.styles[i+r];r>1;)r--,n&&n[r]?this.styles[i+r]={0:f(n[r])}:o?this.styles[i+r]={0:f(o)}:delete this.styles[i+r];this._forceClearCache=!0},insertCharStyleObject:function(i,c,r,n){this.styles||(this.styles={});var o=this.styles[i],a=o?f(o):{};r||(r=1);for(var u in a){var l=parseInt(u,10);l>=c&&(o[l+r]=a[l],a[l-r]||delete o[l])}if(this._forceClearCache=!0,n){for(;r--;)!Object.keys(n[r]).length||(this.styles[i]||(this.styles[i]={}),this.styles[i][c+r]=f(n[r]));return}if(!!o)for(var s=o[c?c-1:1];s&&r--;)this.styles[i][c+r]=f(s)},insertNewStyleBlock:function(i,c,r){for(var n=this.get2DCursorLocation(c,!0),o=[0],a=0,u=0;u<i.length;u++)i[u]===`
`?(a++,o[a]=0):o[a]++;o[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,o[0],r),r=r&&r.slice(o[0]+1)),a&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+o[0],a);for(var u=1;u<a;u++)o[u]>0?this.insertCharStyleObject(n.lineIndex+u,0,o[u],r):r&&(this.styles[n.lineIndex+u][0]=r[0]),r=r&&r.slice(o[u]+1);o[u]>0&&this.insertCharStyleObject(n.lineIndex+u,0,o[u],r)},setSelectionStartEndWithShift:function(i,c,r){r<=i?(c===i?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=i),this.selectionStart=r):r>i&&r<c?this._selectionDirection==="right"?this.selectionEnd=r:this.selectionStart=r:(c===i?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=c),this.selectionEnd=r)},setSelectionInBoundaries:function(){var i=this.text.length;this.selectionStart>i?this.selectionStart=i:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>i?this.selectionEnd=i:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),t.util.object.extend(t.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(f){if(!!this.canvas){this.__newClickTime=+new Date;var i=f.pointer;this.isTripleClick(i)&&(this.fire("tripleclick",f),this._stopEvent(f.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=i,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(f){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===f.x&&this.__lastPointer.y===f.y},_stopEvent:function(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(f){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(f.e))},tripleClickHandler:function(f){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(f.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.__isMousedown=!0,this.selected&&this.setCursorByClick(f.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(f){!this.canvas||!this.editable||f.e.button&&f.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(f){if(this.__isMousedown=!1,!(!this.editable||this.group||f.transform&&f.transform.actionPerformed||f.e.button&&f.e.button!==1)){if(this.canvas){var i=this.canvas._activeObject;if(i&&i!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(f.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(f){var i=this.getSelectionStartFromPointer(f),c=this.selectionStart,r=this.selectionEnd;f.shiftKey?this.setSelectionStartEndWithShift(c,r,i):(this.selectionStart=i,this.selectionEnd=i),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(f){for(var i=this.getLocalPointer(f),c=0,r=0,n=0,o=0,a=0,u,l,s=0,h=this._textLines.length;s<h&&n<=i.y;s++)n+=this.getHeightOfLine(s)*this.scaleY,a=s,s>0&&(o+=this._textLines[s-1].length+this.missingNewlineOffset(s-1));u=this._getLineLeftOffset(a),r=u*this.scaleX,l=this._textLines[a];for(var d=0,p=l.length;d<p&&(c=r,r+=this.__charBounds[a][d].kernedWidth*this.scaleX,r<=i.x);d++)o++;return this._getNewSelectionStartFromOffset(i,c,r,o,p)},_getNewSelectionStartFromOffset:function(f,i,c,r,n){var o=f.x-i,a=c-f.x,u=a>o||a<0?0:1,l=r+u;return this.flipX&&(l=n-l),l>this._text.length&&(l=this._text.length),l}}),t.util.object.extend(t.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=t.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var f=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+f.top+"; left: "+f.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uFF70top: "+f.fontSize+";",t.document.body.appendChild(this.hiddenTextarea),t.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),t.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),t.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),t.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),t.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),t.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(t.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(f){if(!(!this.isEditing||this.inCompositionMode)){if(f.keyCode in this.keysMap)this[this.keysMap[f.keyCode]](f);else if(f.keyCode in this.ctrlKeysMapDown&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapDown[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),f.keyCode>=33&&f.keyCode<=40?(this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(f){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(f.keyCode in this.ctrlKeysMapUp&&(f.ctrlKey||f.metaKey))this[this.ctrlKeysMapUp[f.keyCode]](f);else return;f.stopImmediatePropagation(),f.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(f){var i=this.fromPaste;if(this.fromPaste=!1,f&&f.stopPropagation(),!!this.isEditing){var c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,r=this._text.length,n=c.length,o,a,u=n-r;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var l=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),s=this.selectionStart>l.selectionStart;this.selectionStart!==this.selectionEnd?(o=this._text.slice(this.selectionStart,this.selectionEnd),u+=this.selectionEnd-this.selectionStart):n<r&&(s?o=this._text.slice(this.selectionEnd+u,this.selectionEnd):o=this._text.slice(this.selectionStart,this.selectionStart-u)),a=c.slice(l.selectionEnd-u,l.selectionEnd),o&&o.length&&(this.selectionStart!==this.selectionEnd?this.removeStyleFromTo(this.selectionStart,this.selectionEnd):s?this.removeStyleFromTo(this.selectionEnd-o.length,this.selectionEnd):this.removeStyleFromTo(this.selectionEnd,this.selectionEnd+o.length)),a.length&&(i&&a.join("")===t.copiedText&&!t.disableStyleCopyPaste?this.insertNewStyleBlock(a,this.selectionStart,t.copiedTextStyle):this.insertNewStyleBlock(a,this.selectionStart)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(f){this.compositionStart=f.target.selectionStart,this.compositionEnd=f.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(t.copiedText=this.getSelectedText(),t.disableStyleCopyPaste?t.copiedTextStyle=null:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(f){return f&&f.clipboardData||t.window.clipboardData},_getWidthBeforeCursor:function(f,i){var c=this._getLineLeftOffset(f),r;return i>0&&(r=this.__charBounds[f][i-1],c+=r.left+r.width),c},getDownCursorOffset:function(f,i){var c=this._getSelectionForOffset(f,i),r=this.get2DCursorLocation(c),n=r.lineIndex;if(n===this._textLines.length-1||f.metaKey||f.keyCode===34)return this._text.length-c;var o=r.charIndex,a=this._getWidthBeforeCursor(n,o),u=this._getIndexOnLine(n+1,a),l=this._textLines[n].slice(o);return l.length+u+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(f,i){return f.shiftKey&&this.selectionStart!==this.selectionEnd&&i?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(f,i){var c=this._getSelectionForOffset(f,i),r=this.get2DCursorLocation(c),n=r.lineIndex;if(n===0||f.metaKey||f.keyCode===33)return-c;var o=r.charIndex,a=this._getWidthBeforeCursor(n,o),u=this._getIndexOnLine(n-1,a),l=this._textLines[n].slice(0,o),s=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+u-l.length+(1-s)},_getIndexOnLine:function(f,i){for(var c=this._textLines[f],r=this._getLineLeftOffset(f),n=r,o=0,a,u,l=0,s=c.length;l<s;l++)if(a=this.__charBounds[f][l].width,n+=a,n>i){u=!0;var h=n-a,d=n,p=Math.abs(h-i),v=Math.abs(d-i);o=v<p?l:l-1;break}return u||(o=c.length-1),o},moveCursorDown:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",f)},moveCursorUp:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",f)},_moveCursorUpOrDown:function(f,i){var c="get"+f+"CursorOffset",r=this[c](i,this._selectionDirection==="right");i.shiftKey?this.moveCursorWithShift(r):this.moveCursorWithoutShift(r),r!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(f){var i=this._selectionDirection==="left"?this.selectionStart+f:this.selectionEnd+f;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,i),f!==0},moveCursorWithoutShift:function(f){return f<0?(this.selectionStart+=f,this.selectionEnd=this.selectionStart):(this.selectionEnd+=f,this.selectionStart=this.selectionEnd),f!==0},moveCursorLeft:function(f){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",f)},_move:function(f,i,c){var r;if(f.altKey)r=this["findWordBoundary"+c](this[i]);else if(f.metaKey||f.keyCode===35||f.keyCode===36)r=this["findLineBoundary"+c](this[i]);else return this[i]+=c==="Left"?-1:1,!0;if(typeof r!==void 0&&this[i]!==r)return this[i]=r,!0},_moveLeft:function(f,i){return this._move(f,i,"Left")},_moveRight:function(f,i){return this._move(f,i,"Right")},moveCursorLeftWithoutShift:function(f){var i=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(i=this._moveLeft(f,"selectionStart")),this.selectionEnd=this.selectionStart,i},moveCursorLeftWithShift:function(f){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(f,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(f,"selectionStart")},moveCursorRight:function(f){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",f)},_moveCursorLeftOrRight:function(f,i){var c="moveCursor"+f+"With";this._currentCursorOpacity=1,i.shiftKey?c+="Shift":c+="outShift",this[c](i)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(f){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(f,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(f,"selectionEnd")},moveCursorRightWithoutShift:function(f){var i=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(i=this._moveRight(f,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,i},removeChars:function(f,i){typeof i=="undefined"&&(i=f+1),this.removeStyleFromTo(f,i),this._text.splice(f,i-f),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(f,i,c,r){typeof r=="undefined"&&(r=c),r>c&&this.removeStyleFromTo(c,r);var n=t.util.string.graphemeSplit(f);this.insertNewStyleBlock(n,c,i),this._text=[].concat(this._text.slice(0,c),n,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var f=t.util.toFixed,i=/  +/g;t.util.object.extend(t.Text.prototype,{_toSVG:function(){var c=this._getSVGLeftTopOffsets(),r=this._getSVGTextAndBg(c.textTop,c.textLeft);return this._wrapSVGTextAndBg(r)},toSVG:function(c){return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(c){var r=!0,n=this.getSvgTextDecoration(this);return[c.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(r),'"',this.addPaintOrder()," >",c.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(c,r){var n=[],o=[],a=c,u;this._setSVGBg(o);for(var l=0,s=this._textLines.length;l<s;l++)u=this._getLineLeftOffset(l),(this.textBackgroundColor||this.styleHas("textBackgroundColor",l))&&this._setSVGTextLineBg(o,l,r+u,a),this._setSVGTextLineText(n,l,r+u,a),a+=this.getHeightOfLine(l);return{textSpans:n,textBgRects:o}},_createTextCharSpan:function(c,r,n,o){var a=c!==c.trim()||c.match(i),u=this.getSvgSpanStyles(r,a),l=u?'style="'+u+'"':"",s=r.deltaY,h="",d=t.Object.NUM_FRACTION_DIGITS;return s&&(h=' dy="'+f(s,d)+'" '),['<tspan x="',f(n,d),'" y="',f(o,d),'" ',h,l,">",t.util.string.escapeXml(c),"</tspan>"].join("")},_setSVGTextLineText:function(c,r,n,o){var a=this.getHeightOfLine(r),u=this.textAlign.indexOf("justify")!==-1,l,s,h="",d,p,v=0,b=this._textLines[r],C;o+=a*(1-this._fontSizeFraction)/this.lineHeight;for(var w=0,S=b.length-1;w<=S;w++)C=w===S||this.charSpacing,h+=b[w],d=this.__charBounds[r][w],v===0?(n+=d.kernedWidth-d.width,v+=d.width):v+=d.kernedWidth,u&&!C&&this._reSpaceAndTab.test(b[w])&&(C=!0),C||(l=l||this.getCompleteStyleDeclaration(r,w),s=this.getCompleteStyleDeclaration(r,w+1),C=this._hasStyleChangedForSvg(l,s)),C&&(p=this._getStyleDeclaration(r,w)||{},c.push(this._createTextCharSpan(h,p,n,o)),h="",l=s,n+=v,v=0)},_pushTextBgRect:function(c,r,n,o,a,u){var l=t.Object.NUM_FRACTION_DIGITS;c.push("		<rect ",this._getFillAttributes(r),' x="',f(n,l),'" y="',f(o,l),'" width="',f(a,l),'" height="',f(u,l),`"></rect>
`)},_setSVGTextLineBg:function(c,r,n,o){for(var a=this._textLines[r],u=this.getHeightOfLine(r)/this.lineHeight,l=0,s=0,h,d,p=this.getValueOfPropertyAt(r,0,"textBackgroundColor"),v=0,b=a.length;v<b;v++)h=this.__charBounds[r][v],d=this.getValueOfPropertyAt(r,v,"textBackgroundColor"),d!==p?(p&&this._pushTextBgRect(c,p,n+s,o,l,u),s=h.left,l=h.width,p=d):l+=h.kernedWidth;d&&this._pushTextBgRect(c,d,n+s,o,l,u)},_getFillAttributes:function(c){var r=c&&typeof c=="string"?new t.Color(c):"";return!r||!r.getSource()||r.getAlpha()===1?'fill="'+c+'"':'opacity="'+r.getAlpha()+'" fill="'+r.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(c){for(var r=0,n=0,o=0;o<c;o++)r+=this.getHeightOfLine(o);return n=this.getHeightOfLine(o),{lineTop:r,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(c){var r=t.Object.prototype.getSvgStyles.call(this,c);return r+" white-space: pre;"}})}(),function(f){var i=f.fabric||(f.fabric={});i.Textbox=i.util.createClass(i.IText,i.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:i.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(c){for(var r=0,n=0,o=0,a={},u=0;u<c.graphemeLines.length;u++)c.graphemeText[o]===`
`&&u>0?(n=0,o++,r++):!this.splitByGrapheme&&this._reSpaceAndTab.test(c.graphemeText[o])&&u>0&&(n++,o++),a[u]={line:r,offset:n},o+=c.graphemeLines[u].length,n+=c.graphemeLines[u].length;return a},styleHas:function(c,r){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[r];n&&(r=n.line)}return i.Text.prototype.styleHas.call(this,c,r)},isEmptyStyles:function(c){if(!this.styles)return!0;var r=0,n=c+1,o,a,u=!1,l=this._styleMap[c],s=this._styleMap[c+1];l&&(c=l.line,r=l.offset),s&&(n=s.line,u=n===c,o=s.offset),a=typeof c=="undefined"?this.styles:{line:this.styles[c]};for(var h in a)for(var d in a[h])if(d>=r&&(!u||d<o))for(var p in a[h][d])return!1;return!0},_getStyleDeclaration:function(c,r){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[c];if(!n)return null;c=n.line,r=n.offset+r}return this.callSuper("_getStyleDeclaration",c,r)},_setStyleDeclaration:function(c,r,n){var o=this._styleMap[c];c=o.line,r=o.offset+r,this.styles[c][r]=n},_deleteStyleDeclaration:function(c,r){var n=this._styleMap[c];c=n.line,r=n.offset+r,delete this.styles[c][r]},_getLineStyle:function(c){var r=this._styleMap[c];return!!this.styles[r.line]},_setLineStyle:function(c){var r=this._styleMap[c];this.styles[r.line]={}},_wrapText:function(c,r){var n=[],o;for(this.isWrapping=!0,o=0;o<c.length;o++)n=n.concat(this._wrapLine(c[o],o,r));return this.isWrapping=!1,n},_measureWord:function(c,r,n){var o=0,a,u=!0;n=n||0;for(var l=0,s=c.length;l<s;l++){var h=this._getGraphemeBox(c[l],r,l+n,a,u);o+=h.kernedWidth,a=c[l]}return o},_wrapLine:function(c,r,n,A){var a=0,u=this.splitByGrapheme,l=[],s=[],h=u?i.util.string.graphemeSplit(c):c.split(this._wordJoiners),d="",p=0,v=u?"":" ",b=0,C=0,w=0,S=!0,T=u?0:this._getWidthOfCharSpacing(),A=A||0;h.length===0&&h.push([]),n-=A;for(var M=0;M<h.length;M++)d=u?h[M]:i.util.string.graphemeSplit(h[M]),b=this._measureWord(d,r,p),p+=d.length,a+=C+b-T,a>=n&&!S?(l.push(s),s=[],a=b,S=!0):a+=T,!S&&!u&&s.push(v),s=s.concat(d),C=this._measureWord([v],r,p),p++,S=!1,b>w&&(w=b);return M&&l.push(s),w+A>this.dynamicMinWidth&&(this.dynamicMinWidth=w-T+A),l},isEndOfWrapping:function(c){return!this._styleMap[c+1]||this._styleMap[c+1].line!==this._styleMap[c].line},missingNewlineOffset:function(c){return this.splitByGrapheme?this.isEndOfWrapping(c)?1:0:1},_splitTextIntoLines:function(c){for(var r=i.Text.prototype._splitTextIntoLines.call(this,c),n=this._wrapText(r.lines,this.width),o=new Array(n.length),a=0;a<n.length;a++)o[a]=n[a].join("");return r.lines=o,r.graphemeLines=n,r},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var c={};for(var r in this._styleMap)this._textLines[r]&&(c[this._styleMap[r].line]=1);for(var r in this.styles)c[r]||delete this.styles[r]},toObject:function(c){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(c))}}),i.Textbox.fromObject=function(c,r){return i.Object._fromObject("Textbox",c,r,"text")}}(e)})(Le);const Oe={w:140,h:40,bgColor:["#78c386","#e48484","#c28976"],lineColor:"#69b1e4",textColor:"white",fontSize:16,origin:"center",infoBg:"#595959",fontFamily:" Helvetica, 'Hiragino Sans GB', 'Microsoft Yahei', '\u5FAE\u8F6F\u96C5\u9ED1', Arial, sans-serif"};function rd(){const e=`\u2705 \u524D\u7AEF\u5FC5\u987B\u8981\u5B66\u7684\u77E5\u8BC6 \u9700\u8981\u7EC3\u4E60
\u2B50 \u53EF\u4EE5\u5148\u6536\u85CF\u8D77\u6765\uFF0C\u7528\u5230\u7684\u65F6\u5019\u518D\u5B66\u7684\u6280\u672F
\u274C \u4E2A\u4EBA\u4E0D\u63A8\u8350\u6216\u8005\u8FC7\u65F6\u7684\u6280\u672F`,{textColor:y,fontSize:x,origin:f,infoBg:i}=Oe,c=new Le.fabric.Rect({fill:i,originX:f,originY:f,rx:"5",shadow:"rgba(0,0,0,.2) 2px 2px 2px",width:280,height:100}),r=new Le.fabric.Text(e,{fill:y,originY:f,originX:f,fontWeight:"500",lineHeight:1.5,fontSize:12,fontFamily:Oe.fontFamily});return new Le.fabric.Group([c,r],{left:35,top:20,lockMovementX:!0,lockMovementY:!0})}function sd(e){const{textColor:_,fontSize:y,origin:x}=Oe;Le.fabric.Image.fromURL("/qrcode.jpeg",f=>{f.set({left:810,top:30,opacity:.8,scaleX:.32,scaleY:.32});const i=new Le.fabric.Rect({fill:Oe.infoBg,originX:x,originY:x,rx:"5",shadow:"rgba(0,0,0,.2) 2px 2px 2px",width:300,height:100}),c=new Le.fabric.Text(title,{fill:_,left:15,originY:x,originX:"right",fontWeight:"500",lineHeight:1.5,fontSize:12,fontFamily:Oe.fontFamily}),r=new Le.fabric.Group([i,c],{left:600,top:20,lockMovementX:!0,lockMovementY:!0});e.add(r),e.add(f)})}function od(e,t){const g=[];let m;t=t.filter(y=>y.show!==!1),e.title=t[0].title;for(let y=1;y<t.length;y++)t[y].x=t[y-1].x+(t[y].x||0),t[y].y=t[y-1].y+(t[y].y||150);e.height=t[t.length-1].y+40+20;let _=new Le.fabric.Canvas(e,{containerClass:"roadmap-container",hoverCursor:"pointer",interactive:!1,selection:!1});return _.add(rd()),sd(_),t.forEach(y=>{const x=zs(y,_);x.link=y.link,m&&g.push(ad(m,x)),m=x;const{left:f,right:i}=y;c(x,f,"left",1),c(x,i,"right",1);function c(r,n,o,a){if(!n||!n.length)return;typeof n=="string"&&(n=[n]),n=n.map(s=>ld(...s));const u=n.length,l=!(u&1);n.filter(s=>s).forEach((s,h)=>{o=="left"?s.x=r.left+s.x-250+a*45:s.x=r.left+s.x+272-a*45;let d=r.top-(Math.floor(u/2)-h)*(Oe.h+9-a*10)+(s.y||0);d+=l?Oe.h/2:0;const p=zs({...s,y:d,depth:a},_);p.link=s.link||r.link;const v=o=="left"?Ns(p,r):Ns(r,p);g.push(v),s.children&&c(p,s.children,o,a+1)})}}),g.forEach(y=>_.add(y)),_}function Ns(e,t){const g=e.left+e.width,m=e.top+e.height/2;let _,y;e.left>t.left?(_=t.left-(e.left-t.left)/2,y=e.top+(t.top-e.top)/2):(_=e.left+(t.left+e.width-e.left)/2,y=e.top+(t.top-e.top)/2);const x=t.left,f=t.top+Oe.h/2;return new Le.fabric.Path(`M ${g} ${m} S${_},${y},${x},${f}`,{fill:"",stroke:Oe.lineColor,strokeWidth:2,strokeDashArray:[5,5]})}function zs(e,t){const g=["\u274C","\u2705","\u{1F525}","\u2B50"];let m;g.forEach(d=>{e.title.startsWith(d)&&(e.title=e.title.replace(d,""),m=d)});const{title:_,x:y,y:x,depth:f=0}=e,i=(e.w?e.w:Oe.w)-f*15,c=e.h?e.h:Oe.h,{textColor:r,bgColor:n,fontSize:o,origin:a}=Oe;let u=m=="\u274C"?Oe.infoBg:n[f];!e.link&&f==0&&(u="#78b0df");const l=new Le.fabric.Rect({fill:u,originX:"origin",originY:a,rx:"5",shadow:"rgba(0,0,0,.2) 2px 2px 2px",width:i,height:c-f*7}),s=new Le.fabric.Text(_,{fill:r,originY:a,originX:a,fontWeight:"500",fontSize:o-f*2,fontFamily:Oe.fontFamily}),h=new Le.fabric.Group([l,s],{left:y,top:x,lockMovementX:!0,lockMovementY:!0});if(e.download&&(h.download=!0),t.add(h),m){const d=new Le.fabric.Text(m,{fill:r,originY:a,originX:a,fontWeight:"500",fontSize:m=="\u274C"?10:12,fontFamily:Oe.fontFamily}),p=new Le.fabric.Group([d],{left:y<=400?y+5:y+i-15,top:x+3,lockMovementX:!0,lockMovementY:!0});t.add(p),t.bringForward(p)}return h}let An="left";function ad(e,t){const g=e.left+Oe.w/2,m=e.top+Oe.h/2,_=An==="left"?e.left-Oe.w/3:e.left+Oe.w,y=e.top+(t.top-e.top)/2,x=t.left+Oe.w/2,f=t.top+Oe.h/2,i=new Le.fabric.Path(`M ${g} ${m} Q ${_},${y},${x},${f}`,{fill:"",stroke:Oe.lineColor,strokeWidth:3});return An=An==="left"?"right":"left",i.globalCompositeOperation="destination-over",i}function ld(e,t,g){t?g||(typeof t[0]=="number"?g=[]:(g=t,t=[])):(t=[],g=[]);const[m=0,_=0,y=120,x=40]=t,{bgColor:f,textColor:i}=Oe;return{title:e,x:_,y:m,w:y,h:x,bgColor:f,textColor:i,children:g}}const cd={class:"map-container"},hd={key:0},ud=Ne("p",null," \u79FB\u52A8\u7AEF\u957F\u56FE\u7ED8\u5236\u8F83\u6162\uFF0C\u663E\u793A\u9759\u6001\u56FE\u7247\uFF0C\u5927\u5BB6\u8BF7\u5728PC\u7AEF\u6253\u5F00 ",-1),fd=Ne("img",{src:Qf,alt:""},null,-1),dd=[ud,fd],gd={key:1},pd={key:0},md=["height"],vd={props:{height:Number,data:Object},setup(e){const t=e;console.log(Qt());let g=Te();const m=dn();var _=new td,y=_.getResult();const x=Te(m.path==="/"),f=Te(y.device.type&&x.value);function i(r){r.target&&(r.target.download&&c(),r.target.link&&(location.href=r.target.link))}function c(){const r=g.value,n=r.toDataURL({width:r.width,height:r.height,left:0,top:0,format:"png"}),o=document.createElement("a");o.download=`${r.title}-${Date.now()}.png`,o.href=n,document.body.appendChild(o),o.click(),document.body.removeChild(o)}return tt(()=>{f.value||od(g.value,t.data).on("mouse:down",i)}),(r,n)=>(Qe(),St("div",cd,[f.value?(Qe(),St("div",hd,dd)):(Qe(),St("div",gd,[x.value?(Qe(),St("p",pd," \u7EFF\u8272\u7684\u65B9\u5757\u90FD\u53EF\u4EE5\u70B9\u51FB\u8FDB\u5165\u8BE6\u60C5 ")):_c("",!0),Ne("button",{class:"download-btn",onClick:c},"\u5BFC\u51FA\u56FE\u7247"),Ne("canvas",{ref:(o,a)=>{a.canvasRef=o,Me(g)?g.value=o:g=o},height:e.height,width:"940"},null,8,md)]))]))}};function _d(e,t){var g=-1,m=e.length;for(t||(t=Array(m));++g<m;)t[g]=e[g];return t}var yd=_d,bd=Math.floor,wd=Math.random;function Cd(e,t){return e+bd(wd()*(t-e+1))}var xd=Cd,Sd=xd;function Td(e,t){var g=-1,m=e.length,_=m-1;for(t=t===void 0?m:t;++g<t;){var y=Sd(g,_),x=e[y];e[y]=e[g],e[g]=x}return e.length=t,e}var Sa=Td,Od=yd,Ed=Sa;function Pd(e){return Ed(Od(e))}var Ad=Pd;function kd(e,t){for(var g=-1,m=e==null?0:e.length,_=Array(m);++g<m;)_[g]=t(e[g],g,e);return _}var Dd=kd,Ld=Dd;function Md(e,t){return Ld(t,function(g){return e[g]})}var Rd=Md;function Fd(e,t){for(var g=-1,m=Array(e);++g<e;)m[g]=t(g);return m}var Id=Fd,jd=typeof Xt=="object"&&Xt&&Xt.Object===Object&&Xt,Ta=jd,Bd=Ta,Nd=typeof self=="object"&&self&&self.Object===Object&&self,zd=Bd||Nd||Function("return this")(),Oa=zd,Xd=Oa,Hd=Xd.Symbol,Ea=Hd,Xs=Ea,Pa=Object.prototype,Wd=Pa.hasOwnProperty,Ud=Pa.toString,oi=Xs?Xs.toStringTag:void 0;function Yd(e){var t=Wd.call(e,oi),g=e[oi];try{e[oi]=void 0;var m=!0}catch{}var _=Ud.call(e);return m&&(t?e[oi]=g:delete e[oi]),_}var Vd=Yd,Gd=Object.prototype,$d=Gd.toString;function qd(e){return $d.call(e)}var Kd=qd,Hs=Ea,Jd=Vd,Zd=Kd,Qd="[object Null]",eg="[object Undefined]",Ws=Hs?Hs.toStringTag:void 0;function tg(e){return e==null?e===void 0?eg:Qd:Ws&&Ws in Object(e)?Jd(e):Zd(e)}var Lr=tg;function ig(e){return e!=null&&typeof e=="object"}var Mr=ig,ng=Lr,rg=Mr,sg="[object Arguments]";function og(e){return rg(e)&&ng(e)==sg}var ag=og,Us=ag,lg=Mr,Aa=Object.prototype,cg=Aa.hasOwnProperty,hg=Aa.propertyIsEnumerable,ug=Us(function(){return arguments}())?Us:function(e){return lg(e)&&cg.call(e,"callee")&&!hg.call(e,"callee")},fg=ug,dg=Array.isArray,ka=dg,qn={exports:{}};function gg(){return!1}var pg=gg;(function(e,t){var g=Oa,m=pg,_=t&&!t.nodeType&&t,y=_&&!0&&e&&!e.nodeType&&e,x=y&&y.exports===_,f=x?g.Buffer:void 0,i=f?f.isBuffer:void 0,c=i||m;e.exports=c})(qn,qn.exports);var mg=9007199254740991,vg=/^(?:0|[1-9]\d*)$/;function _g(e,t){var g=typeof e;return t=t==null?mg:t,!!t&&(g=="number"||g!="symbol"&&vg.test(e))&&e>-1&&e%1==0&&e<t}var yg=_g,bg=9007199254740991;function wg(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bg}var Da=wg,Cg=Lr,xg=Da,Sg=Mr,Tg="[object Arguments]",Og="[object Array]",Eg="[object Boolean]",Pg="[object Date]",Ag="[object Error]",kg="[object Function]",Dg="[object Map]",Lg="[object Number]",Mg="[object Object]",Rg="[object RegExp]",Fg="[object Set]",Ig="[object String]",jg="[object WeakMap]",Bg="[object ArrayBuffer]",Ng="[object DataView]",zg="[object Float32Array]",Xg="[object Float64Array]",Hg="[object Int8Array]",Wg="[object Int16Array]",Ug="[object Int32Array]",Yg="[object Uint8Array]",Vg="[object Uint8ClampedArray]",Gg="[object Uint16Array]",$g="[object Uint32Array]",Ce={};Ce[zg]=Ce[Xg]=Ce[Hg]=Ce[Wg]=Ce[Ug]=Ce[Yg]=Ce[Vg]=Ce[Gg]=Ce[$g]=!0;Ce[Tg]=Ce[Og]=Ce[Bg]=Ce[Eg]=Ce[Ng]=Ce[Pg]=Ce[Ag]=Ce[kg]=Ce[Dg]=Ce[Lg]=Ce[Mg]=Ce[Rg]=Ce[Fg]=Ce[Ig]=Ce[jg]=!1;function qg(e){return Sg(e)&&xg(e.length)&&!!Ce[Cg(e)]}var Kg=qg;function Jg(e){return function(t){return e(t)}}var Zg=Jg,Kn={exports:{}};(function(e,t){var g=Ta,m=t&&!t.nodeType&&t,_=m&&!0&&e&&!e.nodeType&&e,y=_&&_.exports===m,x=y&&g.process,f=function(){try{var i=_&&_.require&&_.require("util").types;return i||x&&x.binding&&x.binding("util")}catch{}}();e.exports=f})(Kn,Kn.exports);var Qg=Kg,ep=Zg,Ys=Kn.exports,Vs=Ys&&Ys.isTypedArray,tp=Vs?ep(Vs):Qg,ip=tp,np=Id,rp=fg,sp=ka,op=qn.exports,ap=yg,lp=ip,cp=Object.prototype,hp=cp.hasOwnProperty;function up(e,t){var g=sp(e),m=!g&&rp(e),_=!g&&!m&&op(e),y=!g&&!m&&!_&&lp(e),x=g||m||_||y,f=x?np(e.length,String):[],i=f.length;for(var c in e)(t||hp.call(e,c))&&!(x&&(c=="length"||_&&(c=="offset"||c=="parent")||y&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||ap(c,i)))&&f.push(c);return f}var fp=up,dp=Object.prototype;function gp(e){var t=e&&e.constructor,g=typeof t=="function"&&t.prototype||dp;return e===g}var pp=gp;function mp(e,t){return function(g){return e(t(g))}}var vp=mp,_p=vp,yp=_p(Object.keys,Object),bp=yp,wp=pp,Cp=bp,xp=Object.prototype,Sp=xp.hasOwnProperty;function Tp(e){if(!wp(e))return Cp(e);var t=[];for(var g in Object(e))Sp.call(e,g)&&g!="constructor"&&t.push(g);return t}var Op=Tp;function Ep(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Pp=Ep,Ap=Lr,kp=Pp,Dp="[object AsyncFunction]",Lp="[object Function]",Mp="[object GeneratorFunction]",Rp="[object Proxy]";function Fp(e){if(!kp(e))return!1;var t=Ap(e);return t==Lp||t==Mp||t==Dp||t==Rp}var Ip=Fp,jp=Ip,Bp=Da;function Np(e){return e!=null&&Bp(e.length)&&!jp(e)}var zp=Np,Xp=fp,Hp=Op,Wp=zp;function Up(e){return Wp(e)?Xp(e):Hp(e)}var Yp=Up,Vp=Rd,Gp=Yp;function $p(e){return e==null?[]:Vp(e,Gp(e))}var qp=$p,Kp=Sa,Jp=qp;function Zp(e){return Kp(Jp(e))}var Qp=Zp,em=Ad,tm=Qp,im=ka;function nm(e){var t=im(e)?em:tm;return t(e)}var rm=nm;var sm=(e,t)=>{const g=e.__vccOpts||e;for(const[m,_]of t)g[m]=_;return g};const om={data(){return{text:"\u636E\u8BF4\u6253\u4E71\u4E00\u4E0B\u6587\u5B57\u987A\u5E8F\uFF0C\u4E0D\u4F1A\u5F71\u54CD\u5FAE\u535A\u9605\u8BFB\u4F53\u9A8C\uFF0C\u4F46\u662F\u53EF\u4EE5\u8D8A\u8FC7AI\u68C0\u6D4B\uFF0C\u9632\u6B62\u88AB\u5C01"}},computed:{transformText(){let e="",t=[];return this.text.split("").forEach(g=>{this.isSeperator(g)?(t=t.concat(this.reorder(this.tokenize(e))),t.push(g),e=""):e+=g}),e!=""&&(t=t.concat(this.reorder(this.tokenize(e)))),t.join("")}},methods:{copy(e,t){let g=null;if(t){if(g=document.createElement("div"),g.id="tempTarget",g.style.opacity="0",e){let m=document.querySelector("#"+e);g.innerText=m[t]}else g.innerText=t;document.body.appendChild(g)}else g=document.querySelector("#"+e);try{let m=document.createRange();m.selectNode(g),window.getSelection().removeAllRanges(),window.getSelection().addRange(m),document.execCommand("copy"),window.getSelection().removeAllRanges(),console.log("\u590D\u5236\u6210\u529F")}catch{console.log("\u590D\u5236\u5931\u8D25")}t&&g.parentElement.removeChild(g)},handleClick(){this.copy("container"),alert("\u62F7\u8D1D\u6210\u529F")},isAscii(e){return e.charCodeAt()<128},isSeperator(e){return[" ","\uFF0C","\u3002",",",";",",","?",".","\uFF1F","\uFF1B"].indexOf(e)>-1},reorder(e){let t=[2,3],g=0,m=[];for(;g<e.length;){let _=t[Math.round(Math.random())],y=Math.min(g+_,e.length);_=e.slice(g,y),_=rm(_),m=m.concat(_),g=y}return console.log(m),m},tokenize(e){let t=[],g="";return e.split("").forEach(m=>{this.isAscii(m)?g+=m:(g!=""&&(t.push(g),g=""),t.push(m))}),g!=""&&t.push(g),t}}},am=e=>(Al("data-v-31778efc"),e=e(),kl(),e),lm={class:"tip custom-block"},cm=am(()=>Ne("p",{class:"custom-block-title"},null,-1));function hm(e,t,g,m,_,y){return Qe(),St("div",null,[rc(Ne("textarea",{class:"weibo","onUpdate:modelValue":t[0]||(t[0]=x=>_.text=x),name:"",id:"",cols:"60",rows:"5"},null,512),[[lh,_.text]]),Ne("div",lm,[cm,Ne("p",{ref:"container",id:"container"},Zn(y.transformText),513)]),Ne("div",null,[Ne("button",{onClick:t[1]||(t[1]=(...x)=>y.handleClick&&y.handleClick(...x)),class:"submit"},"\u590D\u5236")])])}var um=sm(om,[["render",hm],["__scopeId","data-v-31778efc"]]),fm=Ei(({app:e,router:t,siteData:g})=>{if(e.component("roadmap",vd),e.component("weibosafe",um),typeof window!="undefined"){var m=m||[],_=document.createElement("script");_.src="https://hm.baidu.com/hm.js?a322b91ab21bac0156a47c43657d446a";var y=document.getElementsByTagName("script")[0];y.parentNode.insertBefore(_,y),t.afterEach(function(x){m.push(["_trackPageview",x.fullPath])})}});const dm=[Ef,Nf,zf,Zf,fm];function La(e,t,g){var m,_,y;t===void 0&&(t=50),g===void 0&&(g={});var x=(m=g.isImmediate)!=null&&m,f=(_=g.callback)!=null&&_,i=g.maxWait,c=Date.now(),r=[];function n(){if(i!==void 0){var a=Date.now()-c;if(a+t>=i)return i-a}return t}var o=function(){var a=[].slice.call(arguments),u=this;return new Promise(function(l,s){var h=x&&y===void 0;if(y!==void 0&&clearTimeout(y),y=setTimeout(function(){if(y=void 0,c=Date.now(),!x){var p=e.apply(u,a);f&&f(p),r.forEach(function(v){return(0,v.resolve)(p)}),r=[]}},n()),h){var d=e.apply(u,a);return f&&f(d),l(d)}r.push({resolve:l,reject:s})})};return o.cancel=function(a){y!==void 0&&clearTimeout(y),r.forEach(function(u){return(0,u.reject)(a)}),r=[]},o}const Gs=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,gm=()=>window.scrollTo({top:0,behavior:"smooth"});const pm=Ge({name:"BackToTop",setup(){const e=Te(0),t=xe(()=>e.value>300);tt(()=>{e.value=Gs(),window.addEventListener("scroll",La(()=>{e.value=Gs()},100))});const g=_e("div",{class:"back-to-top",onClick:gm});return()=>_e(Cr,{name:"back-to-top"},{default:()=>t.value?g:null})}}),mm=[pm];var vm=Pr(()=>{uf(),mf()});const _m=({headerLinkSelector:e,headerAnchorSelector:t,delay:g,offset:m=5})=>{const _=fn(),y=Qt(),x=()=>{var i,c,r,n;const o=Array.from(document.querySelectorAll(e)),u=Array.from(document.querySelectorAll(t)).filter(p=>o.some(v=>v.hash===p.hash)),l=Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop),s=window.innerHeight+l,h=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),d=Math.abs(h-s)<m;for(let p=0;p<u.length;p++){const v=u[p],b=u[p+1],C=p===0&&l===0,w=l>=((c=(i=v.parentElement)===null||i===void 0?void 0:i.offsetTop)!==null&&c!==void 0?c:0)-m,S=!b||l<((n=(r=b.parentElement)===null||r===void 0?void 0:r.offsetTop)!==null&&n!==void 0?n:0)-m;if(!(C||w&&S))continue;const A=decodeURIComponent(_.currentRoute.value.hash),M=decodeURIComponent(v.hash);if(A===M)return;if(d){for(let E=p+1;E<u.length;E++)if(A===decodeURIComponent(u[E].hash))return}ym(_,{hash:M,force:!0});return}},f=La(()=>x(),g);tt(()=>{f(),window.addEventListener("scroll",f)}),ln(()=>{window.removeEventListener("scroll",f)}),ot(()=>y.value.path,f)},ym=async(e,...t)=>{const{scrollBehavior:g}=e.options;e.options.scrollBehavior=void 0,await e.replace(...t).finally(()=>e.options.scrollBehavior=g)},bm="a.sidebar-item",wm=".header-anchor",Cm=200,xm=5;var Sm=Pr(()=>{_m({headerLinkSelector:bm,headerAnchorSelector:wm,delay:Cm,offset:xm})}),Ni={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(e,t){(function(g,m){e.exports=m()})(Xt,function(){var g={};g.version="0.2.0";var m=g.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};g.configure=function(u){var l,s;for(l in u)s=u[l],s!==void 0&&u.hasOwnProperty(l)&&(m[l]=s);return this},g.status=null,g.set=function(u){var l=g.isStarted();u=_(u,m.minimum,1),g.status=u===1?null:u;var s=g.render(!l),h=s.querySelector(m.barSelector),d=m.speed,p=m.easing;return s.offsetWidth,f(function(v){m.positionUsing===""&&(m.positionUsing=g.getPositioningCSS()),i(h,x(u,d,p)),u===1?(i(s,{transition:"none",opacity:1}),s.offsetWidth,setTimeout(function(){i(s,{transition:"all "+d+"ms linear",opacity:0}),setTimeout(function(){g.remove(),v()},d)},d)):setTimeout(v,d)}),this},g.isStarted=function(){return typeof g.status=="number"},g.start=function(){g.status||g.set(0);var u=function(){setTimeout(function(){!g.status||(g.trickle(),u())},m.trickleSpeed)};return m.trickle&&u(),this},g.done=function(u){return!u&&!g.status?this:g.inc(.3+.5*Math.random()).set(1)},g.inc=function(u){var l=g.status;return l?(typeof u!="number"&&(u=(1-l)*_(Math.random()*l,.1,.95)),l=_(l+u,0,.994),g.set(l)):g.start()},g.trickle=function(){return g.inc(Math.random()*m.trickleRate)},function(){var u=0,l=0;g.promise=function(s){return!s||s.state()==="resolved"?this:(l===0&&g.start(),u++,l++,s.always(function(){l--,l===0?(u=0,g.done()):g.set((u-l)/u)}),this)}}(),g.render=function(u){if(g.isRendered())return document.getElementById("nprogress");r(document.documentElement,"nprogress-busy");var l=document.createElement("div");l.id="nprogress",l.innerHTML=m.template;var s=l.querySelector(m.barSelector),h=u?"-100":y(g.status||0),d=document.querySelector(m.parent),p;return i(s,{transition:"all 0 linear",transform:"translate3d("+h+"%,0,0)"}),m.showSpinner||(p=l.querySelector(m.spinnerSelector),p&&a(p)),d!=document.body&&r(d,"nprogress-custom-parent"),d.appendChild(l),l},g.remove=function(){n(document.documentElement,"nprogress-busy"),n(document.querySelector(m.parent),"nprogress-custom-parent");var u=document.getElementById("nprogress");u&&a(u)},g.isRendered=function(){return!!document.getElementById("nprogress")},g.getPositioningCSS=function(){var u=document.body.style,l="WebkitTransform"in u?"Webkit":"MozTransform"in u?"Moz":"msTransform"in u?"ms":"OTransform"in u?"O":"";return l+"Perspective"in u?"translate3d":l+"Transform"in u?"translate":"margin"};function _(u,l,s){return u<l?l:u>s?s:u}function y(u){return(-1+u)*100}function x(u,l,s){var h;return m.positionUsing==="translate3d"?h={transform:"translate3d("+y(u)+"%,0,0)"}:m.positionUsing==="translate"?h={transform:"translate("+y(u)+"%,0)"}:h={"margin-left":y(u)+"%"},h.transition="all "+l+"ms "+s,h}var f=function(){var u=[];function l(){var s=u.shift();s&&s(l)}return function(s){u.push(s),u.length==1&&l()}}(),i=function(){var u=["Webkit","O","Moz","ms"],l={};function s(v){return v.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(b,C){return C.toUpperCase()})}function h(v){var b=document.body.style;if(v in b)return v;for(var C=u.length,w=v.charAt(0).toUpperCase()+v.slice(1),S;C--;)if(S=u[C]+w,S in b)return S;return v}function d(v){return v=s(v),l[v]||(l[v]=h(v))}function p(v,b,C){b=d(b),v.style[b]=C}return function(v,b){var C=arguments,w,S;if(C.length==2)for(w in b)S=b[w],S!==void 0&&b.hasOwnProperty(w)&&p(v,w,S);else p(v,C[1],C[2])}}();function c(u,l){var s=typeof u=="string"?u:o(u);return s.indexOf(" "+l+" ")>=0}function r(u,l){var s=o(u),h=s+l;c(s,l)||(u.className=h.substring(1))}function n(u,l){var s=o(u),h;!c(u,l)||(h=s.replace(" "+l+" "," "),u.className=h.substring(1,h.length-1))}function o(u){return(" "+(u.className||"")+" ").replace(/\s+/gi," ")}function a(u){u&&u.parentNode&&u.parentNode.removeChild(u)}return g})})(Ni);const Tm=()=>{tt(()=>{const e=fn(),t=new Set;t.add(e.currentRoute.value.path),Ni.exports.configure({showSpinner:!1}),e.beforeEach(g=>{t.has(g.path)||Ni.exports.start()}),e.afterEach(g=>{t.add(g.path),Ni.exports.done()})})};var Om=Pr(()=>{Tm()});const Em=[vm,Sm,Om],Pm=[["v-8daa1a0e","/","\u524D\u7AEF\u5B66\u4E60\u8DEF\u7EBF",["/index.html","/index.md"]],["v-2d0a89b7","/fe/","\u4ECB\u7ECD",["/fe/index.html","/fe/README.md"]],["v-6240d60f","/fe/app.html","App\u5F00\u53D1",["/fe/app","/fe/app.md"]],["v-65adaa6c","/fe/arch.html","\u9879\u76EE\u67B6\u6784",["/fe/arch","/fe/arch.md"]],["v-1c250430","/fe/browser.html","\u6D4F\u89C8\u5668",["/fe/browser","/fe/browser.md"]],["v-54572926","/fe/css.html","HTML + CSS \u5165\u95E8\u63A8\u8350",["/fe/css","/fe/css.md"]],["v-070cbd00","/fe/fis.html","\u5DE5\u7A0B\u5316",["/fe/fis","/fe/fis.md"]],["v-0b563763","/fe/hot.html","\u70ED\u95E8\u6280\u672F",["/fe/hot","/fe/hot.md"]],["v-03101522","/fe/interview.html","\u9762\u8BD5",["/fe/interview","/fe/interview.md"]],["v-88a59616","/fe/javascript.html","Javascript",["/fe/javascript","/fe/javascript.md"]],["v-21b90034","/fe/miniapp.html","\u5C0F\u7A0B\u5E8F",["/fe/miniapp","/fe/miniapp.md"]],["v-35690f80","/fe/node.html","Node.js",["/fe/node","/fe/node.md"]],["v-3556a88e","/fe/perf.html","\u6027\u80FD\u4F18\u5316",["/fe/perf","/fe/perf.md"]],["v-7d10a6d2","/fe/project.html","\u5B9E\u6218\u5F00\u53D1",["/fe/project","/fe/project.md"]],["v-c52ce09e","/fe/react.html","React",["/fe/react","/fe/react.md"]],["v-eb779d42","/fe/server.html","\u7F51\u7AD9\u642D\u5EFA",["/fe/server","/fe/server.md"]],["v-f99f08a0","/fe/test.html","test \u81EA\u52A8\u5316\u6D4B\u8BD5",["/fe/test","/fe/test.md"]],["v-1a829e46","/fe/typescript.html","Typescript",["/fe/typescript","/fe/typescript.md"]],["v-4519446c","/fe/vue.html","Vue.js",["/fe/vue","/fe/vue.md"]],["v-2d0a96cb","/it/","\u7A0B\u5E8F\u5458\u901A\u7528\u6280\u80FD",["/it/index.html","/it/README.md"]],["v-25cc5155","/it/algorithm.html","\u7B97\u6CD5\u6570\u636E\u7ED3\u6784",["/it/algorithm","/it/algorithm.md"]],["v-2da0e54d","/it/internet.html","\u8BA1\u7B97\u673A\u7F51\u7EDC",["/it/internet","/it/internet.md"]],["v-1e823484","/it/soft.html","\u7A0B\u5E8F\u5458\u8F6F\u6280\u80FD",["/it/soft","/it/soft.md"]],["v-5c7b669e","/tools/weibo.html","\u5B89\u5168\u53D1\u5FAE\u535A",["/tools/weibo","/tools/weibo.md"]],["v-3706649a","/404.html","",["/404"]]],Am=Pm.reduce((e,[t,g,m,_])=>(e.push({name:t,path:g,component:Ls,meta:{title:m}},..._.map(y=>({path:y,redirect:g}))),e),[{name:"404",path:"/:catchAll(.*)",component:Ls}]),km=(e,t)=>{const g=xe(()=>Fu(Dt.value.locales,t.currentRoute.value.path)),m=xe(()=>Bu(Dt.value,g.value)),_=xe(()=>Cu(mt.value)),y=xe(()=>Du(mt.value,m.value)),x=xe(()=>Au(y.value,_.value,m.value)),f=xe(()=>Mu(mt.value));e.provide(Tr,g),e.provide(pa,m),e.provide(ha,_),e.provide(ku,y),e.provide(da,x),e.provide(ga,f),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>_.value},$headTitle:{get:()=>y.value},$lang:{get:()=>f.value},$page:{get:()=>mt.value},$routeLocale:{get:()=>g.value},$site:{get:()=>Dt.value},$siteLocale:{get:()=>m.value},$withBase:{get:()=>Yu}})},Dm=e=>{e.component("ClientOnly",mu),e.component("Content",Or),e.component("OutboundLink",Er)},Lm=uh,Mm=Dh,Rm=async()=>{const e=Lm({name:"VuepressApp",setup(){zu();for(const g of Em)g();return()=>[_e(aa),...mm.map(g=>_e(g))]}}),t=gu({history:Mm(Ou(Dt.value.base)),routes:Am,scrollBehavior:(g,m,_)=>_||(g.hash?{el:g.hash}:{top:0})});t.beforeResolve(async(g,m)=>{var _;(g.path!==m.path||m===nt)&&([mt.value]=await Promise.all([bu(g.name),(_=la[g.name])===null||_===void 0?void 0:_.__asyncLoader()]))}),km(e,t),Dm(e);for(const g of dm)await g({app:e,router:t,siteData:Dt});return e.use(t),{app:e,router:t}};Rm().then(({app:e,router:t})=>{t.isReady().then(()=>{e.mount("#app")})});export{Yu as A,fe as B,Im as C,Ci as D,Eu as E,je as F,Ou as G,Te as H,ot as I,rc as J,jm as K,fn as L,Se as M,df as N,Xm as O,tt as P,en as Q,Qt as R,Hm as S,Cr as T,ua as U,_e as V,dr as W,pf as X,sm as _,Ee as a,Ne as b,St as c,Rm as createVueApp,mr as d,Fm as e,Ge as f,Dr as g,st as h,dn as i,Sl as j,xe as k,Tu as l,Bm as m,Nm as n,Qe as o,pr as p,Bo as q,fc as r,yc as s,Zn as t,Ru as u,_c as v,bo as w,ju as x,wu as y,zm as z};
